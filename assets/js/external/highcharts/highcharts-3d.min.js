"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Core/Math3D.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e){function s(t,e,i,s){var o=e.options.chart.options3d;const r=y(s,!!i&&e.inverted),a={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:y(o.depth,1)*y(o.viewDistance,0)},n=e.scale3d||1;s=x*o.beta*(r?-1:1);var o=x*o.alpha*(r?-1:1),h=Math.cos(o),l=Math.cos(-s),c=Math.sin(o),p=Math.sin(-s);return i||(a.x+=e.plotLeft,a.y+=e.plotTop),t.map(function(t){var e=(r?t.y:t.x)-a.x,i=(r?t.x:t.y)-a.y;return t=(t.z||0)-a.z,(i=d(e={x:l*e-p*t,y:-c*p*e+h*i-l*c*t,z:h*p*e+c*i+h*l*t},a,a.vd)).x=i.x*n+a.x,i.y=i.y*n+a.y,i.z=e.z*n+a.z,{x:r?i.y:i.x,y:r?i.x:i.y,z:i.z}})}function d(t,e,i){return e=0<i&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1,{x:t.x*e,y:t.y*e}}function o(t){let e=0,i,s;for(i=0;i<t.length;i++)s=(i+1)%t.length,e+=t[i].x*t[s].y-t[s].x*t[i].y;return e/2}const x=t["deg2rad"],y=e["pick"];return{perspective:s,perspective3D:d,pointCameraDistance:function(t,e){var i=e.options.chart.options3d,s=e.plotWidth/2;return e=e.plotHeight/2,i=y(i.depth,1)*y(i.viewDistance,0)+i.depth,Math.sqrt(Math.pow(s-y(t.plotX,t.x),2)+Math.pow(e-y(t.plotY,t.y),2)+Math.pow(i-y(t.plotZ,t.z),2))},shapeArea:o,shapeArea3D:function(t,e,i){return o(s(t,e,i))}}}),e(t,"Core/Renderer/SVG/SVGElement3D.js",[t["Core/Color/Color.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Utilities.js"]],function(t,r,e){const i=t["parse"],{defined:a,merge:s,objectEach:h,pick:n}=e,o={base:{initArgs:function(t){const i=this,s=i.renderer,o=s[i.pathType+"Path"](t),r=o.zIndexes;i.parts.forEach(function(t){const e={class:"highcharts-3d-"+t,zIndex:r[t]||0};s.styledMode&&("top"===t?e.filter="url(#highcharts-brighter)":"side"===t&&(e.filter="url(#highcharts-darker)")),i[t]=s.path(o[t]).attr(e).add(i)}),i.attr({"stroke-linejoin":"round",zIndex:r.group}),i.originalDestroy=i.destroy,i.destroy=i.destroyParts,i.forcedSides=o.forcedSides},singleSetterForParts:function(i,t,s,e,o,r){const a={},n=(e=[null,null,e||"attr",o,r],s&&s.zIndexes);return s?(n&&n.group&&this.attr({zIndex:n.group}),h(s,function(t,e){a[e]={},a[e][i]=t,n&&(a[e].zIndex=s.zIndexes[e]||0)}),e[1]=a):(a[i]=t,e[0]=a),this.processParts.apply(this,e)},processParts:function(e,i,s,o,r){const a=this;return a.parts.forEach(function(t){!1!==(e=i?n(i[t],!1):e)&&a[t][s](e,o,r)}),a},destroyParts:function(){return this.processParts(null,null,"destroy"),this.originalDestroy()}}};return o.cuboid=s(o.base,{parts:["front","top","side"],pathType:"cuboid",attr:function(t,e,i,s){var o;return"string"==typeof t&&void 0!==e&&(o=t,(t={})[o]=e),t.shapeArgs||a(t.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](t.shapeArgs||t)):r.prototype.attr.call(this,t,void 0,i,s)},animate:function(t,e,i){var s;return a(t.x)&&a(t.y)?(s=(t=this.renderer[this.pathType+"Path"](t)).forcedSides,this.singleSetterForParts("d",null,t,"animate",e,i),this.attr({zIndex:t.zIndexes.group}),s!==this.forcedSides&&(this.forcedSides=s,this.renderer.styledMode||o.cuboid.fillSetter.call(this,this.fill))):r.prototype.animate.call(this,t,e,i),this},fillSetter:function(t){return this.forcedSides=this.forcedSides||[],this.singleSetterForParts("fill",null,{front:t,top:i(t).brighten(0<=this.forcedSides.indexOf("top")?0:.1).get(),side:i(t).brighten(0<=this.forcedSides.indexOf("side")?0:-.1).get()}),this.color=this.fill=t,this}}),o}),e(t,"Core/Renderer/SVG/SVGRenderer3D.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Renderer/SVG/SVGElement.js"],t["Core/Renderer/SVG/SVGElement3D.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,l,i,c,s,o,r){const p=t["animObject"],a=e["parse"],{charts:b,deg2rad:d}=l,{perspective:g,shapeArea:v}=i,{defined:n,extend:x,merge:y,pick:f}=r,m=Math.cos,M=Math.sin,P=Math.PI,u=4*(Math.sqrt(2)-1)/3/(P/2);class S extends o{static compose(t){t=t.prototype;var e=S.prototype;t.elements3d=s,t.arc3d=e.arc3d,t.arc3dPath=e.arc3dPath,t.cuboid=e.cuboid,t.cuboidPath=e.cuboidPath,t.element3d=e.element3d,t.face3d=e.face3d,t.polyhedron=e.polyhedron,t.toLinePath=e.toLinePath,t.toLineSegments=e.toLineSegments}static curveTo(t,e,i,s,o,r,a,n){let h=[],l=r-o;return o<r&&r-o>Math.PI/2+1e-4?h=(h=h.concat(this.curveTo(t,e,i,s,o,o+Math.PI/2,a,n))).concat(this.curveTo(t,e,i,s,o+Math.PI/2,r,a,n)):r<o&&o-r>Math.PI/2+1e-4?h=(h=h.concat(this.curveTo(t,e,i,s,o,o-Math.PI/2,a,n))).concat(this.curveTo(t,e,i,s,o-Math.PI/2,r,a,n)):[["C",t+i*Math.cos(o)-i*u*l*Math.sin(o)+a,e+s*Math.sin(o)+s*u*l*Math.cos(o)+n,t+i*Math.cos(r)+i*u*l*Math.sin(r)+a,e+s*Math.sin(r)-s*u*l*Math.cos(r)+n,t+i*Math.cos(r)+a,e+s*Math.sin(r)+n]]}toLinePath(t,e){const i=[];return t.forEach(function(t){i.push(["L",t.x,t.y])}),t.length&&(i[0][0]="M",e&&i.push(["Z"])),i}toLineSegments(t){let e=[],i=!0;return t.forEach(function(t){e.push(i?["M",t.x,t.y]:["L",t.x,t.y]),i=!i}),e}face3d(t){const s=this,e=this.createElement("path");return e.vertexes=[],e.insidePlotArea=!1,e.enabled=!0,e.attr=function(t){var e,i;return"object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))&&(this.enabled=f(t.enabled,this.enabled),this.vertexes=f(t.vertexes,this.vertexes),this.insidePlotArea=f(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea,i=g(this.vertexes,b[s.chartIndex],this.insidePlotArea),e=s.toLinePath(i,!0),i=v(i),t.d=e,t.visibility=this.enabled&&0<i?"inherit":"hidden"),c.prototype.attr.apply(this,arguments)},e.animate=function(t){var e,i;return"object"==typeof t&&(n(t.enabled)||n(t.vertexes)||n(t.insidePlotArea))&&(this.enabled=f(t.enabled,this.enabled),this.vertexes=f(t.vertexes,this.vertexes),this.insidePlotArea=f(t.insidePlotArea,this.insidePlotArea),delete t.enabled,delete t.vertexes,delete t.insidePlotArea,i=g(this.vertexes,b[s.chartIndex],this.insidePlotArea),e=s.toLinePath(i,!0),i=v(i),i=this.enabled&&0<i?"visible":"hidden",t.d=e,this.attr("visibility",i)),c.prototype.animate.apply(this,arguments)},e.attr(t)}polyhedron(t){const o=this,r=this.g(),e=r.destroy;return this.styledMode||r.attr({"stroke-linejoin":"round"}),r.faces=[],r.destroy=function(){for(let t=0;t<r.faces.length;t++)r.faces[t].destroy();return e.call(this)},r.attr=function(e,t,i,s){if("object"==typeof e&&n(e.faces)){for(;r.faces.length>e.faces.length;)r.faces.pop().destroy();for(;r.faces.length<e.faces.length;)r.faces.push(o.face3d().add(r));for(let t=0;t<e.faces.length;t++)o.styledMode&&delete e.faces[t].fill,r.faces[t].attr(e.faces[t],null,i,s);delete e.faces}return c.prototype.attr.apply(this,arguments)},r.animate=function(e,i,s){if(e&&e.faces){for(;r.faces.length>e.faces.length;)r.faces.pop().destroy();for(;r.faces.length<e.faces.length;)r.faces.push(o.face3d().add(r));for(let t=0;t<e.faces.length;t++)r.faces[t].animate(e.faces[t],i,s);delete e.faces}return c.prototype.animate.apply(this,arguments)},r.attr(t)}element3d(t,e){const i=this.g();return x(i,this.elements3d[t]),i.initArgs(e),i}cuboid(t){return this.element3d("cuboid",t)}cuboidPath(t){function a(t){return 0===o&&1<t&&t<6?{x:y[t].x,y:y[t].y+10,z:y[t].z}:y[0].x===y[7].x&&4<=t?{x:y[t].x+10,y:y[t].y,z:y[t].z}:0===h&&t<2||5<t?{x:y[t].x,y:y[t].y,z:y[t].z+10}:y[t]}function n(t){return y[t]}let e=t.x||0,i=t.y||0,s=t.z||0,o=t.height||0;var r=t.width||0;let h=t.depth||0,l=b[this.chartIndex],c,p,d=l.options.chart.options3d.alpha,x=0,y=[{x:e,y:i,z:s},{x:e+r,y:i,z:s},{x:e+r,y:i+o,z:s},{x:e,y:i+o,z:s},{x:e,y:i+o,z:s+h},{x:e+r,y:i+o,z:s+h},{x:e+r,y:i,z:s+h},{x:e,y:i,z:s+h}],f=[];y=g(y,l,t.insidePlotArea);var u=function(t,e,i){let s=[[],-1],o=t.map(n),r=e.map(n);return t=t.map(a),e=e.map(a),v(o)<0?s=[o,0]:v(r)<0?s=[r,1]:i&&(f.push(i),s=!(v(t)<0)&&v(e)<0?[r,1]:[o,0]),s},z=u([3,2,1,0],[7,6,5,4],"front");return t=z[0],c=z[1],r=(z=u([1,6,7,0],[4,5,2,3],"top"))[0],p=z[1],u=(z=u([1,2,5,6],[0,7,4,3],"side"))[0],1===(z=z[1])?x+=1e6*(l.plotWidth-e):z||(x+=1e6*e),x+=10*(!p||0<=d&&d<=180||d<360&&357.5<d?l.plotHeight-i:10+i),1===c?x+=100*s:c||(x+=100*(1e3-s)),{front:this.toLinePath(t,!0),top:this.toLinePath(r,!0),side:this.toLinePath(u,!0),zIndexes:{group:Math.round(x)},forcedSides:f,isFront:c,isTop:p}}arc3d(t){function n(t){let e=!1,i={},s;for(s in t=y(t))-1!==o.indexOf(s)&&(i[s]=t[s],delete t[s],e=!0);return!!e&&[i,t]}const h=this.g(),e=h.renderer,o="x y r innerR start end depth".split(" ");return(t=y(t)).alpha=(t.alpha||0)*d,t.beta=(t.beta||0)*d,h.top=e.path(),h.side1=e.path(),h.side2=e.path(),h.inn=e.path(),h.out=e.path(),h.onAdd=function(){const e=h.parentGroup,i=h.attr("class");h.top.add(h),["out","inn","side1","side2"].forEach(function(t){h[t].attr({class:i+" highcharts-3d-side"}).add(e)})},["addClass","removeClass"].forEach(function(i){h[i]=function(){const e=arguments;["top","out","inn","side1","side2"].forEach(function(t){h[t][i].apply(h[t],e)})}}),h.setPaths=function(t){var e=h.renderer.arc3dPath(t),i=100*e.zTop;h.attribs=t,h.top.attr({d:e.top,zIndex:e.zTop}),h.inn.attr({d:e.inn,zIndex:e.zInn}),h.out.attr({d:e.out,zIndex:e.zOut}),h.side1.attr({d:e.side1,zIndex:e.zSide1}),h.side2.attr({d:e.side2,zIndex:e.zSide2}),h.zIndex=i,h.attr({zIndex:i}),t.center&&(h.top.setRadialReference(t.center),delete t.center)},h.setPaths(t),h.fillSetter=function(t){var e=a(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},["opacity","translateX","translateY","visibility"].forEach(function(t){h[t+"Setter"]=function(e,i){h[i]=e,["out","inn","side1","side2","top"].forEach(function(t){h[t].attr(i,e)})}}),h.attr=function(t){let e,i;return"object"==typeof t&&(i=n(t))&&(e=i[0],arguments[0]=i[1],x(h.attribs,e),h.setPaths(h.attribs)),c.prototype.attr.apply(h,arguments)},h.animate=function(t,e,i){let s=this.attribs,o,r,a="data-"+Math.random().toString(26).substring(2,9);return delete t.center,delete t.z,delete t.alpha,delete t.beta,(r=p(f(e,this.renderer.globalAnimation))).duration&&(e=n(t),h[a]=0,t[a]=1,h[a+"Setter"]=l.noop,e&&(o=e[0],r.step=function(t,e){function i(t){return s[t]+(f(o[t],s[t])-s[t])*e.pos}e.prop===a&&e.elem.setPaths(y(s,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end"),depth:i("depth")}))}),e=r),c.prototype.animate.call(this,t,e,i)},h.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),c.prototype.destroy.call(this)},h.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},h.show=function(t){this.top.show(t),this.out.show(t),this.inn.show(t),this.side1.show(t),this.side2.show(t)},h}arc3dPath(t){function e(t){return t=(t%=2*Math.PI)>Math.PI?2*Math.PI-t:t}var i=t.x||0,s=t.y||0,o=t.start||0,r=(t.end||0)-1e-5,a=t.r||0,n=t.innerR||0,h=t.depth||0,l=t.alpha||0,c=t.beta||0,p=Math.cos(o),d=Math.sin(o),x=(t=Math.cos(r),Math.sin(r)),y=a*Math.cos(c),f=(a*=Math.cos(l),n*Math.cos(c)),u=n*Math.cos(l),n=h*Math.sin(c),z=h*Math.sin(l),b=((h=(h=[["M",i+y*p,s+a*d]]).concat(S.curveTo(i,s,y,a,o,r,0,0))).push(["L",i+f*t,s+u*x]),(h=h.concat(S.curveTo(i,s,f,u,r,o,0,0))).push(["Z"]),0<c?Math.PI/2:0),c=0<l?0:Math.PI/2,b=!(-b<o)&&-b<r?-b:o,g=!(r<P-c)&&o<P-c?P-c:r,v=2*P-c;return l=(l=[["M",i+y*m(b),s+a*M(b)]]).concat(S.curveTo(i,s,y,a,b,g,0,0)),v<r&&o<v?(l.push(["L",i+y*m(g)+n,s+a*M(g)+z]),(l=l.concat(S.curveTo(i,s,y,a,g,v,n,z))).push(["L",i+y*m(v),s+a*M(v)]),(l=l.concat(S.curveTo(i,s,y,a,v,r,0,0))).push(["L",i+y*m(r)+n,s+a*M(r)+z]),(l=l.concat(S.curveTo(i,s,y,a,r,v,n,z))).push(["L",i+y*m(v),s+a*M(v)]),l=l.concat(S.curveTo(i,s,y,a,v,g,0,0))):r>P-c&&o<P-c&&(l.push(["L",i+y*Math.cos(g)+n,s+a*Math.sin(g)+z]),(l=l.concat(S.curveTo(i,s,y,a,g,r,n,z))).push(["L",i+y*Math.cos(r),s+a*Math.sin(r)]),l=l.concat(S.curveTo(i,s,y,a,r,g,0,0))),l.push(["L",i+y*Math.cos(g)+n,s+a*Math.sin(g)+z]),(l=l.concat(S.curveTo(i,s,y,a,g,b,n,z))).push(["Z"]),(c=(c=[["M",i+f*p,s+u*d]]).concat(S.curveTo(i,s,f,u,o,r,0,0))).push(["L",i+f*Math.cos(r)+n,s+u*Math.sin(r)+z]),(c=c.concat(S.curveTo(i,s,f,u,r,o,n,z))).push(["Z"]),p=[["M",i+y*p,s+a*d],["L",i+y*p+n,s+a*d+z],["L",i+f*p+n,s+u*d+z],["L",i+f*p,s+u*d],["Z"]],i=[["M",i+y*t,s+a*x],["L",i+y*t+n,s+a*x+z],["L",i+f*t+n,s+u*x+z],["L",i+f*t,s+u*x],["Z"]],x=Math.atan2(z,-n),s=Math.abs(r+x),t=Math.abs(o+x),o=Math.abs((o+r)/2+x),s=e(s),t=e(t),o=e(o),o*=1e5,r=1e5*t,s*=1e5,{top:h,zTop:1e5*Math.PI+1,out:l,zOut:Math.max(o,r,s),inn:c,zInn:Math.max(o,r,s),side1:p,zSide1:.99*s,side2:i,zSide2:.99*r}}}return S}),e(t,"Core/Chart/Chart3D.js",[t["Core/Color/Color.js"],t["Core/Defaults.js"],t["Core/Math3D.js"],t["Core/Utilities.js"]],function(t,e,i,s){const y=t["parse"],o=e["defaultOptions"],{perspective:g,shapeArea3D:v}=i,{addEvent:r,isArray:a,merge:n,pick:m,wrap:h}=s;var l;{var c=l=l||{};function p(t){this.is3d()&&"scatter"===t.options.type&&(t.options.type="scatter3d")}function d(){if(this.chart3d&&this.is3d()){const x=this.renderer;var t=this.options.chart.options3d,e=this.chart3d.get3dFrame(),i=this.plotLeft,s=this.plotLeft+this.plotWidth,o=this.plotTop,r=this.plotTop+this.plotHeight,t=t.depth,a=i-(e.left.visible?e.left.size:0),n=s+(e.right.visible?e.right.size:0),h=o-(e.top.visible?e.top.size:0),l=r+(e.bottom.visible?e.bottom.size:0),c=0-(e.front.visible?e.front.size:0),p=t+(e.back.visible?e.back.size:0),d=this.hasRendered?"animate":"attr";this.chart3d.frame3d=e,this.frameShapes||(this.frameShapes={bottom:x.polyhedron().add(),top:x.polyhedron().add(),left:x.polyhedron().add(),right:x.polyhedron().add(),back:x.polyhedron().add(),front:x.polyhedron().add()}),this.frameShapes.bottom[d]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:e.bottom.frontFacing?-1e3:1e3,faces:[{fill:y(e.bottom.color).brighten(.1).get(),vertexes:[{x:a,y:l,z:c},{x:n,y:l,z:c},{x:n,y:l,z:p},{x:a,y:l,z:p}],enabled:e.bottom.visible},{fill:y(e.bottom.color).brighten(.1).get(),vertexes:[{x:i,y:r,z:t},{x:s,y:r,z:t},{x:s,y:r,z:0},{x:i,y:r,z:0}],enabled:e.bottom.visible},{fill:y(e.bottom.color).brighten(-.1).get(),vertexes:[{x:a,y:l,z:c},{x:a,y:l,z:p},{x:i,y:r,z:t},{x:i,y:r,z:0}],enabled:e.bottom.visible&&!e.left.visible},{fill:y(e.bottom.color).brighten(-.1).get(),vertexes:[{x:n,y:l,z:p},{x:n,y:l,z:c},{x:s,y:r,z:0},{x:s,y:r,z:t}],enabled:e.bottom.visible&&!e.right.visible},{fill:y(e.bottom.color).get(),vertexes:[{x:n,y:l,z:c},{x:a,y:l,z:c},{x:i,y:r,z:0},{x:s,y:r,z:0}],enabled:e.bottom.visible&&!e.front.visible},{fill:y(e.bottom.color).get(),vertexes:[{x:a,y:l,z:p},{x:n,y:l,z:p},{x:s,y:r,z:t},{x:i,y:r,z:t}],enabled:e.bottom.visible&&!e.back.visible}]}),this.frameShapes.top[d]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:e.top.frontFacing?-1e3:1e3,faces:[{fill:y(e.top.color).brighten(.1).get(),vertexes:[{x:a,y:h,z:p},{x:n,y:h,z:p},{x:n,y:h,z:c},{x:a,y:h,z:c}],enabled:e.top.visible},{fill:y(e.top.color).brighten(.1).get(),vertexes:[{x:i,y:o,z:0},{x:s,y:o,z:0},{x:s,y:o,z:t},{x:i,y:o,z:t}],enabled:e.top.visible},{fill:y(e.top.color).brighten(-.1).get(),vertexes:[{x:a,y:h,z:p},{x:a,y:h,z:c},{x:i,y:o,z:0},{x:i,y:o,z:t}],enabled:e.top.visible&&!e.left.visible},{fill:y(e.top.color).brighten(-.1).get(),vertexes:[{x:n,y:h,z:c},{x:n,y:h,z:p},{x:s,y:o,z:t},{x:s,y:o,z:0}],enabled:e.top.visible&&!e.right.visible},{fill:y(e.top.color).get(),vertexes:[{x:a,y:h,z:c},{x:n,y:h,z:c},{x:s,y:o,z:0},{x:i,y:o,z:0}],enabled:e.top.visible&&!e.front.visible},{fill:y(e.top.color).get(),vertexes:[{x:n,y:h,z:p},{x:a,y:h,z:p},{x:i,y:o,z:t},{x:s,y:o,z:t}],enabled:e.top.visible&&!e.back.visible}]}),this.frameShapes.left[d]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:e.left.frontFacing?-1e3:1e3,faces:[{fill:y(e.left.color).brighten(.1).get(),vertexes:[{x:a,y:l,z:c},{x:i,y:r,z:0},{x:i,y:r,z:t},{x:a,y:l,z:p}],enabled:e.left.visible&&!e.bottom.visible},{fill:y(e.left.color).brighten(.1).get(),vertexes:[{x:a,y:h,z:p},{x:i,y:o,z:t},{x:i,y:o,z:0},{x:a,y:h,z:c}],enabled:e.left.visible&&!e.top.visible},{fill:y(e.left.color).brighten(-.1).get(),vertexes:[{x:a,y:l,z:p},{x:a,y:h,z:p},{x:a,y:h,z:c},{x:a,y:l,z:c}],enabled:e.left.visible},{fill:y(e.left.color).brighten(-.1).get(),vertexes:[{x:i,y:o,z:t},{x:i,y:r,z:t},{x:i,y:r,z:0},{x:i,y:o,z:0}],enabled:e.left.visible},{fill:y(e.left.color).get(),vertexes:[{x:a,y:l,z:c},{x:a,y:h,z:c},{x:i,y:o,z:0},{x:i,y:r,z:0}],enabled:e.left.visible&&!e.front.visible},{fill:y(e.left.color).get(),vertexes:[{x:a,y:h,z:p},{x:a,y:l,z:p},{x:i,y:r,z:t},{x:i,y:o,z:t}],enabled:e.left.visible&&!e.back.visible}]}),this.frameShapes.right[d]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:e.right.frontFacing?-1e3:1e3,faces:[{fill:y(e.right.color).brighten(.1).get(),vertexes:[{x:n,y:l,z:p},{x:s,y:r,z:t},{x:s,y:r,z:0},{x:n,y:l,z:c}],enabled:e.right.visible&&!e.bottom.visible},{fill:y(e.right.color).brighten(.1).get(),vertexes:[{x:n,y:h,z:c},{x:s,y:o,z:0},{x:s,y:o,z:t},{x:n,y:h,z:p}],enabled:e.right.visible&&!e.top.visible},{fill:y(e.right.color).brighten(-.1).get(),vertexes:[{x:s,y:o,z:0},{x:s,y:r,z:0},{x:s,y:r,z:t},{x:s,y:o,z:t}],enabled:e.right.visible},{fill:y(e.right.color).brighten(-.1).get(),vertexes:[{x:n,y:l,z:c},{x:n,y:h,z:c},{x:n,y:h,z:p},{x:n,y:l,z:p}],enabled:e.right.visible},{fill:y(e.right.color).get(),vertexes:[{x:n,y:h,z:c},{x:n,y:l,z:c},{x:s,y:r,z:0},{x:s,y:o,z:0}],enabled:e.right.visible&&!e.front.visible},{fill:y(e.right.color).get(),vertexes:[{x:n,y:l,z:p},{x:n,y:h,z:p},{x:s,y:o,z:t},{x:s,y:r,z:t}],enabled:e.right.visible&&!e.back.visible}]}),this.frameShapes.back[d]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:e.back.frontFacing?-1e3:1e3,faces:[{fill:y(e.back.color).brighten(.1).get(),vertexes:[{x:n,y:l,z:p},{x:a,y:l,z:p},{x:i,y:r,z:t},{x:s,y:r,z:t}],enabled:e.back.visible&&!e.bottom.visible},{fill:y(e.back.color).brighten(.1).get(),vertexes:[{x:a,y:h,z:p},{x:n,y:h,z:p},{x:s,y:o,z:t},{x:i,y:o,z:t}],enabled:e.back.visible&&!e.top.visible},{fill:y(e.back.color).brighten(-.1).get(),vertexes:[{x:a,y:l,z:p},{x:a,y:h,z:p},{x:i,y:o,z:t},{x:i,y:r,z:t}],enabled:e.back.visible&&!e.left.visible},{fill:y(e.back.color).brighten(-.1).get(),vertexes:[{x:n,y:h,z:p},{x:n,y:l,z:p},{x:s,y:r,z:t},{x:s,y:o,z:t}],enabled:e.back.visible&&!e.right.visible},{fill:y(e.back.color).get(),vertexes:[{x:i,y:o,z:t},{x:s,y:o,z:t},{x:s,y:r,z:t},{x:i,y:r,z:t}],enabled:e.back.visible},{fill:y(e.back.color).get(),vertexes:[{x:a,y:l,z:p},{x:n,y:l,z:p},{x:n,y:h,z:p},{x:a,y:h,z:p}],enabled:e.back.visible}]}),this.frameShapes.front[d]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:e.front.frontFacing?-1e3:1e3,faces:[{fill:y(e.front.color).brighten(.1).get(),vertexes:[{x:a,y:l,z:c},{x:n,y:l,z:c},{x:s,y:r,z:0},{x:i,y:r,z:0}],enabled:e.front.visible&&!e.bottom.visible},{fill:y(e.front.color).brighten(.1).get(),vertexes:[{x:n,y:h,z:c},{x:a,y:h,z:c},{x:i,y:o,z:0},{x:s,y:o,z:0}],enabled:e.front.visible&&!e.top.visible},{fill:y(e.front.color).brighten(-.1).get(),vertexes:[{x:a,y:h,z:c},{x:a,y:l,z:c},{x:i,y:r,z:0},{x:i,y:o,z:0}],enabled:e.front.visible&&!e.left.visible},{fill:y(e.front.color).brighten(-.1).get(),vertexes:[{x:n,y:l,z:c},{x:n,y:h,z:c},{x:s,y:o,z:0},{x:s,y:r,z:0}],enabled:e.front.visible&&!e.right.visible},{fill:y(e.front.color).get(),vertexes:[{x:s,y:o,z:0},{x:i,y:o,z:0},{x:i,y:r,z:0},{x:s,y:r,z:0}],enabled:e.front.visible},{fill:y(e.front.color).get(),vertexes:[{x:n,y:l,z:c},{x:a,y:l,z:c},{x:a,y:h,z:c},{x:n,y:h,z:c}],enabled:e.front.visible}]})}}function x(){this.styledMode&&[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(t){this.renderer.definition({tagName:"filter",attributes:{id:"highcharts-"+t.name},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",attributes:{type:"linear",slope:t.slope}},{tagName:"feFuncG",attributes:{type:"linear",slope:t.slope}},{tagName:"feFuncB",attributes:{type:"linear",slope:t.slope}}]}]})},this)}function f(){const e=this.options;this.is3d()&&(e.series||[]).forEach(function(t){"scatter"===(t.type||e.chart.type||e.chart.defaultSeriesType)&&(t.type="scatter3d")})}function u(){const t=this.options.chart.options3d;if(this.chart3d&&this.is3d()){t&&(t.alpha=t.alpha%360+(0<=t.alpha?0:360),t.beta=t.beta%360+(0<=t.beta?0:360));const e=this.inverted,i=this.clipBox,s=this.margin,o=e?"x":"y",r=e?"height":"width",a=e?"width":"height";i[e?"y":"x"]=-(s[3]||0),i[o]=-(s[0]||0),i[r]=this.chartWidth+(s[3]||0)+(s[1]||0),i[a]=this.chartHeight+(s[0]||0)+(s[2]||0),this.scale3d=1,!0===t.fitToPlot&&(this.scale3d=this.chart3d.getScale(t.depth)),this.chart3d.frame3d=this.chart3d.get3dFrame()}}function z(){this.is3d()&&(this.isDirtyBox=!0)}function b(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function M(){this.chart3d||(this.chart3d=new D(this))}function P(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}function S(t){let e=this.series.length;if(this.is3d())for(;e--;)(t=this.series[e]).translate(),t.render();else t.call(this)}function A(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}class D{constructor(t){this.frame3d=void 0,this.chart=t}get3dFrame(){const r=this.chart;var t=r.options.chart.options3d,e=t.frame,i=r.plotLeft,s=r.plotLeft+r.plotWidth,o=r.plotTop,a=r.plotTop+r.plotHeight,n=t.depth,h=(x=function(t){return.5<(t=v(t,r))?1:t<-.5?-1:0})([{x:i,y:a,z:n},{x:s,y:a,z:n},{x:s,y:a,z:0},{x:i,y:a,z:0}]),l=x([{x:i,y:o,z:0},{x:s,y:o,z:0},{x:s,y:o,z:n},{x:i,y:o,z:n}]),c=x([{x:i,y:o,z:0},{x:i,y:o,z:n},{x:i,y:a,z:n},{x:i,y:a,z:0}]),p=x([{x:s,y:o,z:n},{x:s,y:o,z:0},{x:s,y:a,z:0},{x:s,y:a,z:n}]),d=x([{x:i,y:a,z:0},{x:s,y:a,z:0},{x:s,y:o,z:0},{x:i,y:o,z:0}]),x=x([{x:i,y:o,z:n},{x:s,y:o,z:n},{x:s,y:a,z:n},{x:i,y:a,z:n}]);let y=!1,f=!1,u=!1,z=!1;[].concat(r.xAxis,r.yAxis,r.zAxis).forEach(function(t){t&&(t.horiz?t.opposite?f=!0:y=!0:t.opposite?z=!0:u=!0)});function b(e,t,i){const s=["size","color","visible"],o={};for(let t=0;t<s.length;t++){const i=s[t];for(let t=0;t<e.length;t++)if("object"==typeof e[t]){const s=e[t][i];if(void 0!==s&&null!==s){o[i]=s;break}}}return e=i,!0===o.visible||!1===o.visible?e=o.visible:"auto"===o.visible&&(e=0<t),{size:m(o.size,1),color:m(o.color,"none"),frontFacing:0<t,visible:e}}e={axes:{},bottom:b([e.bottom,e.top,e],h,y),top:b([e.top,e.bottom,e],l,f),left:b([e.left,e.right,e.side,e],c,u),right:b([e.right,e.left,e.side,e],p,z),back:b([e.back,e.front,e],x,!0),front:b([e.front,e.back,e],d,!1)};return"auto"===t.axisLabelPosition?(t=[],(p=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing})(e.left,e.front)&&t.push({y:(o+a)/2,x:i,z:0,xDir:{x:1,y:0,z:0}}),p(e.left,e.back)&&t.push({y:(o+a)/2,x:i,z:n,xDir:{x:0,y:0,z:-1}}),p(e.right,e.front)&&t.push({y:(o+a)/2,x:s,z:0,xDir:{x:0,y:0,z:1}}),p(e.right,e.back)&&t.push({y:(o+a)/2,x:s,z:n,xDir:{x:-1,y:0,z:0}}),h=[],p(e.bottom,e.front)&&h.push({x:(i+s)/2,y:a,z:0,xDir:{x:1,y:0,z:0}}),p(e.bottom,e.back)&&h.push({x:(i+s)/2,y:a,z:n,xDir:{x:-1,y:0,z:0}}),l=[],p(e.top,e.front)&&l.push({x:(i+s)/2,y:o,z:0,xDir:{x:1,y:0,z:0}}),p(e.top,e.back)&&l.push({x:(i+s)/2,y:o,z:n,xDir:{x:-1,y:0,z:0}}),c=[],p(e.bottom,e.left)&&c.push({z:(0+n)/2,y:a,x:i,xDir:{x:0,y:0,z:-1}}),p(e.bottom,e.right)&&c.push({z:(0+n)/2,y:a,x:s,xDir:{x:0,y:0,z:1}}),a=[],p(e.top,e.left)&&a.push({z:(0+n)/2,y:o,x:i,xDir:{x:0,y:0,z:-1}}),p(e.top,e.right)&&a.push({z:(0+n)/2,y:o,x:s,xDir:{x:0,y:0,z:1}}),e.axes={y:{left:(i=function(t,e,i){if(0===t.length)return null;if(1===t.length)return t[0];var s=g(t,r,!1);let o=0;for(let t=1;t<s.length;t++)(i*s[t][e]>i*s[o][e]||i*s[t][e]==i*s[o][e]&&s[t].z<s[o].z)&&(o=t);return t[o]})(t,"x",-1),right:i(t,"x",1)},x:{top:i(l,"y",-1),bottom:i(h,"y",1)},z:{top:i(a,"y",-1),bottom:i(c,"y",1)}}):e.axes={y:{left:{x:i,z:0,xDir:{x:1,y:0,z:0}},right:{x:s,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:o,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:a,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:u?s:i,y:o,xDir:u?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:u?s:i,y:a,xDir:u?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},e}getScale(t){const e=this.chart,i=e.plotLeft,s=e.plotWidth+i,o=e.plotTop,r=e.plotHeight+o,a=i+e.plotWidth/2,n=o+e.plotHeight/2;var h=Number.MAX_VALUE,l=-Number.MAX_VALUE,c=Number.MAX_VALUE,p=-Number.MAX_VALUE;let d,x=1;return d=[{x:i,y:o,z:0},{x:i,y:o,z:t}],[0,1].forEach(function(t){d.push({x:s,y:d[t].y,z:d[t].z})}),[0,1,2,3].forEach(function(t){d.push({x:d[t].x,y:r,z:d[t].z})}),(d=g(d,e,!1)).forEach(function(t){h=Math.min(h,t.x),l=Math.max(l,t.x),c=Math.min(c,t.y),p=Math.max(p,t.y)}),h<i&&(x=Math.min(x,1-Math.abs((i+a)/(h+a))%1)),s<l&&(x=Math.min(x,(s-a)/(l-a))),c<o&&(x=c<0?Math.min(x,(o+n)/(-c+o+n)):Math.min(x,1-(o+n)/(c+n)%1)),x=r<p?Math.min(x,Math.abs((r-n)/(p-n))):x}}c.Composition=D,c.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},c.compose=function(t,e){const i=t.prototype;e=e.prototype,i.is3d=function(){return!(!this.options.chart.options3d||!this.options.chart.options3d.enabled)},i.propsRequireDirtyBox.push("chart.options3d"),i.propsRequireUpdateSeries.push("chart.options3d"),e.matrixSetter=function(){let e;if(this.pos<1&&(a(this.start)||a(this.end))){var i=this.start||[1,0,0,1,0,0],s=this.end||[1,0,0,1,0,0];e=[];for(let t=0;t<6;t++)e.push(this.pos*s[t]+(1-this.pos)*i[t])}else e=this.end;this.elem.attr(this.prop,e,null,!0)},n(!0,o,c.defaultOptions),r(t,"init",M),r(t,"addSeries",p),r(t,"afterDrawChartBox",d),r(t,"afterGetContainer",x),r(t,"afterInit",f),r(t,"afterSetChartSize",u),r(t,"beforeRedraw",z),r(t,"beforeRender",b),h(i,"isInsidePlot",P),h(i,"renderSeries",S),h(i,"setClassName",A)}}return l}),e(t,"Core/Axis/ZAxis.js",[t["Core/Axis/Axis.js"],t["Core/Utilities.js"]],function(t,e){function i(t){return new l(this,t)}function s(){const t=this.options.zAxis=n(this.options.zAxis||{});this.is3d()&&(this.zAxis=[],t.forEach((t,e)=>{t.index=e,t.isX=!0,this.addZAxis(t).setScale()}))}const{addEvent:o,merge:r,pick:a,splat:n}=e,h=[];class l extends t{static compose(t){e.pushUnique(h,t)&&(o(t,"afterGetAxes",s),(t=t.prototype).addZAxis=i,t.collectionsWithInit.zAxis=[t.addZAxis],t.collectionsWithUpdate.push("zAxis"))}constructor(t,e){super(t,e),this.isZAxis=!0}getSeriesExtremes(){const e=this.chart;this.hasVisibleSeries=!1,this.dataMin=this.dataMax=this.ignoreMinPadding=this.ignoreMaxPadding=void 0,this.stacking&&this.stacking.buildStacks(),this.series.forEach(t=>{!t.visible&&e.options.chart.ignoreHiddenSeries||(this.hasVisibleSeries=!0,(t=t.zData).length&&(this.dataMin=Math.min(a(this.dataMin,t[0]),Math.min.apply(null,t)),this.dataMax=Math.max(a(this.dataMax,t[0]),Math.max.apply(null,t))))})}setAxisSize(){var t=this.chart;super.setAxisSize(),this.width=this.len=t.options.chart.options3d&&t.options.chart.options3d.depth||0,this.right=t.chartWidth-this.width-this.left}setOptions(t){t=r({offset:0,lineWidth:0},t),this.isZAxis=!0,super.setOptions(t),this.coll="zAxis"}}return l}),e(t,"Core/Axis/Axis3DDefaults.js",[],function(){return{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}}),e(t,"Core/Axis/Tick3DComposition.js",[t["Core/Utilities.js"]],function(e){function i(t){const e=this.axis.axis3D;e&&r(t.pos,e.fix3dPosition(t.pos))}function s(t){var e=this.axis.axis3D,i=t.apply(this,[].slice.call(arguments,1));if(e){const t=i[0],s=i[1];if("M"===t[0]&&"L"===s[0])return e=[e.fix3dPosition({x:t[1],y:t[2],z:0}),e.fix3dPosition({x:s[1],y:s[2],z:0})],this.axis.chart.renderer.toLineSegments(e)}return i}const{addEvent:o,extend:r,wrap:a}=e,n=[];return{compose:function(t){e.pushUnique(n,t)&&(o(t,"afterGetLabelPosition",i),a(t.prototype,"getMarkPath",s))}}}),e(t,"Core/Axis/Axis3DComposition.js",[t["Core/Axis/Axis3DDefaults.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Axis/Tick3DComposition.js"],t["Core/Utilities.js"]],function(i,t,e,s,o){function r(){const t=this.chart,e=this.options;t.is3d&&t.is3d()&&"colorAxis"!==this.coll&&(e.tickWidth=g(e.tickWidth,0),e.gridLineWidth=g(e.gridLineWidth,1))}function a(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.axisXpos:this.len-t.point.axisYpos)}function n(){this.axis3D||(this.axis3D=new M(this))}function h(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}function l(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=arguments,i=e[2];const s=[];if(e=this.getPlotLinePath({value:e[1]}),i=this.getPlotLinePath({value:i}),e&&i)for(let t=0;t<e.length;t+=2){var o=e[t],r=e[t+1],a=i[t],n=i[t+1];"M"===o[0]&&"L"===r[0]&&"M"===a[0]&&"L"===n[0]&&s.push(o,r,n,["L",a[1],a[2]],["Z"])}return s}function c(t){var e=this.axis3D;const i=this.chart;t=t.apply(this,[].slice.call(arguments,1));if("colorAxis"===this.coll||!i.chart3d||!i.is3d()||null===t)return t;var s=i.options.chart.options3d,o=this.isZAxis?i.plotWidth:s.depth,s=i.chart3d.frame3d,r=t[0],a=t[1],t=[];return"M"===r[0]&&"L"===a[0]&&(e=[e.swapZ({x:r[1],y:r[2],z:0}),e.swapZ({x:r[1],y:r[2],z:o}),e.swapZ({x:a[1],y:a[2],z:0}),e.swapZ({x:a[1],y:a[2],z:o})],this.horiz?(this.isZAxis?(s.left.visible&&t.push(e[0],e[2]),s.right.visible&&t.push(e[1],e[3])):(s.front.visible&&t.push(e[0],e[2]),s.back.visible&&t.push(e[1],e[3])),s.top.visible&&t.push(e[0],e[1]),s.bottom.visible&&t.push(e[2],e[3])):(s.front.visible&&t.push(e[0],e[2]),s.back.visible&&t.push(e[1],e[3]),s.left.visible&&t.push(e[0],e[1]),s.right.visible&&t.push(e[2],e[3])),t=u(t,this.chart,!1)),i.renderer.toLineSegments(t)}function p(i,s){var o=this.chart,r=this.ticks,a=this.gridGroup;if(this.categories&&o.frameShapes&&o.is3d()&&a&&s&&s.label){a=a.element.childNodes[0].getBBox();const i=o.frameShapes.left.getBBox();var n=o.options.chart.options3d,o={x:o.plotWidth/2,y:o.plotHeight/2,z:n.depth/2,vd:g(n.depth,1)*g(n.viewDistance,0)},h=r[(n=s.pos)-1],r=r[n+1];let t,e;return 0!==n&&h&&h.label&&h.label.xy&&(t=x({x:h.label.xy.x,y:h.label.xy.y,z:null},o,o.vd)),r&&r.label&&r.label.xy&&(e=x({x:r.label.xy.x,y:r.label.xy.y,z:null},o,o.vd)),r={x:s.label.xy.x,y:s.label.xy.y,z:null},r=x(r,o,o.vd),Math.abs(t?r.x-t.x:e?e.x-r.x:a.x-i.x)}return i.apply(this,[].slice.call(arguments,1))}function d(t){t=t.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(t,!0):t}const f=t["deg2rad"],{perspective:u,perspective3D:x,shapeArea:z}=e,{addEvent:y,merge:b,pick:g,wrap:v}=o,m=[];class M{static compose(t,e){s.compose(e),o.pushUnique(m,t)&&(b(!0,t.defaultOptions,i),t.keepProps.push("axis3D"),y(t,"init",n),y(t,"afterSetOptions",r),y(t,"drawCrosshair",a),t=t.prototype,v(t,"getLinePath",h),v(t,"getPlotBandPath",l),v(t,"getPlotLinePath",c),v(t,"getSlotWidth",p),v(t,"getTitlePosition",d))}constructor(t){this.axis=t}fix3dPosition(t,e){const i=this.axis;var s=i.chart;if("colorAxis"===i.coll||!s.chart3d||!s.is3d())return t;var o=f*s.options.chart.options3d.alpha,r=f*s.options.chart.options3d.beta,a=g(e&&i.options.title.position3d,i.options.labels.position3d),n=(e=g(e&&i.options.title.skew3d,i.options.labels.skew3d),s.chart3d.frame3d),h=s.plotLeft,l=s.plotWidth+h,c=s.plotTop,p=s.plotHeight+c;let d=s=0;var x={x:0,y:1,z:0};let y=!1;if(t=i.axis3D.swapZ({x:t.x,y:t.y,z:0}),i.isZAxis)if(i.opposite){if(null===n.axes.z.top)return{};d=t.y-c,t.x=n.axes.z.top.x,t.y=n.axes.z.top.y,h=n.axes.z.top.xDir,y=!n.top.frontFacing}else{if(null===n.axes.z.bottom)return{};d=t.y-p,t.x=n.axes.z.bottom.x,t.y=n.axes.z.bottom.y,h=n.axes.z.bottom.xDir,y=!n.bottom.frontFacing}else if(i.horiz)if(i.opposite){if(null===n.axes.x.top)return{};d=t.y-c,t.y=n.axes.x.top.y,t.z=n.axes.x.top.z,h=n.axes.x.top.xDir,y=!n.top.frontFacing}else{if(null===n.axes.x.bottom)return{};d=t.y-p,t.y=n.axes.x.bottom.y,t.z=n.axes.x.bottom.z,h=n.axes.x.bottom.xDir,y=!n.bottom.frontFacing}else if(i.opposite){if(null===n.axes.y.right)return{};s=t.x-l,t.x=n.axes.y.right.x,t.z=n.axes.y.right.z,h={x:(h=n.axes.y.right.xDir).z,y:h.y,z:-h.x}}else{if(null===n.axes.y.left)return{};s=t.x-h,t.x=n.axes.y.left.x,t.z=n.axes.y.left.z,h=n.axes.y.left.xDir}return"chart"!==a&&("flap"===a?i.horiz?(r=Math.sin(o),o=Math.cos(o),i.opposite&&(r=-r),y&&(r=-r),x={x:h.z*r,y:o,z:-h.x*r}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:"ortho"===a?i.horiz?(x=Math.cos(o),a=Math.sin(r)*x,o=-Math.sin(o),r=-x*Math.cos(r),x={x:h.y*r-h.z*o,y:h.z*a-h.x*r,z:h.x*o-h.y*a},o=1/Math.sqrt(x.x*x.x+x.y*x.y+x.z*x.z),x={x:(o=y?-o:o)*x.x,y:o*x.y,z:o*x.z}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:i.horiz?x={x:Math.sin(r)*Math.sin(o),y:Math.cos(o),z:-Math.cos(r)*Math.sin(o)}:h={x:Math.cos(r),y:0,z:Math.sin(r)}),t.x+=s*h.x+d*x.x,t.y+=s*h.y+d*x.y,t.z+=s*h.z+d*x.z,s=u([t],i.chart)[0],e&&(z(u([t,{x:t.x+h.x,y:t.y+h.y,z:t.z+h.z},{x:t.x+x.x,y:t.y+x.y,z:t.z+x.z}],i.chart))<0&&(h={x:-h.x,y:-h.y,z:-h.z}),t=u([{x:t.x,y:t.y,z:t.z},{x:t.x+h.x,y:t.y+h.y,z:t.z+h.z},{x:t.x+x.x,y:t.y+x.y,z:t.z+x.z}],i.chart),s.matrix=[t[1].x-t[0].x,t[1].y-t[0].y,t[2].x-t[0].x,t[2].y-t[0].y,s.x,s.y],s.matrix[4]-=s.x*s.matrix[0]+s.y*s.matrix[2],s.matrix[5]-=s.x*s.matrix[1]+s.y*s.matrix[3]),s}swapZ(t,e){var i=this.axis;return i.isZAxis?{x:(e=e?0:i.chart.plotLeft)+t.z,y:t.y,z:t.x-e}:t}}return class{static compose(t,e){s.compose(e),o.pushUnique(m,t)&&(b(!0,t.defaultOptions,i),t.keepProps.push("axis3D"),y(t,"init",n),y(t,"afterSetOptions",r),y(t,"drawCrosshair",a),t=t.prototype,v(t,"getLinePath",h),v(t,"getPlotBandPath",l),v(t,"getPlotLinePath",c),v(t,"getSlotWidth",p),v(t,"getTitlePosition",d))}constructor(t){this.axis=t}fix3dPosition(t,e){const i=this.axis;var s=i.chart;if("colorAxis"===i.coll||!s.chart3d||!s.is3d())return t;var o=f*s.options.chart.options3d.alpha,r=f*s.options.chart.options3d.beta,a=g(e&&i.options.title.position3d,i.options.labels.position3d),n=(e=g(e&&i.options.title.skew3d,i.options.labels.skew3d),s.chart3d.frame3d),h=s.plotLeft,l=s.plotWidth+h,c=s.plotTop,p=s.plotHeight+c;let d=s=0;var x={x:0,y:1,z:0};let y=!1;if(t=i.axis3D.swapZ({x:t.x,y:t.y,z:0}),i.isZAxis)if(i.opposite){if(null===n.axes.z.top)return{};d=t.y-c,t.x=n.axes.z.top.x,t.y=n.axes.z.top.y,h=n.axes.z.top.xDir,y=!n.top.frontFacing}else{if(null===n.axes.z.bottom)return{};d=t.y-p,t.x=n.axes.z.bottom.x,t.y=n.axes.z.bottom.y,h=n.axes.z.bottom.xDir,y=!n.bottom.frontFacing}else if(i.horiz)if(i.opposite){if(null===n.axes.x.top)return{};d=t.y-c,t.y=n.axes.x.top.y,t.z=n.axes.x.top.z,h=n.axes.x.top.xDir,y=!n.top.frontFacing}else{if(null===n.axes.x.bottom)return{};d=t.y-p,t.y=n.axes.x.bottom.y,t.z=n.axes.x.bottom.z,h=n.axes.x.bottom.xDir,y=!n.bottom.frontFacing}else if(i.opposite){if(null===n.axes.y.right)return{};s=t.x-l,t.x=n.axes.y.right.x,t.z=n.axes.y.right.z,h={x:(h=n.axes.y.right.xDir).z,y:h.y,z:-h.x}}else{if(null===n.axes.y.left)return{};s=t.x-h,t.x=n.axes.y.left.x,t.z=n.axes.y.left.z,h=n.axes.y.left.xDir}return"chart"!==a&&("flap"===a?i.horiz?(r=Math.sin(o),o=Math.cos(o),i.opposite&&(r=-r),y&&(r=-r),x={x:h.z*r,y:o,z:-h.x*r}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:"ortho"===a?i.horiz?(x=Math.cos(o),a=Math.sin(r)*x,o=-Math.sin(o),r=-x*Math.cos(r),x={x:h.y*r-h.z*o,y:h.z*a-h.x*r,z:h.x*o-h.y*a},o=1/Math.sqrt(x.x*x.x+x.y*x.y+x.z*x.z),x={x:(o=y?-o:o)*x.x,y:o*x.y,z:o*x.z}):h={x:Math.cos(r),y:0,z:Math.sin(r)}:i.horiz?x={x:Math.sin(r)*Math.sin(o),y:Math.cos(o),z:-Math.cos(r)*Math.sin(o)}:h={x:Math.cos(r),y:0,z:Math.sin(r)}),t.x+=s*h.x+d*x.x,t.y+=s*h.y+d*x.y,t.z+=s*h.z+d*x.z,s=u([t],i.chart)[0],e&&(z(u([t,{x:t.x+h.x,y:t.y+h.y,z:t.z+h.z},{x:t.x+x.x,y:t.y+x.y,z:t.z+x.z}],i.chart))<0&&(h={x:-h.x,y:-h.y,z:-h.z}),t=u([{x:t.x,y:t.y,z:t.z},{x:t.x+h.x,y:t.y+h.y,z:t.z+h.z},{x:t.x+x.x,y:t.y+x.y,z:t.z+x.z}],i.chart),s.matrix=[t[1].x-t[0].x,t[1].y-t[0].y,t[2].x-t[0].x,t[2].y-t[0].y,s.x,s.y],s.matrix[4]-=s.x*s.matrix[0]+s.y*s.matrix[2],s.matrix[5]-=s.x*s.matrix[1]+s.y*s.matrix[3]),s}swapZ(t,e){var i=this.axis;return i.isZAxis?{x:(e=e?0:i.chart.plotLeft)+t.z,y:t.y,z:t.x-e}:t}}}),e(t,"Core/Series/Series3D.js",[t["Core/Math3D.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,i){const n=t["perspective"],{addEvent:s,extend:o,merge:r,pick:h,isNumber:l}=i;class a extends e{translate(){super.translate.apply(this,arguments),this.chart.is3d()&&this.translate3dPoints()}translate3dPoints(){var t=this.options,e=this.chart,i=h(this.zAxis,e.options.zAxis[0]);let s=[],o,r,a=[];for(this.zPadding=(t.stacking?l(t.stack)?t.stack:0:this.index||0)*(t.depth||0+(t.groupZPadding||1)),r=0;r<this.data.length;r++)t=this.data[r],i&&i.translate?(o=i.logarithmic&&i.val2lin?i.val2lin(t.z):t.z,t.plotZ=i.translate(o),t.isInside=!!t.isInside&&(o>=i.min&&o<=i.max)):t.plotZ=this.zPadding,t.axisXpos=t.plotX,t.axisYpos=t.plotY,t.axisZpos=t.plotZ,s.push({x:t.plotX,y:t.plotY,z:t.plotZ}),a.push(t.plotX||0);for(this.rawPointsX=a,e=n(s,e,!0),r=0;r<this.data.length;r++)t=this.data[r],i=e[r],t.plotX=i.x,t.plotY=i.y,t.plotZ=i.z}}return a.defaultOptions=r(e.defaultOptions),s(e,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),o(e.prototype,{translate3dPoints:a.prototype.translate3dPoints}),a}),e(t,"Series/Area3D/Area3DSeries.js",[t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){function s(t){t=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return t;var e=a.getGraphPath,i=this.options,s=Math.round(this.yAxis.getThreshold(i.threshold));let o=[];if(this.rawPointsX)for(let t=0;t<this.points.length;t++)o.push({x:this.rawPointsX[t],y:i.stacking?this.points[t].yBottom:s,z:this.zPadding});return i=this.chart.options.chart.options3d,o=r(o,this.chart,!0).map(t=>({plotX:t.x,plotY:t.y,plotZ:t.z})),this.group&&i&&i.depth&&i.beta&&(this.markerGroup&&(this.markerGroup.add(this.group),this.markerGroup.attr({translateX:0,translateY:0})),this.group.attr({zIndex:Math.max(1,270<i.beta||i.beta<90?i.depth-Math.round(this.zPadding||0):Math.round(this.zPadding||0))})),o.reversed=!0,(e=e.call(this,o,!0,!0))[0]&&"M"===e[0][0]&&(e[0]=["L",e[0][1],e[0][2]]),this.areaPath&&((e=this.areaPath.splice(0,this.areaPath.length/2).concat(e)).xMap=this.areaPath.xMap,this.areaPath=e),t}const r=t["perspective"],{line:{prototype:a}}=e["seriesTypes"],o=i["wrap"],n=[];return{compose:function(t){i.pushUnique(n,t)&&o(t.prototype,"getGraphPath",s)}}}),e(t,"Series/Column3D/Column3DComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Utilities.js"]],function(t,e,i,r,s,o){function a(t){const e=t.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(e.stroke=this.options.edgeColor||e.fill,e["stroke-width"]=x(this.options.edgeWidth,1)),e}function n(t,e,i){var s=this.chart.is3d&&this.chart.is3d();s&&(this.options.inactiveOtherPoints=!0),t.call(this,e,i),s&&(this.options.inactiveOtherPoints=!1)}function h(t,...e){return this.series.chart.is3d()?this.graphic&&"g"!==this.graphic.element.nodeName:t.apply(this,e)}const l=t["prototype"],c=i["perspective"],{addEvent:p,extend:d,pick:x,wrap:y}=o;return y(l,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),y(e.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),l.translate3dPoints=function(){},l.translate3dShapes=function(){let o=this,r=o.chart,t=o.options,a=t.depth,n=(t.stacking?t.stack||0:o.index)*(a+(t.groupZPadding||1)),h=o.borderWidth%2?.5:0,l;r.inverted&&!o.yAxis.reversed&&(h*=-1),!1!==t.grouping&&(n=0),n+=t.groupZPadding||1,o.data.forEach(function(i){if((i.outside3dPlot=null)!==i.y){const s=d({x:0,y:0,width:0,height:0},i.shapeArgs||{});var t=i.tooltipPos;let e;[["x","width"],["y","height"]].forEach(t=>{if((e=s[t[0]]-h)<0&&(s[t[1]]+=s[t[0]]+h,s[t[0]]=-h,e=0),e+s[t[1]]>o[t[0]+"Axis"].len&&0!==s[t[1]]&&(s[t[1]]=o[t[0]+"Axis"].len-s[t[0]]),0!==s[t[1]]&&(s[t[0]]>=o[t[0]+"Axis"].len||s[t[0]]+s[t[1]]<=h)){for(const o in s)s[o]="y"===o?-9999:0;i.outside3dPlot=!0}}),"roundedRect"===i.shapeType&&(i.shapeType="cuboid"),i.shapeArgs=d(s,{z:n,depth:a,insidePlotArea:!0}),l={x:s.x+s.width/2,y:s.y,z:n+a/2},r.inverted&&(l.x=s.height,l.y=i.clientX||0),i.plot3d=c([l],r,!0,!1)[0],t&&(t=c([{x:t[0],y:t[1],z:n+a/2}],r,!0,!1)[0],i.tooltipPos=[t.x,t.y])}}),o.z=n},y(l,"animate",function(e){if(this.chart.is3d()){const e=this.yAxis,i=this,s=this.yAxis.reversed;arguments[1]?i.data.forEach(function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,s||(t.shapeArgs.y=t.stackY?t.plotY+e.translate(t.stackY):t.plotY+(t.negative?-t.height:t.height)))}):(i.data.forEach(function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic)&&t.graphic[t.outside3dPlot?"attr":"animate"](t.shapeArgs,i.options.animation)}),this.drawDataLabels())}else e.apply(this,[].slice.call(arguments,1))}),y(l,"plotGroup",function(t,e,i,s,o,r){return"dataLabelsGroup"!==e&&"markerGroup"!==e&&this.chart.is3d()&&(this[e]&&delete this[e],r&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(r)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0,"group"===e&&(arguments[3]="visible"))),t.apply(this,Array.prototype.slice.call(arguments,1))}),y(l,"setVisible",function(t,e){const i=this;i.chart.is3d()&&i.data.forEach(function(t){t.visible=t.options.visible=e=void 0===e?!x(i.visible,t.visible):e,i.options.data[i.data.indexOf(t)]=t.options,t.graphic&&t.graphic.attr({visibility:e?"visible":"hidden"})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),p(t,"afterInit",function(){if(this.chart.is3d()){let t=this.options;var e=t.grouping,i=t.stacking,s=this.yAxis.options.reversedStacks,o=0;if(void 0===e||e){for(e=function(t,e){const i=t.series,s={totalStacks:0};let o,r=1;return i.forEach(function(t){o=x(t.options.stack,e?0:i.length-1-t.index),s[o]?s[o].series.push(t):(s[o]={series:[t],position:r},r++)}),s.totalStacks=r+1,s}(this.chart,i),o=t.stack||0,i=0;i<e[o].series.length&&e[o].series[i]!==this;i++);o=10*(e.totalStacks-e[o].position)+(s?i:-i),this.xAxis.reversed||(o=10*e.totalStacks-o)}t.depth=t.depth||25,this.z=this.z||0,t.zIndex=o}}),y(l,"pointAttribs",a),y(l,"setState",n),y(l.pointClass.prototype,"hasNewShapeType",h),r.seriesTypes.columnRange&&(i=r.seriesTypes.columnrange.prototype,y(i,"pointAttribs",a),y(i,"setState",n),y(i.pointClass.prototype,"hasNewShapeType",h),i.plotGroup=l.plotGroup,i.setVisible=l.setVisible),y(e.prototype,"alignDataLabel",function(t,e,i,s,o){const r=this.chart;if(s.outside3dPlot=e.outside3dPlot,r.is3d()&&this.is("column")){var a=this.options;const t=x(s.inside,!!this.options.stacking),i=r.options.chart.options3d,n=e.pointWidth/2||0;a={x:o.x+n,y:o.y,z:this.z+a.depth/2},r.inverted&&(t&&(o.width=0,a.x+=e.shapeArgs.height/2),90<=i.alpha&&i.alpha<=270&&(a.y+=e.shapeArgs.width)),a=c([a],r,!0,!1)[0],o.x=a.x-n,o.y=e.outside3dPlot?-9e9:a.y}t.apply(this,[].slice.call(arguments,1))}),y(s.prototype,"getStackBox",function(t,e){const i=t.apply(this,[].slice.call(arguments,1)),s=this.axis.chart,o=e["width"];return s.is3d()&&this.base&&(t=+this.base.split(",")[0],e=s.series[t],t=s.options.chart.options3d,e&&e instanceof r.seriesTypes.column&&(e={x:i.x+(s.inverted?i.height:o/2),y:i.y,z:e.options.depth/2},s.inverted&&(i.width=0,90<=t.alpha&&t.alpha<=270&&(e.y+=o)),e=c([e],s,!0,!1)[0],i.x=e.x-o/2,i.y=e.y)),i}),t}),e(t,"Series/Pie3D/Pie3DPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(t){({pie:{prototype:{pointClass:t}}}=t.seriesTypes);const e=t.prototype.haloPath;class i extends t{constructor(){super(...arguments),this.series=void 0}haloPath(){var t;return null!=(t=this.series)&&t.chart.is3d()?[]:e.apply(this,arguments)}}return i}),e(t,"Series/Pie3D/Pie3DSeries.js",[t["Core/Globals.js"],t["Series/Pie3D/Pie3DPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s){const h=t["deg2rad"],{extend:o,pick:r}=({pie:t}=i["seriesTypes"],s);class a extends t{addPoint(){super.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)}animate(s){if(this.chart.is3d()){let t=this.options.animation;var o=this.center;let e=this.group,i=this.markerGroup;!0===t&&(t={}),s?(e.oldtranslateX=r(e.oldtranslateX,e.translateX),e.oldtranslateY=r(e.oldtranslateY,e.translateY),o={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},e.attr(o),i&&(i.attrSetters=e.attrSetters,i.attr(o))):(o={translateX:e.oldtranslateX,translateY:e.oldtranslateY,scaleX:1,scaleY:1},e.animate(o,t),i&&i.animate(o,t))}else super.animate.apply(this,arguments)}drawDataLabels(){if(this.chart.is3d()){const n=this.chart.options.chart.options3d;this.data.forEach(function(t){var e=t.shapeArgs,i=e.r,s=(e.start+e.end)/2;const o=(t=t.labelPosition).connectorPosition,r=-i*(1-Math.cos((e.alpha||n.alpha)*h))*Math.sin(s),a=i*(Math.cos((e.beta||n.beta)*h)-1)*Math.cos(s);[t.natural,o.breakAt,o.touchingSliceAt].forEach(function(t){t.x+=a,t.y+=r})})}super.drawDataLabels.apply(this,arguments)}pointAttribs(t){const e=super.pointAttribs.apply(this,arguments),i=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(e.stroke=i.edgeColor||t.color||this.color,e["stroke-width"]=r(i.edgeWidth,1)),e}translate(){var i,s,o,t,r,a,n;super.translate.apply(this,arguments),this.chart.is3d()&&(s=(i=this).options,o=s.depth||0,t=i.chart.options.chart.options3d,r=t.alpha,a=t.beta,n=s.stacking?(s.stack||0)*o:i._i*o,n+=o/2,!1!==s.grouping&&(n=0),i.data.forEach(function(t){var e=t.shapeArgs;t.shapeType="arc3d",e.z=n,e.depth=.75*o,e.alpha=r,e.beta=a,e.center=i.center,e=(e.end+e.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(e)*s.slicedOffset*Math.cos(r*h)),translateY:Math.round(Math.sin(e)*s.slicedOffset*Math.cos(r*h))}}))}drawTracker(){super.drawTracker.apply(this,arguments),this.chart.is3d()&&this.points.forEach(function(e){e.graphic&&["out","inn","side1","side2"].forEach(t=>{e.graphic&&(e.graphic[t].element.point=e)})})}}return o(a.prototype,{pointClass:e}),a}),e(t,"Series/Pie3D/Pie3DComposition.js",[t["Series/Pie3D/Pie3DPoint.js"],t["Series/Pie3D/Pie3DSeries.js"],t["Core/Series/SeriesRegistry.js"]],function(t,e,i){i.seriesTypes.pie.prototype.pointClass.prototype.haloPath=t.prototype.haloPath,i.seriesTypes.pie=e}),e(t,"Series/Scatter3D/Scatter3DPoint.js",[t["Series/Scatter/ScatterSeries.js"],t["Core/Utilities.js"]],function(t,e){const i=e["defined"];class s extends t.prototype.pointClass{constructor(){super(...arguments),this.series=this.options=void 0}applyOptions(){return super.applyOptions.apply(this,arguments),i(this.z)||(this.z=0),this}}return s}),e(t,"Series/Scatter3D/Scatter3DSeries.js",[t["Core/Math3D.js"],t["Series/Scatter3D/Scatter3DPoint.js"],t["Series/Scatter/ScatterSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s,o){const r=t["pointCameraDistance"],{extend:a,merge:n}=o;class h extends i{constructor(){super(...arguments),this.points=this.options=this.data=void 0}pointAttribs(t){const e=super.pointAttribs.apply(this,arguments);return this.chart.is3d()&&t&&(e.zIndex=r(t,this.chart)),e}}return h.defaultOptions=n(i.defaultOptions,{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}}),a(h.prototype,{axisTypes:["xAxis","yAxis","zAxis"],directTouch:!0,parallelArrays:["x","y","z"],pointArrayMap:["x","y","z"],pointClass:e}),s.registerSeriesType("scatter3d",h),h}),e(t,"masters/highcharts-3d.src.js",[t["Core/Globals.js"],t["Core/Renderer/SVG/SVGRenderer3D.js"],t["Core/Chart/Chart3D.js"],t["Core/Axis/ZAxis.js"],t["Core/Axis/Axis3DComposition.js"],t["Series/Area3D/Area3DSeries.js"]],function(t,e,i,s,o,r){e.compose(t.SVGRenderer),i.compose(t.Chart,t.Fx),s.compose(t.Chart),o.compose(t.Axis,t.Tick),r.compose(t.seriesTypes.area)})});
"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/variable-pie",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,a){t.hasOwnProperty(e)||(t[e]=a.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/VariablePie/VariablePieSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){const{pie:i}=t["seriesTypes"],{arrayMax:r,arrayMin:o,clamp:l,extend:a,fireEvent:g,merge:s,pick:y}=e;class n extends i{constructor(){super(...arguments),this.radii=this.points=this.options=this.data=void 0}calculateExtremes(){var t=this.chart;let a=this.options;var e=this.zData;let s=Math.min(t.plotWidth,t.plotHeight)-2*(a.slicedOffset||0),n={};t=this.center||this.getCenter(),["minPointSize","maxPointSize"].forEach(function(t){var e=a[t],i=/%$/.test(e),e=parseInt(e,10);n[t]=i?s*e/100:2*e}),this.minPxSize=t[3]+n.minPointSize,this.maxPxSize=l(t[2],t[3]+n.minPointSize,n.maxPointSize),e.length&&(t=y(a.zMin,o(e.filter(this.zValEval))),e=y(a.zMax,r(e.filter(this.zValEval))),this.getRadii(t,e,this.minPxSize,this.maxPxSize))}getRadii(t,e,i,a){let s=0,n=this.zData,r=n.length,o=[],l="radius"!==this.options.sizeBy,h=e-t;for(s;s<r;s++){var c=(c=this.zValEval(n[s])?n[s]:t)<=t?i/2:e<=c?a/2:(c=0<h?(c-t)/h:.5,l&&(c=Math.sqrt(c)),Math.ceil(i+c*(a-i))/2);o.push(c)}this.radii=o}redraw(){this.center=null,super.redraw.apply(this,arguments)}translate(t){this.generatePoints();let e=0;var i=(h=this.options).slicedOffset,a=i+(h.borderWidth||0),s=h.startAngle||0,n=Math.PI/180*(s-90),r=Math.PI/180*(y(h.endAngle,s+360)-90),s=r-n,o=this.points,l=h.dataLabels.distance,h=h.ignoreHiddenPoint;let c=o.length,d;for(this.startAngleRad=n,this.endAngleRad=r,this.calculateExtremes(),t||(this.center=t=this.getCenter()),r=0;r<c;r++){d=o[r];var p=this.radii[r],u=(d.labelDistance=y(d.options.dataLabels&&d.options.dataLabels.distance,l),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,d.labelDistance),n+e*s),m=(h&&!d.visible||(e+=d.percentage/100),n+e*s),f=(d.shapeType="arc",d.shapeArgs={x:t[0],y:t[1],r:p,innerR:t[3]/2,start:Math.round(1e3*u)/1e3,end:Math.round(1e3*m)/1e3},(u=(m+u)/2)>1.5*Math.PI?u-=2*Math.PI:u<-Math.PI/2&&(u+=2*Math.PI),d.slicedTranslation={translateX:Math.round(Math.cos(u)*i),translateY:Math.round(Math.sin(u)*i)},Math.cos(u)*t[2]/2),M=Math.sin(u)*t[2]/2,m=Math.cos(u)*p;p*=Math.sin(u),d.tooltipPos=[t[0]+.7*f,t[1]+.7*M],d.half=u<-Math.PI/2||u>Math.PI/2?1:0,d.angle=u,f=Math.min(a,d.labelDistance/5),d.labelPosition={natural:{x:t[0]+m+Math.cos(u)*d.labelDistance,y:t[1]+p+Math.sin(u)*d.labelDistance},computed:{},alignment:d.half?"right":"left",connectorPosition:{breakAt:{x:t[0]+m+Math.cos(u)*f,y:t[1]+p+Math.sin(u)*f},touchingSliceAt:{x:t[0]+m,y:t[1]+p}}}}g(this,"afterTranslate")}zValEval(t){return"number"==typeof t&&!isNaN(t)||null}}return n.defaultOptions=s(i.defaultOptions,{minPointSize:"10%",maxPointSize:"100%",zMin:void 0,zMax:void 0,sizeBy:"area",tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}<br/>Value: {point.y}<br/>Size: {point.z}<br/>'}}),a(n.prototype,{pointArrayMap:["y","z"],parallelArrays:["x","y","z"]}),t.registerSeriesType("variablepie",n),n}),e(t,"masters/modules/variable-pie.src.js",[],function(){})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/Funnel3D/SVGElement3DFunnel.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Renderer/RendererRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,r){let y=t["parse"],a=e["charts"],n=i.getRendererType().prototype["Element3D"],x=r["merge"];return class extends n{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(t,e,i){let r=parseFloat(t),n=this.parts,o=a[this.renderer.chartIndex],s="group-opacity-"+r+"-"+o.index;if(this.parts=this.mainParts,this.singleSetterForParts("opacity",r),this.parts=n,!o.renderer.filterId){for(var d of(o.renderer.definition({tagName:"filter",attributes:{id:s},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+r}}]}]}),this.sideGroups))this[d].attr({filter:"url(#"+s+")"});if(this.renderer.styledMode)for(var h of(o.renderer.definition({tagName:"style",textContent:".highcharts-"+s+" {filter:url(#"+s+")}"}),this.sideGroups))this[h].addClass("highcharts-"+s)}return this}fillSetter(t){let e=y(t),i=e.rgba[3],r={top:y(t).brighten(.1).get(),bottom:y(t).brighten(-.2).get()};if(i<1?(e.rgba[3]=1,e=e.get("rgb"),this.attr({opacity:i})):e=t,(e=e.linearGradient||e.radialGradient||!this.gradientForSides?e:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,y(t).brighten(-.2).get()],[.5,t],[1,y(t).brighten(-.2).get()]]}).linearGradient)for(var n of this.sideGroups){var o,s=this[n].gradientBox,d=e.linearGradient,h=x(e,{linearGradient:{x1:s.x+d.x1*s.width,y1:s.y+d.y1*s.height,x2:s.x+d.x2*s.width,y2:s.y+d.y2*s.height}});for(o of this.sideParts[n])r[o]=h}else if(x(!0,r,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(var a of this.sideGroups){var l,p=this[a].gradientBox,u=p.x+p.width/2,g=p.y+p.height/2,c=Math.min(p.width,p.height);for(l of this.sideParts[a])this[l].setRadialReference([u,g,c])}if(this.singleSetterForParts("fill",null,r),this.color=this.fill=t,e.linearGradient)for(var f of[this.frontLower,this.frontUpper]){let t=f.element,e=t&&this.renderer.gradients[t.gradient];e&&"userSpaceOnUse"!==e.attr("gradientUnits")&&e.attr({gradientUnits:"userSpaceOnUse"})}return this}adjustForGradient(){var t;for(t of this.sideGroups){let e={x:Number.MAX_VALUE,y:Number.MAX_VALUE},i={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(var r of this.sideParts[t]){let t=this[r];r=t.getBBox(!0),e={x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)},i={x:Math.max(i.x,r.x+r.width),y:Math.max(i.y,r.y+r.height)}}this[t].gradientBox={x:e.x,width:i.x-e.x,y:e.y,height:i.y-e.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}}}),e(t,"Series/Funnel3D/Funnel3DComposition.js",[t["Series/Funnel3D/SVGElement3DFunnel.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(i,t,e){let x=t["charts"],{error:m,extend:r,merge:w,pushUnique:n}=e,o=[];function s(t){let e=this.element3d("funnel3d",t),i=this.styledMode,r={"stroke-width":1,stroke:"none"};for(var n of(e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e),[e.frontUpper,e.backUpper,e.rightUpper]))i||n.attr(r),n.add(e.upperGroup);for(var o of(e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e),[e.frontLower,e.backLower,e.rightLower]))i||o.attr(r),o.add(e.lowerGroup);return e.gradientForSides=t.gradientForSides,e}function d(t){this.getCylinderEnd||m("A required Highcharts module is missing: cylinder.js",!0,x[this.chartIndex]);let e=x[this.chartIndex],i=t.alphaCorrection=90-Math.abs(e.options.chart.options3d.alpha%180-90),r=this.cuboidPath.call(this,w(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),n=r.isTop,o=!r.isFront,s=!!t.middle,d=this.getCylinderEnd(e,w(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:i})),h=t.bottom.width,a=w(t,{width:h,x:t.x-h/2,z:t.z-h/2,alphaCorrection:i}),l=this.getCylinderEnd(e,a,!0),p=h,u=a,g=l,c=l,f,y=(s&&(p=t.middle.width,u=w(t,{y:t.y+t.middle.fraction*t.height,width:p,x:t.x-p/2,z:t.z-p/2}),g=this.getCylinderEnd(e,u,!1),c=this.getCylinderEnd(e,u,!1)),{top:d,bottom:l,frontUpper:this.getCylinderFront(d,g),zIndexes:{group:r.zIndexes.group,top:0!==n?0:3,bottom:1!==n?0:3,frontUpper:o?2:1,backUpper:o?1:2,rightUpper:o?2:1}});return y.backUpper=this.getCylinderBack(d,g),f=Math.min(p,t.width)/Math.max(p,t.width)!=1,y.rightUpper=this.getCylinderFront(this.getCylinderEnd(e,w(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:f?-i:0}),!1),this.getCylinderEnd(e,w(u,{alphaCorrection:f?-i:0}),!s)),s&&(f=Math.min(p,h)/Math.max(p,h)!=1,w(!0,y,{frontLower:this.getCylinderFront(c,l),backLower:this.getCylinderBack(c,l),rightLower:this.getCylinderFront(this.getCylinderEnd(e,w(a,{alphaCorrection:f?-i:0}),!0),this.getCylinderEnd(e,w(u,{alphaCorrection:f?-i:0}),!1)),zIndexes:{frontLower:o?2:1,backLower:o?1:2,rightLower:o?1:2}})),y}return{compose:function(e){if(n(o,e)){let t=e.prototype;t.Element3D.types.funnel3d=i,r(t,{funnel3d:s,funnel3dPath:d})}}}}),e(t,"Series/Funnel3D/Funnel3DSeriesDefaults.js",[],function(){return{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}}),e(t,"Series/Funnel3D/Funnel3DPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){let{column:i}=t["seriesTypes"],r=e["extend"];class n extends i.prototype.pointClass{constructor(){super(...arguments),this.dlBoxRaw=void 0,this.options=void 0,this.series=void 0,this.y=void 0}}return r(n.prototype,{shapeType:"funnel3d"}),n}),e(t,"Series/Funnel3D/Funnel3DSeries.js",[t["Series/Funnel3D/Funnel3DComposition.js"],t["Series/Funnel3D/Funnel3DSeriesDefaults.js"],t["Series/Funnel3D/Funnel3DPoint.js"],t["Core/Globals.js"],t["Core/Math3D.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,r,n,o,s){let d=r["noop"],j=n["perspective"],{series:D,seriesTypes:{column:h}}=o,{extend:A,merge:a,pick:k,relativeLength:E}=s;class l extends h{constructor(){super(...arguments),this.center=void 0,this.data=void 0,this.options=void 0,this.points=void 0}alignDataLabel(t,e,i){let r=t.dlBoxRaw,n=this.chart.inverted,o=t.plotY>k(this.translatedThreshold,this.yAxis.len),s=k(i.inside,!!this.options.stacking),d={x:r.x,y:r.y,height:0};i.align=k(i.align,!n||s?"center":o?"right":"left"),i.verticalAlign=k(i.verticalAlign,n||s?"middle":o?"top":"bottom"),"top"!==i.verticalAlign&&(d.y+=r.bottom/("bottom"===i.verticalAlign?1:2)),d.width=this.getWidthAt(d.y),this.options.reversed&&(d.width=r.fullWidth-d.width),s?d.x-=d.width/2:"left"===i.align?(i.align="right",d.x-=1.5*d.width):"right"===i.align?(i.align="left",d.x+=d.width/2):d.x-=d.width/2,t.dlBox=d,h.prototype.alignDataLabel.apply(this,arguments)}bindAxes(){D.prototype.bindAxes.apply(this,arguments),A(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),a(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){D.prototype.translate.apply(this,arguments);let t=this.chart,e=this.options,i=e.reversed,r=e.ignoreHiddenPoint,n=t.plotWidth,o=t.plotHeight,s=e.center,d=E(s[0],n),h=E(s[1],o),a=E(e.width,n),l=E(e.height,o),p=E(e.neckWidth,n),u=E(e.neckHeight,o),g=h-l/2+l-u,c=this.data,f=0,y=0,x,m,w,b,C,v,F,S,U;for(var L of(this.getWidthAt=m=function(t){return t>g||l===u?p:p+(a-p)*(1-(t-(h-l/2))/(l-u))},this.center=[d,h,l],this.centerX=d,c))r&&!1===L.visible||(f+=L.y);for(var G of c)F=null,w=f?G.y/f:0,v=(C=h-l/2+y*l)+w*l,x=m(C),S=v-C,U={gradientForSides:k(G.options.gradientForSides,e.gradientForSides),x:d,y:C,height:S,width:x,z:1,top:{width:x}},x=m(v),U.bottom={fraction:w,width:x},C>=g?U.isCylinder=!0:v>g&&(F=v,x=m(g),v=g,U.bottom.width=x,U.middle={fraction:S?(g-C)/S:0,width:x}),i&&(U.y=C=h+l/2-(y+w)*l,U.middle&&(U.middle.fraction=1-(S?U.middle.fraction:0)),x=U.width,U.width=U.bottom.width,U.bottom.width=x),G.shapeArgs=A(G.shapeArgs,U),G.percentage=100*w,G.plotX=d,G.plotY=i?h+l/2-(y+w/2)*l:(C+(F||v))/2,b=j([{x:d,y:G.plotY,z:i?-(a-m(G.plotY))/2:-m(G.plotY)/2}],t,!0)[0],G.tooltipPos=[b.x,b.y],G.dlBoxRaw={x:d,width:m(G.plotY),y:C,bottom:U.height||0,fullWidth:a},r&&!1===G.visible||(y+=w)}}return l.compose=t.compose,l.defaultOptions=a(h.defaultOptions,e),A(l.prototype,{pointClass:i,translate3dShapes:d}),o.registerSeriesType("funnel3d",l),l}),e(t,"masters/modules/funnel3d.src.js",[t["Core/Renderer/RendererRegistry.js"],t["Series/Funnel3D/Funnel3DSeries.js"]],function(t,e){return e.compose(t.getRendererType()),e})});
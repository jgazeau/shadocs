!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel3d",["highcharts","highcharts/highcharts-3d","highcharts/modules/cylinder"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(n){"use strict";var e=n?n._modules:{};function t(e,t,i,r){e.hasOwnProperty(t)||(e[t]=r.apply(null,i),"function"==typeof CustomEvent&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel3D/SVGElement3DFunnel.js",[e["Core/Color/Color.js"],e["Core/Globals.js"],e["Core/Renderer/RendererRegistry.js"],e["Core/Utilities.js"]],function(e,t,i,r){let y=e["parse"],d=t["charts"],n=i.getRendererType().prototype["Element3D"],x=r["merge"];return class extends n{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(e){let t=parseFloat(e),i=this.parts,r=d[this.renderer.chartIndex],n="group-opacity-"+t+"-"+r.index;if(this.parts=this.mainParts,this.singleSetterForParts("opacity",t),this.parts=i,!r.renderer.filterId){for(var o of(r.renderer.definition({tagName:"filter",attributes:{id:n},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+t}}]}]}),this.sideGroups))this[o].attr({filter:"url(#"+n+")"});if(this.renderer.styledMode)for(var s of(r.renderer.definition({tagName:"style",textContent:".highcharts-"+n+" {filter:url(#"+n+")}"}),this.sideGroups))this[s].addClass("highcharts-"+n)}return this}fillSetter(e){let t=y(e),i=t.rgba[3],r={top:y(e).brighten(.1).get(),bottom:y(e).brighten(-.2).get()};if(i<1?(t.rgba[3]=1,t=t.get("rgb"),this.attr({opacity:i})):t=e,(t=t.linearGradient||t.radialGradient||!this.gradientForSides?t:{linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,y(e).brighten(-.2).get()],[.5,e],[1,y(e).brighten(-.2).get()]]}).linearGradient)for(var n of this.sideGroups){var o,s=this[n].gradientBox,d=t.linearGradient,h=x(t,{linearGradient:{x1:s.x+d.x1*s.width,y1:s.y+d.y1*s.height,x2:s.x+d.x2*s.width,y2:s.y+d.y2*s.height}});for(o of this.sideParts[n])r[o]=h}else if(x(!0,r,{frontUpper:t,backUpper:t,rightUpper:t,frontLower:t,backLower:t,rightLower:t}),t.radialGradient)for(var a of this.sideGroups){var l,p=this[a].gradientBox,g=p.x+p.width/2,u=p.y+p.height/2,f=Math.min(p.width,p.height);for(l of this.sideParts[a])this[l].setRadialReference([g,u,f])}if(this.singleSetterForParts("fill",null,r),this.color=this.fill=e,t.linearGradient)for(var c of[this.frontLower,this.frontUpper]){let e=c.element,t=e&&this.renderer.gradients[e.gradient];t&&"userSpaceOnUse"!==t.attr("gradientUnits")&&t.attr({gradientUnits:"userSpaceOnUse"})}return this}adjustForGradient(){var i;for(i of this.sideGroups){let e={x:Number.MAX_VALUE,y:Number.MAX_VALUE},t={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(var r of this.sideParts[i])r=this[r].getBBox(!0),e={x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)},t={x:Math.max(t.x,r.x+r.width),y:Math.max(t.y,r.y+r.height)};this[i].gradientBox={x:e.x,width:t.x-e.x,y:e.y,height:t.y-e.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}}}),t(e,"Series/Funnel3D/Funnel3DComposition.js",[e["Series/Funnel3D/SVGElement3DFunnel.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(i,e,t){let x=e["charts"],{error:m,extend:r,merge:w}=t;function n(e){let t=this.element3d("funnel3d",e),i=this.styledMode,r={"stroke-width":1,stroke:"none"};for(var n of(t.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:t.frontUpper.zIndex}).add(t),[t.frontUpper,t.backUpper,t.rightUpper]))i||n.attr(r),n.add(t.upperGroup);for(var o of(t.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:t.frontLower.zIndex}).add(t),[t.frontLower,t.backLower,t.rightLower]))i||o.attr(r),o.add(t.lowerGroup);return t.gradientForSides=e.gradientForSides,t}function o(e){this.getCylinderEnd||m("A required Highcharts module is missing: cylinder.js",!0,x[this.chartIndex]);let t=x[this.chartIndex],i=e.alphaCorrection=90-Math.abs(t.options.chart.options3d.alpha%180-90),r=this.cuboidPath.call(this,w(e,{depth:e.width,width:(e.width+e.bottom.width)/2})),n=r.isTop,o=!r.isFront,s=!!e.middle,d=this.getCylinderEnd(t,w(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:i})),h=e.bottom.width,a=w(e,{width:h,x:e.x-h/2,z:e.z-h/2,alphaCorrection:i}),l=this.getCylinderEnd(t,a,!0),p=h,g=a,u=l,f=l,c,y=(s&&(p=e.middle.width,g=w(e,{y:e.y+e.middle.fraction*e.height,width:p,x:e.x-p/2,z:e.z-p/2}),u=this.getCylinderEnd(t,g,!1),f=this.getCylinderEnd(t,g,!1)),{top:d,bottom:l,frontUpper:this.getCylinderFront(d,u),zIndexes:{group:r.zIndexes.group,top:0!==n?0:3,bottom:1!==n?0:3,frontUpper:o?2:1,backUpper:o?1:2,rightUpper:o?2:1}});return y.backUpper=this.getCylinderBack(d,u),c=Math.min(p,e.width)/Math.max(p,e.width)!=1,y.rightUpper=this.getCylinderFront(this.getCylinderEnd(t,w(e,{x:e.x-e.width/2,z:e.z-e.width/2,alphaCorrection:c?-i:0}),!1),this.getCylinderEnd(t,w(g,{alphaCorrection:c?-i:0}),!s)),s&&(c=Math.min(p,h)/Math.max(p,h)!=1,w(!0,y,{frontLower:this.getCylinderFront(f,l),backLower:this.getCylinderBack(f,l),rightLower:this.getCylinderFront(this.getCylinderEnd(t,w(a,{alphaCorrection:c?-i:0}),!0),this.getCylinderEnd(t,w(g,{alphaCorrection:c?-i:0}),!1)),zIndexes:{frontLower:o?2:1,backLower:o?1:2,rightLower:o?1:2}})),y}return{compose:function(e){let t=e.prototype;t.funnel3d||(t.Element3D.types.funnel3d=i,r(t,{funnel3d:n,funnel3dPath:o}))}}}),t(e,"Series/Funnel3D/Funnel3DSeriesDefaults.js",[],function(){return{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}}),t(e,"Series/Funnel3D/Funnel3DPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){let{column:i}=e["seriesTypes"],r=t["extend"];class n extends i.prototype.pointClass{}return r(n.prototype,{shapeType:"funnel3d"}),n}),t(e,"Series/Funnel3D/Funnel3DSeries.js",[e["Series/Funnel3D/Funnel3DComposition.js"],e["Series/Funnel3D/Funnel3DSeriesDefaults.js"],e["Series/Funnel3D/Funnel3DPoint.js"],e["Core/Globals.js"],e["Core/Math3D.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,i,r,n,o,s){let d=r["noop"],j=n["perspective"],{series:D,seriesTypes:{column:h}}=o,{extend:A,merge:a,pick:k,relativeLength:E}=s;class l extends h{alignDataLabel(e,t,i){let r=e.dlBoxRaw,n=this.chart.inverted,o=e.plotY>k(this.translatedThreshold,this.yAxis.len),s=k(i.inside,!!this.options.stacking),d={x:r.x,y:r.y,height:0};i.align=k(i.align,!n||s?"center":o?"right":"left"),i.verticalAlign=k(i.verticalAlign,n||s?"middle":o?"top":"bottom"),"top"!==i.verticalAlign&&(d.y+=r.bottom/("bottom"===i.verticalAlign?1:2)),d.width=this.getWidthAt(d.y),this.options.reversed&&(d.width=r.fullWidth-d.width),s?d.x-=d.width/2:"left"===i.align?(i.align="right",d.x-=1.5*d.width):"right"===i.align?(i.align="left",d.x+=d.width/2):d.x-=d.width/2,e.dlBox=d,h.prototype.alignDataLabel.apply(this,arguments)}bindAxes(){D.prototype.bindAxes.apply(this,arguments),A(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),a(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){D.prototype.translate.apply(this,arguments);let e=this.chart,t=this.options,i=t.reversed,r=t.ignoreHiddenPoint,n=e.plotWidth,o=e.plotHeight,s=t.center,d=E(s[0],n),h=E(s[1],o),a=E(t.width,n),l=E(t.height,o),p=E(t.neckWidth,n),g=E(t.neckHeight,o),u=h-l/2+l-g,f=this.points,c=0,y=0,x,m,w,b,C,F,S,v,L;for(var U of(this.getWidthAt=m=function(e){return e>u||l===g?p:p+(a-p)*(1-(e-(h-l/2))/(l-g))},this.center=[d,h,l],this.centerX=d,f))r&&!1===U.visible||(c+=U.y);for(var G of f)S=null,w=c?G.y/c:0,F=(C=h-l/2+y*l)+w*l,x=m(C),v=F-C,L={gradientForSides:k(G.options.gradientForSides,t.gradientForSides),x:d,y:C,height:v,width:x,z:1,top:{width:x}},x=m(F),L.bottom={fraction:w,width:x},C>=u?L.isCylinder=!0:F>u&&(S=F,x=m(u),F=u,L.bottom.width=x,L.middle={fraction:v?(u-C)/v:0,width:x}),i&&(L.y=C=h+l/2-(y+w)*l,L.middle&&(L.middle.fraction=1-(v?L.middle.fraction:0)),x=L.width,L.width=L.bottom.width,L.bottom.width=x),G.shapeArgs=A(G.shapeArgs,L),G.percentage=100*w,G.plotX=d,G.plotY=i?h+l/2-(y+w/2)*l:(C+(S||F))/2,b=j([{x:d,y:G.plotY,z:i?-(a-m(G.plotY))/2:-m(G.plotY)/2}],e,!0)[0],G.tooltipPos=[b.x,b.y],G.dlBoxRaw={x:d,width:m(G.plotY),y:C,bottom:L.height||0,fullWidth:a},r&&!1===G.visible||(y+=w)}}return l.compose=e.compose,l.defaultOptions=a(h.defaultOptions,t),A(l.prototype,{pointClass:i,translate3dShapes:d}),o.registerSeriesType("funnel3d",l),l}),t(e,"masters/modules/funnel3d.src.js",[e["Core/Globals.js"],e["Series/Funnel3D/Funnel3DSeries.js"],e["Core/Renderer/RendererRegistry.js"]],function(e,t,i){return t.compose(i.getRendererType()),e})});
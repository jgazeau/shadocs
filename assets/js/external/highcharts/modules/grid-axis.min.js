"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,e,s){t.hasOwnProperty(i)||(t[i]=s.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,a,o){function s(s,t){const r={width:0,height:0};return t.forEach(function(t){t=s[t];let i,e;o.isObject(t,!0)&&(t=(e=o.isObject(t.label,!0)?t.label:{}).getBBox?e.getBBox().height:0,e.textStr&&!S(e.textPxLength)&&(e.textPxLength=e.getBBox().width),i=S(e.textPxLength)?Math.round(e.textPxLength):0,e.textStr&&(i=Math.round(e.getBBox().width)),r.height=Math.max(t,r.height),r.width=Math.max(i,r.width))}),"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(r.width+=this.options.labels.indentation*((this.treeGrid.mapOfPosToGridNode[-1].height||0)-1)),r}function r(){const t=this["grid"];(t&&t.columns||[]).forEach(function(t){t.getOffset()})}function h(t){if(!0===(this.options.grid||{}).enabled){const{axisTitle:h,height:a,horiz:l,left:d,offset:c,opposite:g,options:u,top:f,width:p}=this;var i=this.tickSize(),e=h&&h.getBBox().width,s=u.title.x,r=u.title.y,o=E(u.title.margin,l?5:10),n=h?this.chart.renderer.fontMetrics(h).f:0,i=(l?f+a:d)+(l?1:-1)*(g?-1:1)*(i?i[0]/2:0)+(this.side===z.bottom?n:0);t.titlePosition.x=l?d-(e||0)/2-o+s:i+(g?p:0)+c+s,t.titlePosition.y=l?i-(g?a:0)+(g?n:-n)/2+c+r:f-o+r}}function l(){var i,{chart:e,options:{grid:s={}},userOptions:r}=this;if(s.enabled&&((i=this.options).labels.align=E(i.labels.align,"center"),this.categories||(i.showLastLabel=!1),this.labelRotation=0,i.labels.rotation=0),s.columns){i=this.grid.columns=[];let t=this.grid.columnIndex=0;for(;++t<s.columns.length;){var o=C(r,s.columns[s.columns.length-t-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete o.grid.columns,(o=new n(this.chart,o)).grid.isColumn=!0,o.grid.columnIndex=t,B(e.axes,o),B(e[this.coll],o),i.push(o)}}}function d(){var e=this.grid,s=this.options;if(!0===(s.grid||{}).enabled){var r,t,i,o,n=this.min||0,h=this.max||0;if(this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine&&((r=s.lineWidth)&&(t=(r=this.getLinePath(r))[0],i=r[1],o=((this.tickSize("tick")||[1])[0]-1)*(this.side===z.top||this.side===z.left?-1:1),"M"===t[0]&&"L"===i[0]&&(this.horiz?(t[2]+=o,i[2]+=o):(t[1]+=o,i[1]+=o)),!this.horiz&&this.chart.marginRight&&(t=[t,["L",this.left,t[2]||0]],o=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(h+this.tickmarkOffset)],i=[["M",i[1]||0,this.toPixels(h+this.tickmarkOffset)],o],this.grid.upperBorder||0==n%1||(this.grid.upperBorder=this.grid.renderBorder(t)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:s.lineColor,"stroke-width":s.lineWidth}),this.grid.upperBorder.animate({d:t})),this.grid.lowerBorder||0==h%1||(this.grid.lowerBorder=this.grid.renderBorder(i)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:s.lineColor,"stroke-width":s.lineWidth}),this.grid.lowerBorder.animate({d:i}))),this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:s.lineColor,"stroke-width":s.lineWidth}),this.grid.axisLineExtra.animate({d:r})):this.grid.axisLineExtra=this.grid.renderBorder(r),this.axisLine[this.showAxis?"show":"hide"]())),(e&&e.columns||[]).forEach(t=>t.render()),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){e=this.tickmarkOffset,s=this.tickPositions[this.tickPositions.length-1],r=this.tickPositions[0];let t,i;for(;(t=this.hiddenLabels.pop())&&t.element;)t.show();for(;(i=this.hiddenMarks.pop())&&i.element;)i.show();(t=this.ticks[r].label)&&(e<n-r?this.hiddenLabels.push(t.hide()):t.show()),(t=this.ticks[s].label)&&(e<s-h?this.hiddenLabels.push(t.hide()):t.show()),(n=this.ticks[s].mark)&&s-h<e&&0<s-h&&this.ticks[s].isLast&&this.hiddenMarks.push(n.hide())}}}function c(){const t=this.tickPositions&&this.tickPositions.info,i=this.options,e=this.userOptions.labels||{};(i.grid||{}).enabled&&(this.horiz?(this.series.forEach(t=>{t.options.pointRange=0}),t&&i.dateTimeLabelFormats&&i.labels&&!L(e.align)&&(!1===i.dateTimeLabelFormats[t.unitName].range||1<t.count)&&(i.labels.align="left",L(e.x)||(i.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function g(t){const i=this.options;t=t.userOptions;var e=i&&o.isObject(i.grid,!0)?i.grid:{};let h;!0===e.enabled&&(h=C(!0,{className:"highcharts-grid-axis "+(t.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},t),"xAxis"===this.coll&&(L(t.linkedTo)&&!L(t.tickPixelInterval)&&(h.tickPixelInterval=350),L(t.tickPixelInterval)||!L(t.linkedTo)||L(t.tickPositioner)||L(t.tickInterval)||(h.tickPositioner=function(e,s){var r=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(r){var o=h.units||[];let i;var n=1;let t="year";for(let t=0;t<o.length;t++){const s=o[t];if(s&&s[0]===r.unitName){i=t;break}}return(o=S(i)&&o[i+1])?(t=o[0]||"year",n=(n=o[1])&&n[0]||1):"year"===r.unitName&&(n=10*r.count),r=T[t],this.tickInterval=r*n,this.chart.time.getTimeTicks({unitRange:r,count:n,unitName:t},e,s,this.options.startOfWeek)}})),C(!0,this.options,h),this.horiz&&(i.minPadding=E(t.minPadding,0),i.maxPadding=E(t.maxPadding,0)),S(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=e.borderWidth))}function u(t){var i=(t=(t=t.userOptions)&&t.grid||{}).columns;t.enabled&&i&&C(!0,this.options,i[i.length-1])}function f(){(this.grid.columns||[]).forEach(t=>t.setScale())}function p(t){var i,{horiz:e,maxLabelDimensions:s,options:{grid:r={}}}=this;r.enabled&&s&&(i=2*this.options.labels.distance,i=e?r.cellHeight||i+s.height:i+s.width,M(t.tickSize)?t.tickSize[0]=i:t.tickSize=[i,0])}function m(){this.axes.forEach(t=>{(t.grid&&t.grid.columns||[]).forEach(t=>{t.setAxisSize(),t.setAxisTranslation()})})}function x(i){const t=this["grid"];(t.columns||[]).forEach(t=>t.destroy(i.keepEvents)),t.columns=void 0}function k(t){var i=(t=t.userOptions||{}).grid||{};i.enabled&&L(i.borderColor)&&(t.tickColor=t.lineColor=i.borderColor),this.grid||(this.grid=new e(this)),this.hiddenLabels=[],this.hiddenMarks=[]}function b(i){var e=this.label;const s=this.axis;var r=s.reversed,o=s.chart,n=s.options.grid||{},h=s.options.labels,a=h.align,l=z[s.side],d=i.tickmarkOffset,c=s.tickPositions,g=this.pos-d,c=S(c[i.index+1])?c[i.index+1]-d:(s.max||0)+d,d=(u=s.tickSize("tick"))?u[0]:0,u=u?u[1]/2:0;if(!0===n.enabled){let t;"top"===l?(n=s.top+s.offset,t=n-d):"bottom"===l?n=(t=o.chartHeight-s.bottom+s.offset)+d:(n=s.top+s.len-(s.translate(r?c:g)||0),t=s.top+s.len-(s.translate(r?g:c)||0)),"right"===l?r=(l=o.chartWidth-s.right+s.offset)+d:"left"===l?l=(r=s.left+s.offset)-d:(l=Math.round(s.left+(s.translate(r?c:g)||0))-u,r=Math.min(Math.round(s.left+(s.translate(r?g:c)||0))-u,s.left+s.len)),this.slotWidth=r-l,i.pos.x="left"===a?l:"right"===a?r:l+(r-l)/2,i.pos.y=t+(n-t)/2,e&&(o=o.renderer.fontMetrics(e),e=e.getBBox().height,i.pos.y=h.useHTML?i.pos.y+(o.b+-e/2):i.pos.y+((o.b-(o.h-o.f))/2+-((Math.round(e/o.h)-1)*o.h)/2)),i.pos.x+=s.horiz&&h.x||0}}function P(i){const{axis:e,value:s}=i;if(e.options.grid&&e.options.grid.enabled){var r=e.tickPositions;const n=(e.linkedParent||e).series[0],h=s===r[0];var r=s===r[r.length-1],o=n&&O(n.options.data,function(t){return t[e.isXAxis?"x":"y"]===s});let t;o&&n.is("gantt")&&(t=C(o),a.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(t)),i.isFirst=h,i.isLast=r,i.point=t}}function v(){const t=this.options,i=this.categories,e=this.tickPositions,s=e[0],r=e[e.length-1],o=this.linkedParent&&this.linkedParent.min||this.min,n=this.linkedParent&&this.linkedParent.max||this.max,h=this.tickInterval;!0!==(t.grid||{}).enabled||i||!this.horiz&&!this.isLinked||(s<o&&o<s+h&&!t.startOnTick&&(e[0]=o),n<r&&r-h<n&&!t.endOnTick&&(e[e.length-1]=n))}function y(t){var{options:{grid:i={}}}=this;return!0===i.enabled&&this.categories?this.tickInterval:t.apply(this,Array.prototype.slice.call(arguments,1))}const t=a["dateFormats"],{addEvent:w,defined:L,erase:B,find:O,isArray:M,isNumber:S,merge:C,pick:E,timeUnits:T,wrap:W}=o;var z,i;(i=z=z||{})[i.top=0]="top",i[i.right=1]="right",i[i.bottom=2]="bottom",i[i.left=3]="left";const A=[];class e{constructor(t){this.axis=t}isOuterAxis(){const e=this.axis,t=e.grid.columnIndex,i=e.linkedParent&&e.linkedParent.grid.columns||e.grid.columns,s=t?e.linkedParent:e;let r=-1,o=0;return(e.chart[e.coll]||[]).forEach((t,i)=>{t.side!==e.side||t.options.isInternal||(o=i,t===s&&(r=i))}),o===r&&(!S(t)||i.length===t)}renderBorder(t){const i=this.axis,e=i.chart.renderer,s=i.options;return t=e.path(t).addClass("highcharts-axis-line").add(i.axisBorder),e.styledMode||t.attr({stroke:s.lineColor,"stroke-width":s.lineWidth,zIndex:7}),t}}return t.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},t.W=function(t){const i=this,e=new this.Date(t);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(t){i.set(t,e,0)});var s=(this.get("Day",e)+6)%7;return t=new this.Date(e.valueOf()),this.set("Date",t,this.get("Date",e)-s+3),s=new this.Date(this.get("FullYear",t),0,1),4!==this.get("Day",s)&&(this.set("Month",e,0),this.set("Date",e,1+(11-this.get("Day",s))%7)),(1+Math.floor((t.valueOf()-s.valueOf())/6048e5)).toString()},{compose:function(t,i,e){return o.pushUnique(A,t)&&(t.keepProps.push("grid"),t.prototype.getMaxLabelDimensions=s,W(t.prototype,"unsquish",y),w(t,"init",k),w(t,"afterGetOffset",r),w(t,"afterGetTitlePosition",h),w(t,"afterInit",l),w(t,"afterRender",d),w(t,"afterSetAxisTranslation",c),w(t,"afterSetOptions",g),w(t,"afterSetOptions",u),w(t,"afterSetScale",f),w(t,"afterTickSize",p),w(t,"trimTicks",v),w(t,"destroy",x)),o.pushUnique(A,i)&&w(i,"afterSetChartSize",m),o.pushUnique(A,e)&&(w(e,"afterGetLabelPosition",b),w(e,"labelFormat",P)),t}}}),i(t,"masters/modules/grid-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/GridAxis.js"]],function(t,i){i.compose(t.Axis,t.Chart,t.Tick)})});
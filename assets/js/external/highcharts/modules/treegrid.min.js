!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";var e=o?o._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&o.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Core/Axis/BrokenAxis.js",[e["Core/Axis/Stacking/StackItem.js"],e["Core/Utilities.js"]],function(l,e){var t;let{addEvent:s,find:i,fireEvent:f,isArray:o,isNumber:u,pick:g}=e;{function r(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function n(){this.brokenAxis?.hasBreaks&&(this.options.ordinal=!1)}function a(){let s=this.brokenAxis;if(s?.hasBreaks){let t=this.tickPositions,e=this.tickPositions.info,i=[];for(let e=0;e<t.length;e++)s.isInAnyBreak(t[e])||i.push(t[e]);this.tickPositions=i,this.tickPositions.info=e}}function d(){this.brokenAxis||(this.brokenAxis=new m(this))}function h(){let{isDirty:e,options:{connectNulls:s},points:o,xAxis:r,yAxis:n}=this;if(e){let i=o.length;for(;i--;){let e=o[i],t=!(null===e.y&&!1===s)&&(r?.brokenAxis?.isInAnyBreak(e.x,!0)||n?.brokenAxis?.isInAnyBreak(e.y,!0));e.visible=!t&&!1!==e.options.visible}}}function c(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,g(this.pointArrayMap,["y"]))}function p(s,e){let o,r,n,a=this,l=a.points;if(s?.brokenAxis?.hasBreaks){let i=s.brokenAxis;e.forEach(function(e){o=i?.breakArray||[],r=s.isXAxis?s.min:g(a.options.threshold,s.min);let t=s?.options?.breaks?.filter(function(t){let i=!0;for(let e=0;e<o.length;e++){var s=o[e];if(s.from===t.from&&s.to===t.to){i=!1;break}}return i});l.forEach(function(i){n=g(i["stack"+e.toUpperCase()],i[e]),o.forEach(function(t){if(u(r)&&u(n)){let e="";r<t.from&&n>t.to||r>t.from&&n<t.from?e="pointBreak":(r<t.from&&n>t.from&&n<t.to||r>t.from&&n>t.to&&n<t.from)&&(e="pointInBreak"),e&&f(s,e,{point:i,brk:t})}}),t?.forEach(function(e){f(s,"pointOutsideOfBreak",{point:i,brk:e})})})})}}function k(){let e=this.currentDataGrouping,i=e?.gapSize,s=this.points.slice(),o=this.yAxis,r=this.options.gapSize,n=s.length-1;if(r&&0<n){let e,t;for("value"!==this.options.gapUnit&&(r*=this.basePointRange),i&&i>r&&i>=this.basePointRange&&(r=i);n--;){var a;t&&!1!==t.visible||(t=s[n+1]),e=s[n],!1!==t.visible&&!1!==e.visible&&(t.x-e.x>r&&(a=(e.x+t.x)/2,s.splice(n+1,0,{isNull:!0,x:a}),o.stacking&&this.options.stacking&&((o.stacking.stacks[this.stackKey][a]=new l(o,o.options.stackLabels,!1,a,this.stack)).total=0)),t=e)}}return this.getGraphPath(s)}(e=t=t||{}).compose=function(t,i){if(!t.keepProps.includes("brokenAxis")){t.keepProps.push("brokenAxis"),s(t,"init",d),s(t,"afterInit",r),s(t,"afterSetTickPositions",a),s(t,"afterSetOptions",n);let e=i.prototype;e.drawBreaks=p,e.gappedPath=k,s(i,"afterGeneratePoints",h),s(i,"afterRender",c)}return t};class m{static isInBreak(e,t){var i=e.repeat||1/0,s=e.from,o=e.to-e.from,s=s<=t?(t-s)%i:i-(s-t)%i;return e.inclusive?s<=o:s<o&&0!=s}static lin2Val(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i||!u(e))return e;let s=e,o,r;for(r=0;r<i.length&&!((o=i[r]).from>=s);r++)(o.to<s||m.isInBreak(o,s))&&(s+=o.len);return s}static val2Lin(e){var t=this.brokenAxis,i=t&&t.breakArray;if(!i||!u(e))return e;let s=e,o,r;for(r=0;r<i.length;r++)if((o=i[r]).to<=e)s-=o.len;else{if(o.from>=e)break;if(m.isInBreak(o,e)){s-=e-o.from;break}}return s}constructor(e){this.hasBreaks=!1,this.axis=e}findBreakAt(t,e){return i(e,function(e){return e.from<t&&t<e.to})}isInAnyBreak(e,t){let i=this.axis,s=i.options.breaks||[],o=s.length,r,n,a;if(o&&u(e)){for(;o--;)m.isInBreak(s[o],e)&&(r=!0,n=n||g(s[o].showPoints,!i.isXAxis));a=r&&t?r&&!n:r}return a}setBreaks(e,t){let c=this,p=c.axis,i=o(e)&&!!e.length&&!!Object.keys(e[0]).length;p.isDirty=c.hasBreaks!==i,c.hasBreaks=i,e!==p.options.breaks&&(p.options.breaks=p.userOptions.breaks=e),p.forceRedraw=!0,p.series.forEach(function(e){e.isDirty=!0}),i||p.val2lin!==m.val2Lin||(delete p.val2lin,delete p.lin2val),i&&(p.userOptions.ordinal=!1,p.lin2val=m.lin2Val,p.val2lin=m.val2Lin,p.setExtremes=function(t,i,e,s,o){if(c.hasBreaks){let e;for(var r=this.options.breaks||[];e=c.findBreakAt(t,r);)t=e.to;for(;e=c.findBreakAt(i,r);)i=e.from;i<t&&(i=t)}p.constructor.prototype.setExtremes.call(this,t,i,e,s,o)},p.setAxisTranslation=function(){if(p.constructor.prototype.setAxisTranslation.call(this),c.unitLength=void 0,c.hasBreaks){let e=p.options.breaks||[],t=[],i=[],s=g(p.pointRangePadding,0),o=0,r,n,a=p.userMin||p.min,l=p.userMax||p.max,d,h;e.forEach(function(e){n=e.repeat||1/0,u(a)&&u(l)&&(m.isInBreak(e,a)&&(a+=e.to%n-a%n),m.isInBreak(e,l)&&(l-=l%n-e.from%n))}),e.forEach(function(e){if(d=e.from,n=e.repeat||1/0,u(a)&&u(l)){for(;d-n>a;)d-=n;for(;d<a;)d+=n;for(h=d;h<l;h+=n)t.push({value:h,move:"in"}),t.push({value:h+e.to-e.from,move:"out",size:e.breakSize})}}),t.sort(function(e,t){return e.value===t.value?("in"===e.move?0:1)-("in"===t.move?0:1):e.value-t.value}),r=0,d=a,t.forEach(function(e){1===(r+="in"===e.move?1:-1)&&"in"===e.move&&(d=e.value),0===r&&u(d)&&(i.push({from:d,to:e.value,len:e.value-d-(e.size||0)}),o+=e.value-d-(e.size||0))}),c.breakArray=i,u(a)&&u(l)&&u(p.min)&&(c.unitLength=l-a-o+s,f(p,"afterBreaks"),p.staticScale?p.transA=p.staticScale:c.unitLength&&(p.transA*=(l-p.min+s)/c.unitLength),s&&(p.minPixelPadding=p.transA*(p.minPointOffset||0)),p.min=a,p.max=l)}}),g(t,!0)&&p.chart.redraw()}}e.Additions=m}return t}),t(e,"Core/Axis/GridAxis.js",[e["Core/Axis/Axis.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(a,d,t){var x;let e=d["dateFormats"],{addEvent:s,defined:o,erase:l,find:h,isArray:r,isNumber:b,merge:c,pick:m,timeUnits:p,wrap:n}=t;function f(e){return t.isObject(e,!0)}function u(r,e){let n={width:0,height:0};return e.forEach(function(e){let t=r[e],i,s=0,o;f(t)&&(i=(o=f(t.label)?t.label:{}).getBBox?o.getBBox().height:0,o.textStr&&!b(o.textPxLength)&&(o.textPxLength=o.getBBox().width),s=b(o.textPxLength)?Math.round(o.textPxLength):0,o.textStr&&(s=Math.round(o.getBBox().width)),n.height=Math.max(i,n.height),n.width=Math.max(s,n.width))}),"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(e=this.treeGrid.mapOfPosToGridNode[-1].height||0,n.width+=this.options.labels.indentation*(e-1)),n}function g(e){var t=this["grid"],i=3===this.side;if(i||e.apply(this),!t?.isColumn){let e=t?.columns||[];(e=i?e.slice().reverse():e).forEach(e=>{e.getOffset()})}i&&e.apply(this)}function k(k){if(!0===(this.options.grid||{}).enabled){let{axisTitle:e,height:t,horiz:i,left:s,offset:o,opposite:r,options:n,top:a,width:l}=this,d=this.tickSize(),h=e&&e.getBBox().width,c=n.title.x,p=n.title.y,f=m(n.title.margin,i?5:10),u=e?this.chart.renderer.fontMetrics(e).f:0,g=(i?a+t:s)+(i?1:-1)*(r?-1:1)*(d?d[0]/2:0)+(this.side===x.bottom?u:0);k.titlePosition.x=i?s-(h||0)/2-f+c:g+(r?l:0)+o+c,k.titlePosition.y=i?g-(r?t:0)+(r?u:-u)/2+o+p:a-f+p}}function v(){var{chart:o,options:{grid:r={}},userOptions:n}=this;if(r.enabled){var t=this;let e=t.options;e.labels.align=m(e.labels.align,"center"),t.categories||(e.showLastLabel=!1),t.labelRotation=0,e.labels.rotation=0,e.minTickInterval=1}if(r.columns){let i=this.grid.columns=[],s=this.grid.columnIndex=0;for(;++s<r.columns.length;){let e=c(n,r.columns[s],{isInternal:!0,linkedTo:0,scrollbar:{enabled:!1}},{grid:{columns:void 0}}),t=new a(this.chart,e,"yAxis");t.grid.isColumn=!0,t.grid.columnIndex=s,l(o.axes,t),l(o[this.coll]||[],t),i.push(t)}}}function y(){let{axisTitle:e,grid:t,options:o}=this;if(!0===(o.grid||{}).enabled){var r=this.min||0,n=this.max||0,a=this.ticks[this.tickPositions[0]];if(e&&!this.chart.styledMode&&a?.slotWidth&&!this.options.title.style.width&&e.css({width:a.slotWidth+"px"}),this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,this.tickPositions),this.rightWall&&this.rightWall.destroy(),this.grid&&this.grid.isOuterAxis()&&this.axisLine){var a=o.lineWidth;if(a){let e=this.getLinePath(a),t=e[0],i=e[1],s=(this.tickSize("tick")||[1])[0]*(this.side===x.top||this.side===x.left?-1:1);"M"===t[0]&&"L"===i[0]&&(this.horiz?(t[2]+=s,i[2]+=s):(t[1]+=s,i[1]+=s)),!this.horiz&&this.chart.marginRight&&(a=["L",this.left,t[2]||0],a=[t,a],l=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(n+this.tickmarkOffset)],l=[["M",i[1]||0,this.toPixels(n+this.tickmarkOffset)],l],this.grid.upperBorder||r%1==0||(this.grid.upperBorder=this.grid.renderBorder(a)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:o.lineColor,"stroke-width":o.lineWidth}),this.grid.upperBorder.animate({d:a})),this.grid.lowerBorder||n%1==0||(this.grid.lowerBorder=this.grid.renderBorder(l)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:o.lineColor,"stroke-width":o.lineWidth}),this.grid.lowerBorder.animate({d:l}))),this.grid.axisLineExtra?(this.grid.axisLineExtra.attr({stroke:o.lineColor,"stroke-width":o.lineWidth}),this.grid.axisLineExtra.animate({d:e})):this.grid.axisLineExtra=this.grid.renderBorder(e),this.axisLine[this.showAxis?"show":"hide"]()}}if((t&&t.columns||[]).forEach(e=>e.render()),!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)&&this.tickPositions.length){let e,t;for(var a=this.tickmarkOffset,l=this.tickPositions[this.tickPositions.length-1],s=this.tickPositions[0];(e=this.hiddenLabels.pop())&&e.element;)e.show();for(;(t=this.hiddenMarks.pop())&&t.element;)t.show();(e=this.ticks[s].label)&&(a<r-s?this.hiddenLabels.push(e.hide()):e.show()),(e=this.ticks[l].label)&&(a<l-n?this.hiddenLabels.push(e.hide()):e.show());let i=this.ticks[l].mark;i&&l-n<a&&0<l-n&&this.ticks[l].isLast&&this.hiddenMarks.push(i.hide())}}}function G(){let e=this.tickPositions&&this.tickPositions.info,t=this.options,i=t.grid||{},s=this.userOptions.labels||{};i.enabled&&(this.horiz?(this.series.forEach(e=>{e.options.pointRange=0}),e&&t.dateTimeLabelFormats&&t.labels&&!o(s.align)&&(!1===t.dateTimeLabelFormats[e.unitName].range||1<e.count)&&(t.labels.align="left",o(s.x)||(t.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function P(e){let d,t=this.options,i=e.userOptions,s=t&&f(t.grid)?t.grid:{};!0===s.enabled&&(d=c(!0,{className:"highcharts-grid-axis "+(i.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0,style:{textOverflow:"ellipsis"}},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},i),"xAxis"===this.coll&&(o(i.linkedTo)&&!o(i.tickPixelInterval)&&(d.tickPixelInterval=350),o(i.tickPixelInterval)||!o(i.linkedTo)||o(i.tickPositioner)||o(i.tickInterval)||o(i.units)||(d.tickPositioner=function(o,r){var n=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(n){let t=d.units||[],i,e=1,s="year";for(let e=0;e<t.length;e++){var a=t[e];if(a&&a[0]===n.unitName){i=e;break}}var l=b(i)&&t[i+1],l=(l?(s=l[0]||"year",l=l[1],e=l&&l[0]||1):"year"===n.unitName&&(e=10*n.count),p[s]);return this.tickInterval=l*e,this.chart.time.getTimeTicks({unitRange:l,count:e,unitName:s},o,r,this.options.startOfWeek)}})),c(!0,this.options,d),this.horiz&&(t.minPadding=m(i.minPadding,0),t.maxPadding=m(i.maxPadding,0)),b(t.grid.borderWidth)&&(t.tickWidth=t.lineWidth=s.borderWidth))}function A(e){var e=e.userOptions,e=e&&e.grid||{},t=e.columns;e.enabled&&t&&c(!0,this.options,t[0])}function T(){(this.grid.columns||[]).forEach(e=>e.setScale())}function C(e){var t,{horiz:i,maxLabelDimensions:s,options:{grid:o={}}}=this;o.enabled&&s&&(t=2*this.options.labels.distance,i=i?o.cellHeight||t+s.height:t+s.width,r(e.tickSize)?e.tickSize[0]=i:e.tickSize=[i,0])}function O(){this.axes.forEach(e=>{(e.grid&&e.grid.columns||[]).forEach(e=>{e.setAxisSize(),e.setAxisTranslation()})})}function B(t){let e=this["grid"];(e.columns||[]).forEach(e=>e.destroy(t.keepEvents)),e.columns=void 0}function I(e){let t=e.userOptions||{},i=t.grid||{};i.enabled&&o(i.borderColor)&&(t.tickColor=t.lineColor=i.borderColor),this.grid||(this.grid=new S(this)),this.hiddenLabels=[],this.hiddenMarks=[]}function N(o){let r=this.label,n=this.axis,a=n.reversed,l=n.chart,e=n.options.grid||{},d=n.options.labels,h=d.align,c=x[n.side],t=o.tickmarkOffset,i=n.tickPositions,p=this.pos-t,f=b(i[o.index+1])?i[o.index+1]-t:(n.max||0)+t,s=n.tickSize("tick"),u=s?s[0]:0,g=s?s[1]/2:0;if(!0===e.enabled){let e,t,i,s;var k,m;"top"===c?t=(e=n.top+n.offset)-u:"bottom"===c?e=(t=l.chartHeight-n.bottom+n.offset)+u:(e=n.top+n.len-(n.translate(a?f:p)||0),t=n.top+n.len-(n.translate(a?p:f)||0)),"right"===c?s=(i=l.chartWidth-n.right+n.offset)+u:"left"===c?i=(s=n.left+n.offset)-u:(i=Math.round(n.left+(n.translate(a?f:p)||0))-g,s=Math.min(Math.round(n.left+(n.translate(a?p:f)||0))-g,n.left+n.len)),this.slotWidth=s-i,o.pos.x="left"===h?i:"right"===h?s:i+(s-i)/2,o.pos.y=t+(e-t)/2,r&&(k=l.renderer.fontMetrics(r),m=r.getBBox().height,d.useHTML?o.pos.y+=k.b+-m/2:(m=Math.round(m/k.h),o.pos.y+=(k.b-(k.h-k.f))/2+-((m-1)*k.h)/2)),o.pos.x+=n.horiz&&d.x||0}}function E(n){let{axis:a,value:l}=n;if(a.options.grid&&a.options.grid.enabled){let e,t=a.tickPositions,i=(a.linkedParent||a).series[0],s=l===t[0],o=l===t[t.length-1],r=i&&h(i.options.data,function(e){return e[a.isXAxis?"x":"y"]===l});r&&i.is("gantt")&&(e=c(r),d.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(e)),n.isFirst=s,n.isLast=o,n.point=e}}function w(){let e=this.options,t=e.grid||{},i=this.categories,s=this.tickPositions,o=s[0],r=s[1],n=s[s.length-1],a=s[s.length-2],l=this.linkedParent&&this.linkedParent.min,d=this.linkedParent&&this.linkedParent.max,h=l||this.min,c=d||this.max,p=this.tickInterval,f=b(h)&&o+p<=h&&h<r,u=b(h)&&o<h&&h<o+p,g=b(c)&&c<n&&n-p<c,k=b(c)&&c<=n-p&&a<c;!0!==t.enabled||i||!this.isXAxis&&!this.isLinked||(!u&&!f||e.startOnTick||(s[0]=h),!g&&!k||e.endOnTick||(s[s.length-1]=c))}function L(e){var{options:{grid:t={}}}=this;return!0===t.enabled&&this.categories?this.tickInterval:e.apply(this,Array.prototype.slice.call(arguments,1))}x={top:0,0:"top",right:1,1:"right",bottom:2,2:"bottom",left:3,3:"left"};class S{constructor(e){this.axis=e}isOuterAxis(){let i=this.axis,e=i.chart,t=i.grid.columnIndex,s=i.linkedParent?.grid.columns||i.grid.columns||[],o=t?i.linkedParent:i,r=-1,n=0;return 3===i.side&&!e.inverted&&s.length?!i.linkedParent:((e[i.coll]||[]).forEach((e,t)=>{e.side!==i.side||e.options.isInternal||(n=t,e===o&&(r=t))}),n===r&&(!b(t)||s.length===t))}renderBorder(e){let t=this.axis,i=t.chart.renderer,s=t.options,o=i.path(e).addClass("highcharts-axis-line").add(t.axisGroup);return i.styledMode||o.attr({stroke:s.lineColor,"stroke-width":s.lineWidth,zIndex:7}),o}}return e.E=function(e){return this.dateFormat("%a",e,!0).charAt(0)},e.W=function(e){let t=this,i=new this.Date(e),s=(["Hours","Milliseconds","Minutes","Seconds"].forEach(function(e){t.set(e,i,0)}),(this.get("Day",i)+6)%7),o=new this.Date(i.valueOf()),r=(this.set("Date",o,this.get("Date",i)-s+3),new this.Date(this.get("FullYear",o),0,1));return 4!==this.get("Day",r)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",r))%7)),(1+Math.floor((o.valueOf()-r.valueOf())/6048e5)).toString()},{compose:function(e,t,i){return e.keepProps.includes("grid")||(e.keepProps.push("grid"),e.prototype.getMaxLabelDimensions=u,n(e.prototype,"unsquish",L),n(e.prototype,"getOffset",g),s(e,"init",I),s(e,"afterGetTitlePosition",k),s(e,"afterInit",v),s(e,"afterRender",y),s(e,"afterSetAxisTranslation",G),s(e,"afterSetOptions",P),s(e,"afterSetOptions",A),s(e,"afterSetScale",T),s(e,"afterTickSize",C),s(e,"trimTicks",w),s(e,"destroy",B),s(t,"afterSetChartSize",O),s(i,"afterGetLabelPosition",N),s(i,"labelFormat",E)),e}}}),t(e,"Gantt/Tree.js",[e["Core/Utilities.js"]],function(e){let{extend:f,isNumber:u,pick:g}=e;function k(s,e,o,t,r,n){let i=n&&n.after,a=n&&n.before,l={data:t,depth:o-1,id:s,level:o,parent:e||""},d=0,h=0,c,p;"function"==typeof a&&a(l,n);e=(r[s]||[]).map(e=>{var t=k(e.id,s,o+1,e,r,n),i=e.start||NaN,e=!0===e.milestone?i:e.end||NaN;return c=!u(c)||i<c?i:c,p=!u(p)||e>p?e:p,d=d+1+t.descendants,h=Math.max(t.height+1,h),t});return t&&(t.start=g(t.start,c),t.end=g(t.end,p)),f(l,{children:e,descendants:d,height:h}),"function"==typeof i&&i(l,n),l}return{getNode:k,getTree:function(e,t){return k("",null,1,null,function(){let o=[],i=e.reduce((e,t)=>{var{parent:i="",id:s}=t;return void 0===e[i]&&(e[i]=[]),e[i].push(t),s&&o.push(s),e},{});return Object.keys(i).forEach(e=>{var t;""!==e&&-1===o.indexOf(e)&&(t=i[e].map(function(e){let{...t}=e;return t}),i[""].push(...t),delete i[e])}),i}(),t)}}}),t(e,"Core/Axis/TreeGrid/TreeGridTick.js",[e["Core/Utilities.js"]],function(e){let{addEvent:C,removeEvent:O,isObject:B,isNumber:I,pick:N,wrap:i}=e;function s(){this.treeGrid||(this.treeGrid=new t(this))}function o(e,t,i,s,o,r,n,a,l){let d=N(this.options&&this.options.labels,r),h=this.pos,c=this.axis,p="treegrid"===c.options.type,f=e.apply(this,[t,i,s,o,d,n,a,l]);return p&&({width:r=0,padding:e=c.linkedParent?0:5}=d&&B(d.symbol,!0)?d.symbol:{},t=d&&I(d.indentation)?d.indentation:0,o=(s=(i=c.treeGrid.mapOfPosToGridNode)&&i[h])&&s.depth||1,f.x+=r+2*e+(o-1)*t),f}function r(p){let{pos:e,axis:t,label:f,treeGrid:i,options:s}=this,o=i?.labelIcon,r=f?.element,{treeGrid:n,options:a,chart:l,tickPositions:d}=t,h=n.mapOfPosToGridNode,c=N(s?.labels,a?.labels),u=c&&B(c.symbol,!0)?c.symbol:{},g=h&&h[e],{descendants:k,depth:m}=g||{},x=g&&k&&0<k,b="treegrid"===a.type&&r,v=-1<d.indexOf(e),y="highcharts-treegrid-node-",G=y+"level-",P=l.styledMode;if(b&&g&&f.removeClass(RegExp(G+".*")).addClass(G+m),p.apply(this,Array.prototype.slice.call(arguments,1)),b&&x){p=n.isCollapsed(g);{var A=this,T={color:!P&&f.styles.color||"",collapsed:p,group:f.parentGroup,options:u,renderer:f.renderer,show:v,xy:f.xy};let e=A.treeGrid,t=!e.labelIcon,i=T.renderer,s=T.xy,o=T.options,r=o.width||0,n=o.height||0,a=o.padding??A.axis.linkedParent?0:5,l={x:s.x-r/2-a,y:s.y-n/2},d=T.collapsed?90:180,h=T.show&&I(l.y),c=e.labelIcon;c||(e.labelIcon=c=i.path(i.symbols[o.type](o.x||0,o.y||0,r,n)).addClass("highcharts-label-icon").add(T.group)),c[h?"show":"hide"](),i.styledMode||c.attr({cursor:"pointer",fill:N(T.color,"#666666"),"stroke-width":1,stroke:o.lineColor,strokeWidth:o.lineWidth||0}),c[t?"attr":"animate"]({translateX:l.x,translateY:l.y,rotation:d})}A=y+(p?"expanded":"collapsed"),f.addClass(y+(p?"collapsed":"expanded")).removeClass(A),P||f.css({cursor:"pointer"}),[f,o].forEach(e=>{e&&!e.attachedTreeGridEvents&&(C(e.element,"mouseover",function(){f.addClass("highcharts-treegrid-node-active"),f.renderer.styledMode||f.css({textDecoration:"underline"})}),C(e.element,"mouseout",function(){var e=f,t=c;t=B(t.style)?t.style:{},e.removeClass("highcharts-treegrid-node-active"),e.renderer.styledMode||e.css({textDecoration:t.textDecoration||"none"})}),C(e.element,"click",function(){i.toggleCollapse()}),e.attachedTreeGridEvents=!0)})}else o&&(O(r),f?.css({cursor:"default"}),o.destroy())}class t{static compose(e){let t=e.prototype;t.toggleCollapse||(C(e,"init",s),i(t,"getLabelPosition",o),i(t,"renderLabel",r),t.collapse=function(e){this.treeGrid.collapse(e)},t.expand=function(e){this.treeGrid.expand(e)},t.toggleCollapse=function(e){this.treeGrid.toggleCollapse(e)})}constructor(e){this.tick=e}collapse(e){let t=this.tick,i=t.axis,s=i.brokenAxis;var o;s&&i.treeGrid.mapOfPosToGridNode&&(o=t.pos,o=i.treeGrid.mapOfPosToGridNode[o],o=i.treeGrid.collapse(o),s.setBreaks(o,N(e,!0)))}destroy(){this.labelIcon&&this.labelIcon.destroy()}expand(e){let{pos:t,axis:i}=this.tick,{treeGrid:s,brokenAxis:o}=i,r=s.mapOfPosToGridNode;var n;o&&r&&(n=r[t],n=s.expand(n),o.setBreaks(n,N(e,!0)))}toggleCollapse(e){let t=this.tick,i=t.axis,s=i.brokenAxis;var o;s&&i.treeGrid.mapOfPosToGridNode&&(o=t.pos,o=i.treeGrid.mapOfPosToGridNode[o],o=i.treeGrid.toggleCollapse(o),s.setBreaks(o,N(e,!0)))}}return class{static compose(e){let t=e.prototype;t.toggleCollapse||(C(e,"init",s),i(t,"getLabelPosition",o),i(t,"renderLabel",r),t.collapse=function(e){this.treeGrid.collapse(e)},t.expand=function(e){this.treeGrid.expand(e)},t.toggleCollapse=function(e){this.treeGrid.toggleCollapse(e)})}constructor(e){this.tick=e}collapse(e){let t=this.tick,i=t.axis,s=i.brokenAxis;var o;s&&i.treeGrid.mapOfPosToGridNode&&(o=t.pos,o=i.treeGrid.mapOfPosToGridNode[o],o=i.treeGrid.collapse(o),s.setBreaks(o,N(e,!0)))}destroy(){this.labelIcon&&this.labelIcon.destroy()}expand(e){let{pos:t,axis:i}=this.tick,{treeGrid:s,brokenAxis:o}=i,r=s.mapOfPosToGridNode;var n;o&&r&&(n=r[t],n=s.expand(n),o.setBreaks(n,N(e,!0)))}toggleCollapse(e){let t=this.tick,i=t.axis,s=i.brokenAxis;var o;s&&i.treeGrid.mapOfPosToGridNode&&(o=t.pos,o=i.treeGrid.mapOfPosToGridNode[o],o=i.treeGrid.toggleCollapse(o),s.setBreaks(o,N(e,!0)))}}}),t(e,"Series/TreeUtilities.js",[e["Core/Color/Color.js"],e["Core/Utilities.js"]],function(x,e){let{extend:p,isArray:l,isNumber:d,isObject:h,merge:c,pick:b,relativeLength:o}=e;return{getColor:function(e,t){let i,s,o,r,n,a,l=t.index,d=t.mapOptionsToLevel,h=t.parentColor,c=t.parentColorIndex,p=t.series,f=t.colors,u=t.siblings,g=p.points,k=p.chart.options.chart;return e&&(i=g[e.i],s=d[e.level]||{},i&&s.colorByPoint&&(r=i.index%(f?f.length:k.colorCount),o=f&&f[r]),p.chart.styledMode||(n=b(i&&i.options.color,s&&s.color,o,h&&(e=h,(m=s&&s.colorVariation)&&"brightness"===m.key&&l&&u?x.parse(e).brighten(m.to*(l/u)).get():e),p.color)),a=b(i&&i.options.colorIndex,s&&s.colorIndex,r,c,t.colorIndex)),{color:n,colorIndex:a};var m},getLevelOptions:function(e){let r,t,i,n,s,o,a={};if(h(e))for(n=d(e.from)?e.from:1,o=e.levels,t={},r=h(e.defaults)?e.defaults:{},l(o)&&(t=o.reduce((e,t)=>{let i,s,o;return h(t)&&d(t.level)&&(s=b((o=c({},t)).levelIsConstant,r.levelIsConstant),delete o.levelIsConstant,delete o.level,h(e[i=t.level+(s?0:n-1)])?c(!0,e[i],o):e[i]=o),e},{})),s=d(e.to)?e.to:1,i=0;i<=s;i++)a[i]=c({},r,h(t[i])?t[i]:{});return a},getNodeWidth:function(e,t){var{chart:e,options:i}=e,{nodeDistance:i=0,nodeWidth:s=0}=i,{plotSizeX:e=1}=e;if("auto"!==s)return o(s,e);if("string"==typeof i&&/%$/.test(i))return e/(t+parseFloat(i)/100*(t-1));s=Number(i);return(e+s)/(t||1)-s},setTreeValues:function s(o,r){let e=r.before,t=r.idRoot,i=r.mapIdToNode[t],n=!1!==r.levelIsConstant,a=r.points[o.i],l=a&&a.options||{},d=[],h=0;o.levelDynamic=o.level-(n?0:i.level),o.name=b(a&&a.name,""),o.visible=t===o.id||!0===r.visible,(o="function"==typeof e?e(o,r):o).children.forEach((e,t)=>{var i=p({},r);p(i,{index:t,siblings:o.children.length,visible:o.visible}),e=s(e,i),d.push(e),e.visible&&(h+=e.val)});var c=b(l.value,h);return o.visible=0<=c&&(0<h||o.visible),o.children=d,o.childrenTotal=h,o.isLeaf=o.visible&&!h,o.val=c,o},updateRootId:function(e){let t,i;return h(e)&&(i=h(e.options)?e.options:{},t=b(e.rootNode,i.rootId,""),h(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}),t(e,"Core/Axis/TreeGrid/TreeGridAxis.js",[e["Core/Axis/BrokenAxis.js"],e["Core/Axis/GridAxis.js"],e["Gantt/Tree.js"],e["Core/Axis/TreeGrid/TreeGridTick.js"],e["Series/TreeUtilities.js"],e["Core/Utilities.js"]],function(o,r,n,a,e,t){let d,h=e["getLevelOptions"],{addEvent:l,find:p,fireEvent:c,isArray:f,isObject:u,isString:g,merge:k,pick:m,removeEvent:s,wrap:x}=t;function b(e,t){let i=e.collapseEnd||0,s=e.collapseStart||0;return t<=i&&(s-=.5),{from:s,to:i,showPoints:!1}}function v(e,t,i){let a=[],o=[],l={},d="boolean"==typeof t&&t,h={},c=-1,s=n.getTree(e,{after:function(e){let t=h[e.pos],i=0,s=0;t.children.forEach(function(e){s+=(e.descendants||0)+1,i=Math.max((e.height||0)+1,i)}),t.descendants=s,t.height=i,t.collapsed&&o.push(t)},before:function(e){let t,i,s=u(e.data,!0)?e.data:{},o=g(s.name)?s.name:"",r=l[e.parent],n=u(r,!0)?h[r.pos]:null;d&&u(n,!0)&&(t=p(n.children,function(e){return e.name===o}))?(i=t.pos,t.nodes.push(e)):i=c++,h[i]||(h[i]=t={depth:n?n.depth+1:0,name:o,id:s.id,nodes:[e],children:[],pos:i},-1!==i&&a.push(o),u(n,!0)&&n.children.push(t)),g(e.id)&&(l[e.id]=e),t&&!0===s.collapsed&&(t.collapsed=!0),e.pos=i}});return{categories:a,mapOfIdToNode:l,mapOfPosToGridNode:h=function(e,a){let l=function(e,i,t){let s=e.nodes,o=i+(-1===i?0:a-1),r=(o-i)/2,n=i+r;return s.forEach(function(e){let t=e.data;u(t,!0)&&(t.y=i+(t.seriesIndex||0),delete t.seriesIndex),e.pos=n}),(t[n]=e).pos=n,e.tickmarkOffset=.5+r,e.collapseStart=o+.5,e.children.forEach(function(e){l(e,o+1,t),o=(e.collapseEnd||0)-.5}),e.collapseEnd=o+.5,t};return l(e[-1],-1,{})}(h,i),collapsedNodes:o,tree:s}}function y(d){d.target.axes.filter(function(e){return"treegrid"===e.options.type}).forEach(function(e){let t=e.options||{},i=t.labels,s=t.uniqueNames,o=t.max,r=!e.treeGrid.mapOfPosToGridNode||e.series.some(function(e){return!e.hasRendered||e.isDirtyData||e.isDirty}),n=0,a,l;if(r){if(a=e.series.reduce(function(t,i){return i.visible&&((i.options.data||[]).forEach(function(e){i.options.keys&&i.options.keys.length&&(e=i.pointClass.prototype.optionsToObject.call({series:i},e),i.pointClass.setGanttPointAliases(e)),u(e,!0)&&(e.seriesIndex=n,t.push(e))}),!0===s&&n++),t},[]),o&&a.length<o)for(let e=a.length;e<=o;e++)a.push({name:e+"​"});l=v(a,s||!1,!0===s?n:1),e.categories=l.categories,e.treeGrid.mapOfPosToGridNode=l.mapOfPosToGridNode,e.hasNames=!0,e.treeGrid.tree=l.tree,e.series.forEach(function(e){var t=(e.options.data||[]).map(function(t){return f(t)&&e.options.keys&&e.options.keys.length&&a.forEach(function(e){0<=t.indexOf(e.x)&&0<=t.indexOf(e.x2)&&(t=e)}),u(t,!0)?k(t):t});e.visible&&e.setData(t,!1)}),e.treeGrid.mapOptionsToLevel=h({defaults:i,from:1,levels:i&&i.levels,to:e.treeGrid.tree&&e.treeGrid.tree.height}),"beforeRender"===d.type&&(e.treeGrid.collapsedNodes=l.collapsedNodes)}})}function G(e,t){let i=this.treeGrid.mapOptionsToLevel||{},s="treegrid"===this.options.type,o=this.ticks,r=o[t],n,a,l;s&&this.treeGrid.mapOfPosToGridNode?((n=i[(l=this.treeGrid.mapOfPosToGridNode[t]).depth])&&(a={labels:n}),!r&&d?o[t]=r=new d(this,t,void 0,void 0,{category:l.name,tickmarkOffset:l.tickmarkOffset,options:a}):(r.parameters.category=l.name,r.options=a,r.addLabel())):e.apply(this,Array.prototype.slice.call(arguments,1))}function P(e,t,i,s){let o=this,r="treegrid"===i.type;o.treeGrid||(o.treeGrid=new C(o)),r&&(l(t,"beforeRender",y),l(t,"beforeRedraw",y),l(t,"addSeries",function(e){e.options.data&&(e=v(e.options.data,i.uniqueNames||!1,1),o.treeGrid.collapsedNodes=(o.treeGrid.collapsedNodes||[]).concat(e.collapsedNodes))}),l(o,"foundExtremes",function(){o.treeGrid.collapsedNodes&&o.treeGrid.collapsedNodes.forEach(function(t){var e=o.treeGrid.collapse(t);o.brokenAxis&&(o.brokenAxis.setBreaks(e,!1),o.treeGrid.collapsedNodes&&(o.treeGrid.collapsedNodes=o.treeGrid.collapsedNodes.filter(e=>t.collapseStart!==e.collapseStart||t.collapseEnd!==e.collapseEnd)))})}),l(o,"afterBreaks",function(){"yAxis"===o.coll&&!o.staticScale&&o.chart.options.chart.height&&(o.isDirty=!0)}),i=k({grid:{enabled:!0},labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10}},uniqueNames:!1},i,{reversed:!0})),e.apply(o,[t,i,s]),r&&(o.hasNames=!0,o.options.showLastLabel=!0)}function A(e){let t=this.options,i="number"==typeof t.linkedTo?this.chart[this.coll]?.[t.linkedTo]:void 0;var s;"treegrid"===t.type?(this.min=m(this.userMin,t.min,this.dataMin),this.max=m(this.userMax,t.max,this.dataMax),c(this,"foundExtremes"),this.setAxisTranslation(),this.tickInterval=1,this.tickmarkOffset=.5,this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[],i&&(s=i.getExtremes(),this.min=m(s.min,s.dataMin),this.max=m(s.max,s.dataMax),this.tickPositions=i.tickPositions),this.linkedParent=i):e.apply(this,Array.prototype.slice.call(arguments,1))}function T(e){let i=this;"treegrid"===i.options.type&&i.visible&&i.tickPositions.forEach(function(e){let t=i.ticks[e];t.label&&t.label.attachedTreeGridEvents&&(s(t.label.element),t.label.attachedTreeGridEvents=!1)}),e.apply(i,Array.prototype.slice.call(arguments,1))}class C{static compose(t,e,i,s){if(!t.keepProps.includes("treeGrid")){let e=t.prototype;t.keepProps.push("treeGrid"),x(e,"generateTick",G),x(e,"init",P),x(e,"setTickInterval",A),x(e,"redraw",T),e.utils={getNode:n.getNode},d=d||s}return r.compose(t,e,s),o.compose(t,i),a.compose(s),t}constructor(e){this.axis=e}setCollapsedStatus(o){let e=this.axis,r=e.chart;e.series.forEach(function(i){var s=i.options.data;if(o.id&&s){let e=r.get(o.id),t=s[i.data.indexOf(e)];e&&t&&(e.collapsed=o.collapsed,t.collapsed=o.collapsed)}})}collapse(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return i.push(s),e.collapsed=!0,t.treeGrid.setCollapsedStatus(e),i}expand(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return e.collapsed=!1,t.treeGrid.setCollapsedStatus(e),i.reduce(function(e,t){return t.to===s.to&&t.from===s.from||e.push(t),e},[])}getTickPositions(){let i=this.axis,s=Math.floor(i.min/i.tickInterval)*i.tickInterval,o=Math.ceil(i.max/i.tickInterval)*i.tickInterval;return Object.keys(i.treeGrid.mapOfPosToGridNode||{}).reduce(function(e,t){t=+t;return!(t>=s&&t<=o)||i.brokenAxis&&i.brokenAxis.isInAnyBreak(t)||e.push(t),e},[])}isCollapsed(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return i.some(function(e){return e.from===s.from&&e.to===s.to})}toggleCollapse(e){return this.isCollapsed(e)?this.expand(e):this.collapse(e)}}return class{static compose(t,e,i,s){if(!t.keepProps.includes("treeGrid")){let e=t.prototype;t.keepProps.push("treeGrid"),x(e,"generateTick",G),x(e,"init",P),x(e,"setTickInterval",A),x(e,"redraw",T),e.utils={getNode:n.getNode},d=d||s}return r.compose(t,e,s),o.compose(t,i),a.compose(s),t}constructor(e){this.axis=e}setCollapsedStatus(o){let e=this.axis,r=e.chart;e.series.forEach(function(i){var s=i.options.data;if(o.id&&s){let e=r.get(o.id),t=s[i.data.indexOf(e)];e&&t&&(e.collapsed=o.collapsed,t.collapsed=o.collapsed)}})}collapse(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return i.push(s),e.collapsed=!0,t.treeGrid.setCollapsedStatus(e),i}expand(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return e.collapsed=!1,t.treeGrid.setCollapsedStatus(e),i.reduce(function(e,t){return t.to===s.to&&t.from===s.from||e.push(t),e},[])}getTickPositions(){let i=this.axis,s=Math.floor(i.min/i.tickInterval)*i.tickInterval,o=Math.ceil(i.max/i.tickInterval)*i.tickInterval;return Object.keys(i.treeGrid.mapOfPosToGridNode||{}).reduce(function(e,t){return!((t=+t)>=s&&t<=o)||i.brokenAxis&&i.brokenAxis.isInAnyBreak(t)||e.push(t),e},[])}isCollapsed(e){let t=this.axis,i=t.options.breaks||[],s=b(e,t.max);return i.some(function(e){return e.from===s.from&&e.to===s.to})}toggleCollapse(e){return this.isCollapsed(e)?this.expand(e):this.collapse(e)}}}),t(e,"masters/modules/treegrid.src.js",[e["Core/Globals.js"],e["Core/Axis/TreeGrid/TreeGridAxis.js"]],function(e,t){return t.compose(e.Axis,e.Chart,e.Series,e.Tick),e})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pictorial",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(a){"use strict";var t=a?a._modules:{};function e(t,e,i,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,i),"function"==typeof CustomEvent&&a.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e,c){let f=t["animObject"],s=e["getOptions"],{addEvent:o,defined:a,erase:n,extend:h,merge:l,pick:g,removeEvent:u,wrap:d}=c,p=function(){let t=[],e=s().colors,i=0;for(var r of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:r,color:e[i++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});for(var a of(i=5,["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"]))t.push({path:a,color:e[i],width:10,height:10}),i+=5;return t}();function m(t,e){let i=JSON.stringify(t),r=i.length||0,a=0,s=0,o;if(e){o=Math.max(Math.floor(r/500),1);for(let t=0;t<r;t+=o)a+=i.charCodeAt(t);a&=a}for(;s<r;++s)a=(a<<5)-a+i.charCodeAt(s),a&=a;return a.toString(16).replace("-","1")}function x(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(var t of this.series)if(t.visible)for(var e of t.points){let t=e.options&&e.options.color;t&&t.pattern&&(t.pattern._width="defer",t.pattern._height="defer")}this.redraw(!1)}}function w(){let i={},r=this.renderer,t=(r.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length)for(var e of([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{let e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(i[e.replace(r.url,"").replace("url(#","").replace(")","")]=!0)}),t))i[e]||(n(r.defIds,e),r.patternElements[e]&&(r.patternElements[e].destroy(),delete r.patternElements[e]))}function y(){let t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=l(this.series.options.color,t))}function C(t){let e=t.args[0],i=t.args[1],r=t.args[2],a=this.chartIndex||0,s=e.pattern,o="#333333";if(!(s=void 0!==e.patternIndex&&p?p[e.patternIndex]:s))return!0;if(s.image||"string"==typeof s.path||s.path&&s.path.d){let t=r.parentNode&&r.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==s._width&&"defer"!==s._height||b.call({graphic:{element:r}},s),!t&&s.id||((s=l({},s)).id="highcharts-pattern-"+a+"-"+m(s)+m(s,!0)),this.addPattern(s,!this.forExport&&g(s.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${s.id+(this.forExport?"-export":"")})`}else o=s.color||o;return r.setAttribute(i,o),!(e.toString=function(){return o})}function A(){var e=this.chart.isResizing;if(this.isDirtyData||e||!this.chart.hasRendered)for(var i of this.points){let t=i.options&&i.options.color;t&&t.pattern&&(!e||i.shapeArgs&&i.shapeArgs.width&&i.shapeArgs.height?i.calculatePatternDimensions(t.pattern):(t.pattern._width="defer",t.pattern._height="defer"))}}function b(i){if(!i.width||!i.height){let t=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},e=this.shapeArgs;if(e&&(t.width=e.width||t.width,t.height=e.height||t.height,t.x=e.x||t.x,t.y=e.y||t.y),i.image){var r;if(!t.width||!t.height)return i._width="defer",i._height="defer",r=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(a(r)&&r<0&&(i._inverted=!0));i.aspectRatio&&(t.aspectRatio=t.width/t.height,i.aspectRatio>t.aspectRatio?t.aspectWidth=t.height*i.aspectRatio:t.aspectHeight=t.width/i.aspectRatio),i._width=i.width||Math.ceil(t.aspectWidth||t.width),i._height=i.height||Math.ceil(t.aspectHeight||t.height)}i.width||(i._x=i.x||0,i._x+=t.x-Math.round(t.aspectWidth?Math.abs(t.aspectWidth-t.width)/2:0)),i.height||(i._y=i.y||0,i._y+=t.y-Math.round(t.aspectHeight?Math.abs(t.aspectHeight-t.height)/2:0))}}function v(i,r){let a=g(r,!0),s=f(a),o=i.color||"#333333",n=i.height||("number"==typeof i._height?i._height:0)||32,h=i.width||("number"==typeof i._width?i._width:0)||32,l,d=i.id,p;if(d||(this.idCounter=this.idCounter||0,d="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(d+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(d))){this.defIds.push(d);let t={id:d,patternUnits:"userSpaceOnUse",patternContentUnits:i.patternContentUnits||"userSpaceOnUse",width:h,height:n,x:i._x||i.x||0,y:i._y||i.y||0},e=(i._inverted&&(t.patternTransform="scale(1, -1)",i.patternTransform&&(i.patternTransform+=" scale(1, -1)")),i.patternTransform&&(t.patternTransform=i.patternTransform),this.createElement("pattern").attr(t).add(this.defs));return e.id=d,i.path?(p=c.isObject(i.path)?i.path:{d:i.path},i.backgroundColor&&(r=i.backgroundColor,this.rect(0,0,h,n).attr({fill:r}).add(e)),l={d:p.d},this.styledMode||(l.stroke=p.stroke||o,l["stroke-width"]=g(p.strokeWidth,2),l.fill=p.fill||"none"),p.transform&&(l.transform=p.transform),this.createElement("path").attr(l).add(e),e.color=o):i.image&&(a?this.image(i.image,0,0,h,n,function(){this.animate({opacity:g(i.opacity,1)},s),u(this.element,"load")}).attr({opacity:0}):this.image(i.image,0,0,h,n)).add(e),i.image&&a||void 0===i.opacity||[].forEach.call(e.element.childNodes,t=>{t.setAttribute("opacity",i.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[d]=e}}function M(t){let e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function S(){if(this.chart?.mapView){let e=this.chart.renderer,i=e.patternElements;e.defIds?.length&&i&&this.points.filter(function(t){return!!t.graphic&&(t.graphic.element.hasAttribute("fill")||t.graphic.element.hasAttribute("color")||t.graphic.element.hasAttribute("stroke"))&&!t.options.color?.pattern?.image&&!!t.group?.scaleX&&!!t.group?.scaleY}).map(function(t){return{id:(t.graphic?.element.getAttribute("fill")||t.graphic?.element.getAttribute("color")||t.graphic?.element.getAttribute("stroke")||"").replace(e.url,"").replace("url(#","").replace(")",""),x:t.group?.scaleX||1,y:t.group?.scaleY||1}}).filter(function(i,r,t){return""!==i.id&&-1!==i.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===i.id&&e<r})}).forEach(function(t){var e=t.id;i[e].scaleX=1/t.x,i[e].scaleY=1/t.y,i[e].updateTransform("patternTransform")})}}return{compose:function(t,e,i){var r=e.prototype.pointClass,a=r.prototype;a.calculatePatternDimensions||(o(t,"endResize",x),o(t,"redraw",w),h(a,{calculatePatternDimensions:b}),o(r,"afterInit",y),o(e,"render",A),d(e.prototype,"getColor",M),o(e,"afterRender",S),o(e,"mapZoomComplete",S),h(i.prototype,{addPattern:v}),o(i,"complexColor",C))},patterns:p}}),e(t,"Series/Pictorial/PictorialUtilities.js",[t["Core/Utilities.js"]],function(t){let a=t["defined"];return{rescalePatternFill:function(n,h,l,d,p=1){let t=n&&n.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);if(e){let o=document.querySelector(e[1]+" path");if(o){let e=o.getBBox();if(0===e.width){let t=o.parentElement;n.renderer.box.appendChild(o),e=o.getBBox(),t.appendChild(o)}let t=1/(e.width+p),i=h/d/e.height,r=e.width/e.height,a=l/h,s=-e.width/2;r<a&&(t=t*r/a),o.setAttribute("stroke-width",p/(l*t)),o.setAttribute("transform",`translate(0.5, 0)scale(${t} ${i}) translate(${s+p*t/2}, ${-e.y})`)}}},invertShadowGroup:function(t,e){e=e.chart.inverted;e&&t.attr({rotation:e?90:0,scaleX:e?-1:1})},getStackMetrics:function(t,e){let i=t.len,r=0;return e&&a(e.max)&&(r=t.toPixels(e.max,!0),i=t.len-r),{height:i,y:r}}}}),e(t,"Series/Pictorial/PictorialPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Pictorial/PictorialUtilities.js"]],function(t,e){let i=t.seriesTypes.column.prototype.pointClass,{rescalePatternFill:r,getStackMetrics:a}=e;return class extends i{setState(){super.setState.apply(this,arguments);var t=this.series,e=t.options.paths;this.graphic&&this.shapeArgs&&e&&(e=e[this.index%e.length],r(this.graphic,a(t.yAxis,e).height,this.shapeArgs.width||0,this.shapeArgs.height||1/0,this.series.options.borderWidth||0))}}}),e(t,"Series/Pictorial/PictorialSeries.js",[t["Extensions/PatternFill.js"],t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Series/Pictorial/PictorialPoint.js"],t["Series/Pictorial/PictorialUtilities.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Axis/Stacking/StackItem.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,r,a,s,o,n,h,l){var d=o.seriesTypes.column;t.compose(i,s,h);let p=e["animObject"],{getStackMetrics:m,invertShadowGroup:x,rescalePatternFill:w}=a,{addEvent:c,defined:f,merge:g,objectEach:u,pick:y}=l;class C extends d{animate(t){let{chart:e,group:i}=this,r=p(this.options.animation),a=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join(","),s=e.sharedClips[a];if(t&&i){let t=this.getClipBox();s||(t.y=t.height,t.height=0,s=e.renderer.clipRect(t),e.sharedClips[a]=s),i.clip(s)}else s&&!s.hasClass("highcharts-animating")&&(t=this.getClipBox(),s.addClass("highcharts-animating").animate(t,r))}animateDrilldown(){}animateDrillupFrom(){}pointAttribs(t){let e=super.pointAttribs.apply(this,arguments),i=this.options.paths;var r,a,s;return t&&t.shapeArgs&&i&&(s=i[t.index%i.length],{y:r,height:a}=m(this.yAxis,s),(s=s.definition)!==t.pathDef?(t.pathDef=s,e.fill={pattern:{path:{d:s,fill:e.fill,strokeWidth:e["stroke-width"],stroke:e.stroke},x:t.shapeArgs.x,y:r,width:t.shapeArgs.width||0,height:a,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#ff0000"}}):t.pathDef&&t.graphic&&delete e.fill),delete e.stroke,delete e.strokeWidth,e}getExtremes(){let e=super.getExtremes.apply(this,arguments),t=this.options.paths;return t&&t.forEach(function(t){f(t.max)&&f(e.dataMax)&&t.max>e.dataMax&&(e.dataMax=t.max)}),e}}function A(g){let t=Object.keys(g.points).filter(t=>1<t.split(",").length),e=g.axis.chart.series,i=t.map(t=>parseFloat(t.split(",")[0])),r=-1,u=(i.forEach(t=>{e[t]&&e[t].visible&&(r=t)}),g.axis.chart.series[r]);if(u&&u.is("pictorial")&&g.axis.hasData()&&u.xAxis.hasData()){let i=u.xAxis,t=g.axis.options,r=g.axis.chart,a=g.shadow,e=i.toPixels(g.x,!0),s=r.inverted?i.len-e:e,o=u.options.paths||[],n=g.x%o.length,h=o[n],l=u.getColumnMetrics&&u.getColumnMetrics().width,{height:d,y:p}=m(u.yAxis,h),c=t.stackShadow,f=y(c&&c.borderWidth,u.options.borderWidth,1);if(!a&&c&&c.enabled&&h)g.shadowGroup||(g.shadowGroup=r.renderer.g("shadow-group").add()),g.shadowGroup.attr({translateX:(r.inverted?g.axis:i).pos,translateY:(r.inverted?i:g.axis).pos}),g.shadow=r.renderer.rect(s,p,l,d).attr({fill:{pattern:{path:{d:h.definition,fill:c.color||"#dedede",strokeWidth:f,stroke:c.borderColor||"transparent"},x:s,y:p,width:l,height:d,patternContentUnits:"objectBoundingBox",backgroundColor:"none",color:"#dedede"}}}).add(g.shadowGroup),x(g.shadowGroup,g.axis),w(g.shadow,d,l,d,f),g.setOffset(u.pointXOffset||0,u.barW||0);else if(a&&g.shadowGroup){a.animate({x:s,y:p,width:l,height:d});let t=a.attr("fill"),e=t&&t.match(/url\(([^)]+)\)/);e&&r.renderer.patternElements&&r.renderer.patternElements[e[1].slice(1)].animate({x:s,y:p,width:l,height:d}),g.shadowGroup.animate({translateX:(r.inverted?g.axis:i).pos,translateY:(r.inverted?i:g.axis).pos}),x(g.shadowGroup,g.axis),w(a,d,l,d,f),g.setOffset(u.pointXOffset||0,u.barW||0)}}else g.shadow&&g.shadowGroup&&(g.shadow.destroy(),g.shadow=void 0,g.shadowGroup.destroy(),g.shadowGroup=void 0)}function b(t,e){t.axes&&t.axes.forEach(function(t){t.stacking&&u(t.stacking.stacks,function(t){u(t,function(t){e(t)})})})}function v(t){b(t,function(t){t.shadow&&t.shadowGroup&&(t.shadow.destroy(),t.shadowGroup.destroy(),delete t.shadow,delete t.shadowGroup)})}return C.defaultOptions=g(d.defaultOptions,{borderWidth:0}),c(C,"afterRender",function(){let o=this,n=o.options.paths,h=/url\(([^)]+)\)/;o.points.forEach(function(s){if(s.graphic&&s.shapeArgs&&n){let t=n[s.index%n.length],e=s.graphic.attr("fill"),i=e&&e.match(h),{y:r,height:a}=m(o.yAxis,t);if(i&&o.chart.renderer.patternElements){let t=o.chart.renderer.patternElements[i[1].slice(1)];t&&t.animate({x:s.shapeArgs.x,y:r,width:s.shapeArgs.width||0,height:a})}w(s.graphic,m(o.yAxis,t).height,s.shapeArgs.width||0,s.shapeArgs.height||1/0,o.options.borderWidth||0)}})}),c(i,"render",function(){b(this,A)}),c(n,"afterSetOffset",function(t){var e,i,r;this.shadow&&({chart:r,len:e}=this.axis,{xOffset:t,width:i}=t,t=r.inverted?t-r.xAxis[0].len:t,r=r.inverted?-e:0,this.shadow.attr({translateX:t,translateY:r}),this.shadow.animate({width:i}))}),c(i,"afterDrilldown",function(){v(this)}),c(i,"afterDrillUp",function(){v(this)}),C.prototype.pointClass=r,o.registerSeriesType("pictorial",C),C}),e(t,"masters/modules/pictorial.src.js",[t["Core/Globals.js"]],function(t){return t})});
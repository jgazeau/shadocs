"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/Funnel/FunnelSeries.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,i){const w=e["noop"],{series:u,seriesTypes:{pie:s}}=r,{addEvent:a,extend:n,fireEvent:H,isArray:o,merge:l,pick:k}=i;class d extends s{constructor(){super(...arguments),this.points=this.options=this.data=void 0}alignDataLabel(t,e,i,s,a){s=(h=t.series).options.reversed;var n=t.dlBox||t.shapeArgs,o=i.align,l=i.verticalAlign,r=((h.options||{}).dataLabels||{}).inside,d=h.center[1],h=h.getWidthAt((s?2*d-t.plotY:t.plotY)-n.height/2+e.height);h="middle"===l?(n.topWidth-n.bottomWidth)/4:(h-n.bottomWidth)/2,d=n.y;let c=n.x;var p=k(e.height,e.getBBox().height);"middle"===l?d=n.y-n.height/2+p/2:"top"===l&&(d=n.y-n.height+p+i.padding),("top"===l&&!s||"bottom"===l&&s||"middle"===l)&&("right"===o?c=n.x-i.padding+h:"left"===o&&(c=n.x+i.padding-h)),s={x:c,y:s?d-n.height:d,width:n.bottomWidth,height:n.height},i.verticalAlign="bottom",r&&!t.visible||u.prototype.alignDataLabel.call(this,t,e,i,s,a),r&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))}drawDataLabels(){let t=this.data,e=this.options.dataLabels.distance,i,s,a,n=t.length,o,l;for(this.center[2]-=2*e;n--;)s=(i=(a=t[n]).half)?1:-1,l=a.plotY,a.labelDistance=k(a.options.dataLabels&&a.options.dataLabels.distance,e),this.maxLabelDistance=Math.max(a.labelDistance,this.maxLabelDistance||0),o=this.getX(l,i,a),a.labelPosition={natural:{x:0,y:l},computed:{},alignment:i?"right":"left",connectorPosition:{breakAt:{x:o+(a.labelDistance-5)*s,y:l},touchingSliceAt:{x:o+a.labelDistance*s,y:l}}};r.seriesTypes[this.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)}translate(){function t(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}let e=0,s=this;var i=s.chart;let a=s.options,n=a.reversed,o=a.ignoreHiddenPoint;var l=i.plotWidth,i=i.plotHeight;let r=0,d=a.center,h=t(d[0],l),c=t(d[1],i),p=t(a.width,l),u,g=t(a.height,i),f=t(a.neckWidth,l),b=t(a.neckHeight,i),m=c-g/2+g-b;l=s.data;let y,v,L="left"===a.dataLabels.position?1:0,x,W,A,C,D,S,j;s.getWidthAt=function(t){var e=c-g/2;return t>m||g===b?f:f+(p-f)*(1-(t-e)/(g-b))},s.getX=function(t,e,i){return h+(e?-1:1)*(s.getWidthAt(n?2*c-t:t)/2+i.labelDistance)},s.center=[h,c,g],s.centerX=h,l.forEach(function(t){!t.y||!t.isValid()||o&&!1===t.visible||(e+=t.y)}),l.forEach(function(t){j=null,v=e?t.y/e:0,W=c-g/2+r*g,D=W+v*g,u=s.getWidthAt(W),x=h-u/2,A=x+u,u=s.getWidthAt(D),C=h-u/2,S=C+u,W>m?(x=C=h-f/2,A=S=h+f/2):D>m&&(j=D,u=s.getWidthAt(m),C=h-u/2,S=C+u,D=m),n&&(W=2*c-W,D=2*c-D,null!==j&&(j=2*c-j)),y=[["M",x,W],["L",A,W],["L",S,D]],null!==j&&y.push(["L",S,j],["L",C,j]),y.push(["L",C,D],["Z"]),t.shapeType="path",t.shapeArgs={d:y},t.percentage=100*v,t.plotX=h,t.plotY=(W+(j||D))/2,t.tooltipPos=[h,t.plotY],t.dlBox={x:C,y:W,topWidth:A-x,bottomWidth:S-C,height:Math.abs(k(j,D)-W),width:NaN},t.slice=w,t.half=L,!t.isValid()||o&&!1===t.visible||(r+=v)}),H(s,"afterTranslate")}sortByAngle(t){t.sort(function(t,e){return t.plotY-e.plotY})}}return d.defaultOptions=l(s.defaultOptions,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}),n(d.prototype,{animate:w}),a(t,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){let e=t.options&&t.options.dataLabels;o(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),r.registerSeriesType("funnel",d),d}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){i=i.merge;class s extends t{constructor(){super(...arguments),this.points=this.options=this.data=void 0}}return s.defaultOptions=i(t.defaultOptions,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),e.registerSeriesType("pyramid",s),s}),e(t,"masters/modules/funnel.src.js",[],function(){})});
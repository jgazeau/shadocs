!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel/FunnelSeriesDefaults.js",[],function(){return{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}}),t(e,"Series/Funnel/FunnelSeries.js",[e["Series/Funnel/FunnelSeriesDefaults.js"],e["Core/Globals.js"],e["Extensions/BorderRadius.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,i,X,t,s){let U=i["noop"],{column:a,pie:n}=t.seriesTypes,{addEvent:d,extend:o,fireEvent:q,isArray:r,merge:l,pick:G,pushUnique:h,relativeLength:N,splat:p}=s,m=t.series.prototype.alignDataLabel;function V(e,t){return/%$/.test(e)?t*parseInt(e,10)/100:parseInt(e,10)}class u extends n{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}alignDataLabel(e,t,i,s,a){let n=e.series,d=n.options.reversed,o=e.dlBox||e.shapeArgs,r=i.align,l=i.verticalAlign,h=((n.options||{}).dataLabels||{}).inside,p=n.center[1],u=d?2*p-e.plotY:e.plotY,c=n.getWidthAt(u-o.height/2+t.height),g="middle"===l?(o.topWidth-o.bottomWidth)/4:(c-o.bottomWidth)/2,y=o.y,f=o.x,x=G(t.height,t.getBBox().height);"middle"===l?y=o.y-o.height/2+x/2:"top"===l&&(y=o.y-o.height+x+(i.padding||0)),("top"===l&&!d||"bottom"===l&&d||"middle"===l)&&("right"===r?f=o.x-i.padding+g:"left"===r&&(f=o.x+i.padding-g)),s={x:f,y:d?y-o.height:y,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",h&&!e.visible||m.call(n,e,t,i,s,a),h&&(!e.visible&&e.dataLabel&&(e.dataLabel.placed=!1),e.contrastColor&&t.css({color:e.contrastColor}))}drawDataLabels(){(p(this.options.dataLabels)[0].inside?a:n).prototype.drawDataLabels.call(this)}getDataLabelPosition(e,t){var i=e.plotY||0,s=e.half?1:-1,a=this.getX(i,!!e.half,e);return{distance:t,natural:{x:0,y:i},computed:{},alignment:e.half?"right":"left",connectorPosition:{breakAt:{x:a+(t-5)*s,y:i},touchingSliceAt:{x:a+t*s,y:i}}}}translate(){let s=this,e=s.chart,t=s.options,o=t.reversed,i=t.ignoreHiddenPoint,a=X.optionsToObject(t.borderRadius),n=e.plotWidth,d=e.plotHeight,Y=t.center,r=V(Y[0],n),l=V(Y[1],d),h=V(t.width,n),p=V(t.height,d),u=V(t.neckWidth,n),c=V(t.neckHeight,d),g=l-p/2+p-c,y=s.data,B=N(a.radius,h),f=a.scope,E="left"===t.dataLabels.position?1:0,x=e=>{let t=Math.tan(e/2),i=Math.cos(S),s=Math.sin(S),a=B,n=a/t,d=Math.tan((Math.PI-e)/3.2104);return n>C&&(a=(n=C)*t),{dx:[n*i,(n-(d*=a))*i,n-d,n],dy:[n*s,(n-d)*s,n-d,n].map(e=>o?-e:e)}},m=0,T=0,b,L,v,S,C,M,j,P,W,A,k,D;for(var w of(s.getWidthAt=function(e){var t=l-p/2;return e>g||p===c?u:u+(h-u)*(1-(e-t)/(p-c))},s.getX=function(e,t,i){return r+(t?-1:1)*(s.getWidthAt(o?2*l-e:e)/2+(i.dataLabel?.dataLabelPosition?.distance??N(this.options.dataLabels?.distance||0,h)))},s.center=[r,l,p],s.centerX=r,y))!w.y||!w.isValid()||i&&!1===w.visible||(m+=w.y);for(var F of y){if(D=null,v=m?F.y/m:0,A=(j=l-p/2+T*p)+v*p,P=(M=r-(b=s.getWidthAt(j))/2)+b,k=(W=r-(b=s.getWidthAt(A))/2)+b,j>g?(M=W=r-u/2,P=k=r+u/2):A>g&&(D=A,k=(W=r-(b=s.getWidthAt(g))/2)+b,A=g),o&&(j=2*l-j,A=2*l-A,null!==D&&(D=2*l-D)),!B||"point"!==f&&0!==F.index&&F.index!==y.length-1&&null===D)L=[["M",M,j],["L",P,j],["L",k,A]],null!==D&&L.push(["L",k,D],["L",W,D]),L.push(["L",W,A]);else{var H=Math.abs(A-j),I=P-k,O=k-W,R=Math.sqrt(I*I+H*H);S=Math.atan(H/I),C=R/2,null!==D&&(C=Math.min(C,Math.abs(D-A)/2)),1<=O&&(C=Math.min(C,O/2));let e=x(S);L="stack"===f&&0!==F.index?[["M",M,j],["L",P,j]]:[["M",M+e.dx[0],j+e.dy[0]],["C",M+e.dx[1],j+e.dy[1],M+e.dx[2],j,M+e.dx[3],j],["L",P-e.dx[3],j],["C",P-e.dx[2],j,P-e.dx[1],j+e.dy[1],P-e.dx[0],j+e.dy[0]]],null!==D?(H=x(Math.PI/2),e=x(Math.PI/2+S),L.push(["L",k+e.dx[0],A-e.dy[0]],["C",k+e.dx[1],A-e.dy[1],k,A+e.dy[2],k,A+e.dy[3]]),"stack"===f&&F.index!==y.length-1?L.push(["L",k,D],["L",W,D]):L.push(["L",k,D-H.dy[3]],["C",k,D-H.dy[2],k-H.dx[2],D,k-H.dx[3],D],["L",W+H.dx[3],D],["C",W+H.dx[2],D,W,D-H.dy[2],W,D-H.dy[3]]),L.push(["L",W,A+e.dy[3]],["C",W,A+e.dy[2],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):1<=O?(e=x(Math.PI-S),"stack"===f&&0===F.index?L.push(["L",k,A],["L",W,A]):L.push(["L",k+e.dx[0],A-e.dy[0]],["C",k+e.dx[1],A-e.dy[1],k-e.dx[2],A,k-e.dx[3],A],["L",W+e.dx[3],A],["C",W+e.dx[2],A,W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):(e=x(Math.PI-2*S),L.push(["L",W+e.dx[0],A-e.dy[0]],["C",W+e.dx[1],A-e.dy[1],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]]))}L.push(["Z"]),F.shapeType="path",F.shapeArgs={d:L},F.percentage=100*v,F.plotX=r,F.plotY=(j+(D||A))/2,F.tooltipPos=[r,F.plotY],F.dlBox={x:W,y:j,topWidth:P-M,bottomWidth:k-W,height:Math.abs(G(D,A)-j),width:NaN},F.slice=U,F.half=E,!F.isValid()||i&&!1===F.visible||(T+=v)}q(s,"afterTranslate")}sortByAngle(e){e.sort((e,t)=>e.plotY-t.plotY)}}u.defaultOptions=l(n.defaultOptions,e),o(u.prototype,{animate:U});{i=u=u||{};let t=[];function c(){for(var t of this.series){let e=t.options&&t.options.dataLabels;r(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()}}i.compose=function(e){h(t,e)&&d(e,"afterHideAllOverlappingLabels",c)}}return t.registerSeriesType("funnel",u),u}),t(e,"Series/Pyramid/PyramidSeriesDefaults.js",[],function(){return{neckWidth:"0%",neckHeight:"0%",reversed:!0}}),t(e,"Series/Pyramid/PyramidSeries.js",[e["Series/Funnel/FunnelSeries.js"],e["Series/Pyramid/PyramidSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,i,s){let a=s["merge"];class n extends e{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}}return n.defaultOptions=a(e.defaultOptions,t),i.registerSeriesType("pyramid",n),n}),t(e,"masters/modules/funnel.src.js",[e["Core/Globals.js"],e["Series/Funnel/FunnelSeries.js"]],function(e,t){t.compose(e.Chart)})});
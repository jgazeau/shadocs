!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(a){"use strict";var e=a?a._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&a.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/Funnel/FunnelSeriesDefaults.js",[],function(){return{animation:!1,borderRadius:0,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:"#cccccc",borderColor:"#000000"}}}}),t(e,"Series/Funnel/FunnelSeries.js",[e["Series/Funnel/FunnelSeriesDefaults.js"],e["Core/Globals.js"],e["Extensions/BorderRadius.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,X,i,s){let{composed:a,noop:U}=t,{column:n,pie:d}=i.seriesTypes,{addEvent:o,correctFloat:q,extend:r,fireEvent:G,isArray:l,merge:h,pick:N,pushUnique:u,relativeLength:V,splat:c}=s,b=i.series.prototype.alignDataLabel;function z(e,t){return/%$/.test(e)?t*parseInt(e,10)/100:parseInt(e,10)}class p extends d{alignDataLabel(e,t,i,s,a){let n=e.series,d=n.options.reversed,o=e.dlBox||e.shapeArgs,{align:r,padding:l=0,verticalAlign:h}=i,u=((n.options||{}).dataLabels||{}).inside,c=n.center[1],p=e.plotY||0,y=t.height??t.getBBox().height,g=n.getWidthAt((d?2*c-p:p)-o.height/2+y),f="middle"===h?(o.topWidth-o.bottomWidth)/4:(g-o.bottomWidth)/2,x=o.y,m=o.x;"middle"===h?x=o.y-o.height/2+y/2:"top"===h&&(x=o.y-o.height+y+l),("top"===h&&!d||"bottom"===h&&d||"middle"===h)&&("right"===r?m=o.x-l+f:"left"===r&&(m=o.x+l-f)),s={x:m,y:d?x-o.height:x,width:o.bottomWidth,height:o.height},i.verticalAlign="bottom",u&&(i.distance=void 0),u&&e.visible&&b.call(n,e,t,i,s,a),u&&(!e.visible&&e.dataLabel&&(e.dataLabel.placed=!1),e.contrastColor&&t.css({color:e.contrastColor}))}drawDataLabels(){(c(this.options.dataLabels)[0].inside?n:d).prototype.drawDataLabels.call(this)}getDataLabelPosition(e,t){var i=e.plotY||0,s=e.half?1:-1,a=this.getX(i,!!e.half,e);return{distance:t,natural:{x:0,y:i},computed:{},alignment:e.half?"right":"left",connectorPosition:{breakAt:{x:a+(t-5)*s,y:i},touchingSliceAt:{x:a+t*s,y:i}}}}translate(){let s=this,e=s.chart,t=s.options,o=t.reversed,i=t.ignoreHiddenPoint,a=X.optionsToObject(t.borderRadius),n=e.plotWidth,d=e.plotHeight,B=t.center,r=z(B[0],n),l=z(B[1],d),h=z(t.width,n),u=z(t.height,d),c=z(t.neckWidth,n),p=z(t.neckHeight,d),y=l-u/2+u-p,g=s.points,E=V(a.radius,h),f=a.scope,T="left"===t.dataLabels.position?1:0,x=e=>{let t=Math.tan(e/2),i=Math.cos(S),s=Math.sin(S),a=E,n=a/t,d=Math.tan((Math.PI-e)/3.2104);return n>C&&(a=(n=C)*t),{dx:[n*i,(n-(d*=a))*i,n-d,n],dy:[n*s,(n-d)*s,n-d,n].map(e=>o?-e:e)}},m=0,Y=0,b,L,v,S,C,M,j,P,W,A,F,k;for(var D of(s.getWidthAt=function(e){var t=l-u/2;return e>y||u===p?c:c+(h-c)*(1-(e-t)/(u-p))},s.getX=function(e,t,i){return r+(t?-1:1)*(s.getWidthAt(o?2*l-e:e)/2+(i.dataLabel?.dataLabelPosition?.distance??V(this.options.dataLabels?.distance||0,h)))},s.center=[r,l,u],s.centerX=r,g))!D.y||!D.isValid()||i&&!1===D.visible||(m+=D.y);for(var H of g){if(k=null,v=m?H.y/m:0,A=(j=l-u/2+Y*u)+v*u,P=(M=r-(b=s.getWidthAt(j))/2)+b,F=(W=r-(b=s.getWidthAt(A))/2)+b,q(j)>=y?(M=W=r-c/2,P=F=r+c/2):A>y&&(k=A,F=(W=r-(b=s.getWidthAt(y))/2)+b,A=y),o&&(j=2*l-j,A=2*l-A,null!==k&&(k=2*l-k)),!E||"point"!==f&&0!==H.index&&H.index!==g.length-1&&null===k)L=[["M",M,j],["L",P,j],["L",F,A]],null!==k&&L.push(["L",F,k],["L",W,k]),L.push(["L",W,A]);else{var w=Math.abs(A-j),I=P-F,O=F-W,R=Math.sqrt(I*I+w*w);S=Math.atan(0!=I?w/I:1/0),C=R/2,null!==k&&(C=Math.min(C,Math.abs(k-A)/2)),1<=O&&(C=Math.min(C,O/2));let e=x(S);L="stack"===f&&0!==H.index?[["M",M,j],["L",P,j]]:[["M",M+e.dx[0],j+e.dy[0]],["C",M+e.dx[1],j+e.dy[1],M+e.dx[2],j,M+e.dx[3],j],["L",P-e.dx[3],j],["C",P-e.dx[2],j,P-e.dx[1],j+e.dy[1],P-e.dx[0],j+e.dy[0]]],null!==k?(w=x(Math.PI/2),e=x(Math.PI/2+S),L.push(["L",F+e.dx[0],A-e.dy[0]],["C",F+e.dx[1],A-e.dy[1],F,A+e.dy[2],F,A+e.dy[3]]),"stack"===f&&H.index!==g.length-1?L.push(["L",F,k],["L",W,k]):L.push(["L",F,k-w.dy[3]],["C",F,k-w.dy[2],F-w.dx[2],k,F-w.dx[3],k],["L",W+w.dx[3],k],["C",W+w.dx[2],k,W,k-w.dy[2],W,k-w.dy[3]]),L.push(["L",W,A+e.dy[3]],["C",W,A+e.dy[2],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):1<=O?(e=x(Math.PI-S),"stack"===f&&0===H.index?L.push(["L",F,A],["L",W,A]):L.push(["L",F+e.dx[0],A-e.dy[0]],["C",F+e.dx[1],A-e.dy[1],F-e.dx[2],A,F-e.dx[3],A],["L",W+e.dx[3],A],["C",W+e.dx[2],A,W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]])):(e=x(Math.PI-2*S),L.push(["L",W+e.dx[0],A-e.dy[0]],["C",W+e.dx[1],A-e.dy[1],W-e.dx[1],A-e.dy[1],W-e.dx[0],A-e.dy[0]]))}L.push(["Z"]),H.shapeType="path",H.shapeArgs={d:L},H.percentage=100*v,H.plotX=r,H.plotY=(j+(k||A))/2,H.tooltipPos=[r,H.plotY],H.dlBox={x:W,y:j,topWidth:P-M,bottomWidth:F-W,height:Math.abs(N(k,A)-j),width:NaN},H.slice=U,H.half=T,!H.isValid()||i&&!1===H.visible||(Y+=v)}G(s,"afterTranslate")}sortByAngle(e){e.sort((e,t)=>e.plotY-t.plotY)}}return p.defaultOptions=h(d.defaultOptions,e),r(p.prototype,{animate:U}),(p||(p={})).compose=function(e){u(a,"FunnelSeries")&&o(e,"afterHideAllOverlappingLabels",y)},i.registerSeriesType("funnel",p),p;function y(){for(var t of this.series){let e=t.options&&t.options.dataLabels;l(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()}}}),t(e,"Series/Pyramid/PyramidSeriesDefaults.js",[],function(){return{neckHeight:"0%",neckWidth:"0%",reversed:!0}}),t(e,"Series/Pyramid/PyramidSeries.js",[e["Series/Funnel/FunnelSeries.js"],e["Series/Pyramid/PyramidSeriesDefaults.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,i,s){let a=s["merge"];class n extends e{}return n.defaultOptions=a(e.defaultOptions,t),i.registerSeriesType("pyramid",n),n}),t(e,"masters/modules/funnel.src.js",[e["Core/Globals.js"],e["Series/Funnel/FunnelSeries.js"]],function(e,t){return t.compose(e.Chart),e})});
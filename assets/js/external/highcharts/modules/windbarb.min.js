!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),e(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(e,t,i){var o;let w=e["prototype"],r=t["prototype"],{defined:C,stableSort:W}=i;{e=o=o||{};let t=[];function s(t){return r.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,t)}function n(){w.translate.apply(this);let o=this,t=o.options,e=o.chart,r=o.points,i=t.onSeries,s=i&&e.get(i),n=s&&s.options.step,a=s&&s.points,l=e.inverted,p=o.xAxis,h=o.yAxis,u=r.length-1,d,c,f=t.onKey||"y",b=a&&a.length,g=0,m,v,x,y,S;if(s&&s.visible&&b)for(g=(s.pointXOffset||0)+(s.barW||0)/2,y=s.currentDataGrouping,v=a[b-1].x+(y?y.totalRange:0),W(r,(t,e)=>t.x-e.x),f="plot"+f[0].toUpperCase()+f.substr(1);b--&&r[u];)if(m=a[b],(d=r[u]).y=m.y,m.x<=d.x&&void 0!==m[f]){if(d.x<=v&&(d.plotY=m[f],m.x<d.x&&!n&&(x=a[b+1])&&void 0!==x[f]))if(C(d.plotX)&&s.is("spline")){let i=[m.plotX||0,m.plotY||0],o=[x.plotX||0,x.plotY||0],r=m.controlPoints?.high||i,s=x.controlPoints?.low||o,e=(t,e)=>Math.pow(1-t,3)*i[e]+3*(1-t)*(1-t)*t*r[e]+3*(1-t)*t*t*s[e]+t*t*t*o[e],n=0,a=1,l;for(let t=0;t<100;t++){var j=(n+a)/2,L=e(j,0);if(null===L)break;if(Math.abs(L-d.plotX)<.25){l=j;break}L<d.plotX?n=j:a=j}C(l)&&(d.plotY=e(l,1),d.y=h.toValue(d.plotY,!0))}else S=(d.x-m.x)/(x.x-m.x),d.plotY+=S*(x[f]-m[f]),d.y+=S*(x.y-m.y);if(u--,b++,u<0)break}r.forEach((t,e)=>{let i;t.plotX+=g,void 0!==t.plotY&&!l||(0<=t.plotX&&t.plotX<=p.len?l?(t.plotY=p.translate(t.x,0,1,0,1),t.plotX=C(t.y)?h.translate(t.y,0,0,0,1):0):t.plotY=(p.opposite?0:o.yAxis.len)+p.offset:t.shapeArgs={}),(c=r[e-1])&&c.plotX===t.plotX&&(void 0===c.stackIndex&&(c.stackIndex=0),i=c.stackIndex+1),t.stackIndex=i}),this.onSeries=s}e.compose=function(e){if(i.pushUnique(t,e)){let t=e.prototype;t.getPlotBox=s,t.translate=n}return e},e.getPlotBox=s,e.translate=n}return o}),e(t,"Series/Windbarb/WindbarbPoint.js",[t["Series/Column/ColumnSeries.js"],t["Core/Utilities.js"]],function(t,e){let i=e["isNumber"];class o extends t.prototype.pointClass{constructor(){super(...arguments),this.beaufort=void 0,this.beaufortLevel=void 0,this.direction=void 0,this.options=void 0,this.series=void 0,this.value=void 0}isValid(){return i(this.value)&&0<=this.value}}return o}),e(t,"Series/Windbarb/WindbarbSeriesDefaults.js",[],function(){return{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0}}),e(t,"Series/Windbarb/WindbarbSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Windbarb/WindbarbPoint.js"],t["Series/Windbarb/WindbarbSeriesDefaults.js"]],function(t,e,n,r,i,o,s,a){let l=t["animObject"],p=i.seriesTypes["column"],{extend:h,merge:u,pick:d}=o;class c extends p{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}init(t,e){super.init(t,e)}pointAttribs(t,e){let i=this.options,o=t.color||this.color,r=this.options.lineWidth;return e&&(o=i.states[e].color||o,r=(i.states[e].lineWidth||r)+(i.states[e].lineWidthPlus||0)),{stroke:o,"stroke-width":r}}windArrow(t){let e=t.beaufortLevel,i=this.options.vectorLength/20,o=1.943844*t.value,r,s=-10;if(t.isNull)return[];if(0===e)return this.chart.renderer.symbols.circle(-10*i,-10*i,20*i,20*i);let n=[["M",0,7*i],["L",-1.5*i,7*i],["L",0,10*i],["L",1.5*i,7*i],["L",0,7*i],["L",0,-10*i]];if(0<(r=(o-o%50)/50))for(;r--;)n.push(-10===s?["L",0,s*i]:["M",0,s*i],["L",5*i,s*i+2],["L",0,s*i+4]),o-=50,s+=7;if(0<(r=(o-o%10)/10))for(;r--;)n.push(-10===s?["L",0,s*i]:["M",0,s*i],["L",7*i,s*i]),o-=10,s+=3;if(0<(r=(o-o%5)/5))for(;r--;)n.push(-10===s?["L",0,s*i]:["M",0,s*i],["L",4*i,s*i]),o-=5,s+=3;return n}drawPoints(){let t=this.chart,e=this.yAxis,i=t.inverted,o=this.options.vectorLength/2;for(var r of this.points){var s=r.plotX,n=r.plotY;!1===this.options.clip||t.isInsidePlot(s,0)?(r.graphic||(r.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+d(r.colorIndex,r.series.colorIndex))),r.graphic.attr({d:this.windArrow(r),translateX:s+this.options.xOffset,translateY:n+this.options.yOffset,rotation:r.direction}),this.chart.styledMode||r.graphic.attr(this.pointAttribs(r))):r.graphic&&(r.graphic=r.graphic.destroy()),r.tooltipPos=[s+this.options.xOffset+(i&&!this.onSeries?o:0),n+this.options.yOffset-(i?0:o+e.pos-t.plotTop)]}}animate(t){t?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},l(this.options.animation))}markerAttribs(t,e){return{}}getExtremes(){return{}}shouldShowTooltip(t,e,i={}){return i.ignoreX=this.chart.inverted,i.ignoreY=!i.ignoreX,super.shouldShowTooltip(t,e,i)}}return c.defaultOptions=u(p.defaultOptions,a),r.compose(c),h(c.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:["Calm","Light air","Light breeze","Gentle breeze","Moderate breeze","Fresh breeze","Strong breeze","Near gale","Gale","Strong gale","Storm","Violent storm","Hurricane"],invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:s,trackerGroups:["markerGroup"],translate:function(){var e,i=this.beaufortFloor,o=this.beaufortName;for(e of(r.translate.call(this),this.points)){let t=0;for(;t<i.length&&!(i[t]>e.value);t++);e.beaufortLevel=t-1,e.beaufort=o[t-1]}}}),i.registerSeriesType("windbarb",c),e.windbarb||(e.windbarb=(i,o)=>{let r=0,s=0;for(let t=0,e=i.length;t<e;t++)r+=i[t]*Math.cos(o[t]*n.deg2rad),s+=i[t]*Math.sin(o[t]*n.deg2rad);return[i.reduce((t,e)=>t+e,0)/i.length,Math.atan2(s,r)/n.deg2rad]}),c}),e(t,"masters/modules/windbarb.src.js",[],function(){})});
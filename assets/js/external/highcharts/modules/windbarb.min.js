"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),e(t,"Series/OnSeriesComposition.js",[t["Series/Column/ColumnSeries.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,i){const x=t["prototype"],o=e["prototype"],{defined:y,stableSort:v}=i;var r;{function s(t){return o.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,t)}function n(){x.translate.apply(this);const o=this;var t=o.options,e=o.chart;const r=o.points;var i=t.onSeries;const s=(i=i&&e.get(i))&&i.options.step,n=i&&i.points,a=e.inverted,l=o.xAxis,p=o.yAxis;e=r.length-1;let h,u=(t=t.onKey||"y",n&&n.length),c=0,d,f,b,g;if(i&&i.visible&&u){c=(i.pointXOffset||0)+(i.barW||0)/2;var m=i.currentDataGrouping;for(f=n[u-1].x+(m?m.totalRange:0),v(r,(t,e)=>t.x-e.x),t="plot"+t[0].toUpperCase()+t.substr(1);u--&&r[e]&&(d=n[u],(m=r[e]).y=d.y,!(d.x<=m.x&&void 0!==d[t]&&(m.x<=f&&(m.plotY=d[t],d.x<m.x&&!s&&(b=n[u+1])&&void 0!==b[t]&&(g=(m.x-d.x)/(b.x-d.x),m.plotY+=g*(b[t]-d[t]),m.y+=g*(b.y-d.y))),e--,u++,e<0))););}r.forEach((t,e)=>{let i;t.plotX+=c,void 0!==t.plotY&&!a||(0<=t.plotX&&t.plotX<=l.len?a?(t.plotY=l.translate(t.x,0,1,0,1),t.plotX=y(t.y)?p.translate(t.y,0,0,0,1):0):t.plotY=(l.opposite?0:o.yAxis.len)+l.offset:t.shapeArgs={}),(h=r[e-1])&&h.plotX===t.plotX&&(void 0===h.stackIndex&&(h.stackIndex=0),i=h.stackIndex+1),t.stackIndex=i}),this.onSeries=i}t=r=r||{};const a=[];t.compose=function(t){if(i.pushUnique(a,t)){const e=t.prototype;e.getPlotBox=s,e.translate=n}return t},t.getPlotBox=s,t.translate=n}return r}),e(t,"Series/Windbarb/WindbarbPoint.js",[t["Core/Utilities.js"],t["Series/Column/ColumnSeries.js"]],function(t,e){const i=t["isNumber"];class o extends e.prototype.pointClass{constructor(){super(...arguments),this.series=this.options=this.direction=this.beaufortLevel=this.beaufort=void 0}isValid(){return i(this.value)&&0<=this.value}}return o}),e(t,"Series/Windbarb/WindbarbSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Globals.js"],t["Series/OnSeriesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Windbarb/WindbarbPoint.js"]],function(t,e,n,r,i,o,s){const a=t["animObject"],{series:l,seriesTypes:{column:p}}=i,{extend:h,merge:u,pick:c}=o;class d extends p{constructor(){super(...arguments),this.points=this.options=this.data=void 0}static registerApproximation(){e.windbarb||(e.windbarb=function(t,e){let i=0,o=0,r,s=t.length;for(r=0;r<s;r++)i+=t[r]*Math.cos(e[r]*n.deg2rad),o+=t[r]*Math.sin(e[r]*n.deg2rad);return[t.reduce(function(t,e){return t+e},0)/t.length,Math.atan2(o,i)/n.deg2rad]})}init(t,e){d.registerApproximation(),l.prototype.init.call(this,t,e)}pointAttribs(t,e){var i=this.options;t=t.color||this.color;let o=this.options.lineWidth;return e&&(t=i.states[e].color||t,o=(i.states[e].lineWidth||o)+(i.states[e].lineWidthPlus||0)),{stroke:t,"stroke-width":o}}windArrow(t){let e=1.943844*t.value,i,o=this.options.vectorLength/20,r=-10;if(t.isNull)return[];if(0===t.beaufortLevel)return this.chart.renderer.symbols.circle(-10*o,-10*o,20*o,20*o);if(t=[["M",0,7*o],["L",-1.5*o,7*o],["L",0,10*o],["L",1.5*o,7*o],["L",0,7*o],["L",0,-10*o]],0<(i=(e-e%50)/50))for(;i--;)t.push(-10===r?["L",0,r*o]:["M",0,r*o],["L",5*o,r*o+2],["L",0,r*o+4]),e-=50,r+=7;if(0<(i=(e-e%10)/10))for(;i--;)t.push(-10===r?["L",0,r*o]:["M",0,r*o],["L",7*o,r*o]),e-=10,r+=3;if(0<(i=(e-e%5)/5))for(;i--;)t.push(-10===r?["L",0,r*o]:["M",0,r*o],["L",4*o,r*o]),e-=5,r+=3;return t}drawPoints(){const o=this.chart,r=this.yAxis,s=o.inverted,n=this.options.vectorLength/2;this.points.forEach(function(t){var e=t.plotX,i=t.plotY;!1===this.options.clip||o.isInsidePlot(e,0)?(t.graphic||(t.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+c(t.colorIndex,t.series.colorIndex))),t.graphic.attr({d:this.windArrow(t),translateX:e+this.options.xOffset,translateY:i+this.options.yOffset,rotation:t.direction}),this.chart.styledMode||t.graphic.attr(this.pointAttribs(t))):t.graphic&&(t.graphic=t.graphic.destroy()),t.tooltipPos=[e+this.options.xOffset+(s&&!this.onSeries?n:0),i+this.options.yOffset-(s?0:n+r.pos-o.plotTop)]},this)}animate(t){t?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},a(this.options.animation))}markerAttribs(t,e){return{}}getExtremes(){return{}}shouldShowTooltip(t,e,i={}){return i.ignoreX=this.chart.inverted,i.ignoreY=!i.ignoreX,super.shouldShowTooltip(t,e,i)}}return d.defaultOptions=u(p.defaultOptions,{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0}),r.compose(d),h(d.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane".split(";"),invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:s,trackerGroups:["markerGroup"],translate:function(){const i=this.beaufortFloor,o=this.beaufortName;r.translate.call(this),this.points.forEach(function(t){let e=0;for(;e<i.length&&!(i[e]>t.value);e++);t.beaufortLevel=e-1,t.beaufort=o[e-1]})}}),d.registerApproximation(),i.registerSeriesType("windbarb",d),d}),e(t,"masters/modules/windbarb.src.js",[],function(){})});
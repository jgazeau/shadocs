!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(n){"use strict";var e=n?n._modules:{};function t(e,t,a,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,a),"function"==typeof CustomEvent&&n.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){let{prototype:{pointClass:a}}=e.seriesTypes["sankey"],{pInt:o,wrap:d}=t;return class extends a{getDataLabelPath(e){let t=this,a=t.series.chart.renderer,s=t.shapeArgs,n=t.angle<0||t.angle>Math.PI,r=s.start||0,i=s.end||0;return t.dataLabelPath?(t.dataLabelPath=t.dataLabelPath.destroy(),delete t.dataLabelPath):d(e,"destroy",function(e){return t.dataLabelPath&&(t.dataLabelPath=t.dataLabelPath.destroy()),e.call(this)}),t.dataLabelPath=a.arc({open:!0,longArc:Math.abs(Math.abs(r)-Math.abs(i))<Math.PI?0:1}).attr({x:s.x,y:s.y,r:(s.r||0)+o(e.options?.distance||0),start:n?r:i,end:n?i:r,clockwise:+n}).add(a.defs),t.dataLabelPath}isValid(){return!0}}}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"],e["Core/Renderer/SVG/SVGElement.js"],e["Extensions/TextPath.js"]],function(e,t,a,s,n,r,i,o,d){let l=e["animObject"],f=s["deg2rad"],{pie:h,sankey:c}=r.seriesTypes,{extend:p,merge:u,relativeLength:g}=i;d.compose(o);class y extends c{animate(e){if(!e){let a=l(this.options.animation).duration/2/this.nodes.length,s=0;for(let t of this.nodes){let e=t.graphic;e&&(e.attr({opacity:0}),setTimeout(()=>{t.graphic&&t.graphic.animate({opacity:1},{duration:a})},a*s++))}for(var t of this.points){let e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)}}}createNode(e){let i=super.createNode(e);return i.getSum=()=>i.linksFrom.concat(i.linksTo).reduce((e,t)=>e+t.weight,0),i.offset=t=>{let a=e=>e.fromNode===i?e.toNode:e.fromNode,s=0,n=i.linksFrom.concat(i.linksTo),r;n.sort((e,t)=>a(e).index-a(t).index);for(let e=0;e<n.length;e++)if(a(n[e]).index>i.index){n=n.slice(0,e).reverse().concat(n.slice(e).reverse()),r=!0;break}r||n.reverse();for(let e=0;e<n.length;e++){if(n[e]===t)return s;s+=n[e].weight}},i}createNodeColumns(){let e=[n.compose([],this)];for(var t of this.nodes)t.column=0,e[0].push(t);return e}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){let h=this.options,c=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),n=this.getCenter(),p=(h.startAngle-90)*f,e=h.borderRadius,r="object"==typeof e?e.radius:e;for(var u of(super.translate(),this.nodeColumns[0]))if(u.sum){let e=u.shapeArgs,o=n[0],d=n[1],t=n[2]/2,l=t-g(("auto"===h.nodeWidth?20:h.nodeWidth)||0,t),a=p+c*(e.y||0),s=p+c*((e.y||0)+(e.height||0));for(let i of(u.angle=a+(s-a)/2,u.shapeType="arc",u.shapeArgs={x:o,y:d,r:t,innerR:l,start:a,end:s,borderRadius:r},u.dlBox={x:o+Math.cos((a+s)/2)*(t+l)/2,y:d+Math.sin((a+s)/2)*(t+l)/2,width:1,height:1},u.linksFrom))if(i.linkBase){let n,r;var y=i.linkBase.map((e,t)=>{var e=c*e,a=Math.cos(p+e)*(1+l),s=Math.sin(p+e)*(1+l);return n=h.curveFactor||0,(r=Math.abs(i.linkBase[3-t]*c-e))>Math.PI&&(r=2*Math.PI-r),(r*=l)<l&&(n*=r/l),{x:o+a,y:d+s,cpX:o+(1-n)*a,cpY:d+(1-n)*s}});i.shapeArgs={d:[["M",y[0].x,y[0].y],["A",l,l,0,0,1,y[1].x,y[1].y],["C",y[1].cpX,y[1].cpY,y[2].cpX,y[2].cpY,y[2].x,y[2].y],["A",l,l,0,0,1,y[3].x,y[3].y],["C",y[3].cpX,y[3].cpY,y[0].cpX,y[0].cpY,y[0].x,y[0].y]]}}}}}return y.defaultOptions=u(c.defaultOptions,a),p(y.prototype,{orderNodes:!1,getCenter:h.prototype.getCenter}),y.prototype.pointClass=t,r.registerSeriesType("dependencywheel",y),y}),t(e,"masters/modules/dependency-wheel.src.js",[e["Core/Globals.js"]],function(e){return e})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,n,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,n),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/DependencyWheel/DependencyWheelPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var o,n,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=e.wrap;return n=t.seriesTypes.sankey.prototype.pointClass,i(r,n),r.prototype.getDataLabelPath=function(e){var n=this,t=this.series.chart.renderer,o=this.shapeArgs,i=this.angle<0||this.angle>Math.PI,r=o.start||0,a=o.end||0;return this.dataLabelPath?(this.dataLabelPath=this.dataLabelPath.destroy(),delete this.dataLabelPath):s(e,"destroy",function(t){return n.dataLabelPath&&(n.dataLabelPath=n.dataLabelPath.destroy()),t.call(e)}),this.dataLabelPath=t.arc({open:!0,longArc:Math.abs(Math.abs(r)-Math.abs(a))<Math.PI?0:1}).attr({x:o.x,y:o.y,r:o.r+(this.dataLabel.options.distance||0),start:i?r:a,end:i?a:r,clockwise:+i}).add(t.defs)},r.prototype.isValid=function(){return!0},r;function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.angle=void 0,t.fromNode=void 0,t.index=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.shapeArgs=void 0,t.toNode=void 0,t}}),e(t,"Series/DependencyWheel/DependencyWheelSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/DependencyWheel/DependencyWheelPoint.js"],t["Core/Globals.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,n,o,i,r){var a,s,c=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=t.animObject,l=n.deg2rad,f=(t=(n=i.seriesTypes).pie,n.sankey),p=(n=r.extend,r.merge);function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.nodeColumns=void 0,t.nodes=void 0,t.points=void 0,t}return c(d,s=f),d.prototype.animate=function(t){var o;t||(o=h(this.options.animation).duration/2/this.nodes.length,this.nodes.forEach(function(t,e){var n=t.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){t.graphic&&t.graphic.animate({opacity:1},{duration:o})},o*e))},this),this.points.forEach(function(t){var e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)},this))},d.prototype.createNode=function(t){var a=f.prototype.createNode.call(this,t);return a.getSum=function(){return a.linksFrom.concat(a.linksTo).reduce(function(t,e){return t+e.weight},0)},a.offset=function(t){function n(t){return t.fromNode===a?t.toNode:t.fromNode}var e,o=0;for((i=a.linksFrom.concat(a.linksTo)).sort(function(t,e){return n(t).index-n(e).index}),e=0;e<i.length;e++)if(n(i[e]).index>a.index){var i=i.slice(0,e).reverse().concat(i.slice(e).reverse()),r=!0;break}for(r||i.reverse(),e=0;e<i.length;e++){if(i[e]===t)return o;o+=i[e].weight}},a},d.prototype.createNodeColumns=function(){var e=[o.compose([],this)];return this.nodes.forEach(function(t){t.column=0,e[0].push(t)}),e},d.prototype.getNodePadding=function(){return this.options.nodePadding/Math.PI},d.prototype.translate=function(){var p=this.options,d=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),i=this.getCenter(),u=(p.startAngle-90)*l;f.prototype.translate.call(this),this.nodeColumns[0].forEach(function(t){var s,c,e,h,n,o;t.sum&&(o=t.shapeArgs,s=i[0],c=i[1],e=i[2]/2,h=e-p.nodeWidth,n=u+d*(o.y||0),o=u+d*((o.y||0)+(o.height||0)),t.angle=n+(o-n)/2,t.shapeType="arc",t.shapeArgs={x:s,y:c,r:e,innerR:h,start:n,end:o},t.dlBox={x:s+Math.cos((n+o)/2)*(e+h)/2,y:c+Math.sin((n+o)/2)*(e+h)/2,width:1,height:1},t.linksFrom.forEach(function(r){var a,t;r.linkBase&&(t=r.linkBase.map(function(t,e){t*=d;var n=Math.cos(u+t)*(1+h),o=Math.sin(u+t)*(1+h),i=p.curveFactor||0;return(a=Math.abs(r.linkBase[3-e]*d-t))>Math.PI&&(a=2*Math.PI-a),(a*=h)<h&&(i*=a/h),{x:s+n,y:c+o,cpX:s+(1-i)*n,cpY:c+(1-i)*o}}),r.shapeArgs={d:[["M",t[0].x,t[0].y],["A",h,h,0,0,1,t[1].x,t[1].y],["C",t[1].cpX,t[1].cpY,t[2].cpX,t[2].cpY,t[2].x,t[2].y],["A",h,h,0,0,1,t[3].x,t[3].y],["C",t[3].cpX,t[3].cpY,t[0].cpX,t[0].cpY,t[0].x,t[0].y]]})}))})},d.defaultOptions=p(f.defaultOptions,{center:[null,null],curveFactor:.6,startAngle:0}),n((r=d).prototype,{orderNodes:!1,getCenter:t.prototype.getCenter}),r.prototype.pointClass=e,i.registerSeriesType("dependencywheel",r),r}),e(t,"masters/modules/dependency-wheel.src.js",[],function(){})});
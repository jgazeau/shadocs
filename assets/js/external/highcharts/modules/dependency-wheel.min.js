!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,s,i){e.hasOwnProperty(t)||(e[t]=i.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){let{prototype:{pointClass:s}}=e.seriesTypes["sankey"],{pInt:r,wrap:d}=t;return class extends s{constructor(){super(...arguments),this.angle=void 0,this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.shapeArgs=void 0,this.toNode=void 0}getDataLabelPath(e){let t=this,s=t.series.chart.renderer,i=t.shapeArgs,n=t.angle<0||t.angle>Math.PI,a=i.start||0,o=i.end||0;return t.dataLabelPath?(t.dataLabelPath=t.dataLabelPath.destroy(),delete t.dataLabelPath):d(e,"destroy",function(e){return t.dataLabelPath&&(t.dataLabelPath=t.dataLabelPath.destroy()),e.call(this)}),t.dataLabelPath=s.arc({open:!0,longArc:Math.abs(Math.abs(a)-Math.abs(o))<Math.PI?0:1}).attr({x:i.x,y:i.y,r:(i.r||0)+r(e.options?.distance||0),start:n?a:o,end:n?o:a,clockwise:+n}).add(s.defs),t.dataLabelPath}isValid(){return!0}}}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,s,i,n,a,o){let r=e["animObject"],d=i["deg2rad"],{pie:h,sankey:l}=a.seriesTypes,{extend:c,merge:p}=o;class u extends l{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}animate(e){if(!e){let e=r(this.options.animation).duration,s=e/2/this.nodes.length,i=0;for(let t of this.nodes){let e=t.graphic;e&&(e.attr({opacity:0}),setTimeout(()=>{t.graphic&&t.graphic.animate({opacity:1},{duration:s})},s*i++))}for(var t of this.points){let e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)}}}createNode(e){let o=super.createNode(e);return o.getSum=()=>o.linksFrom.concat(o.linksTo).reduce((e,t)=>e+t.weight,0),o.offset=t=>{let s=e=>e.fromNode===o?e.toNode:e.fromNode,i=0,n=o.linksFrom.concat(o.linksTo),a;n.sort((e,t)=>s(e).index-s(t).index);for(let e=0;e<n.length;e++)if(s(n[e]).index>o.index){n=n.slice(0,e).reverse().concat(n.slice(e).reverse()),a=!0;break}a||n.reverse();for(let e=0;e<n.length;e++){if(n[e]===t)return i;i+=n[e].weight}},o}createNodeColumns(){let e=[n.compose([],this)];for(var t of this.nodes)t.column=0,e[0].push(t);return e}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){let l=this.options,c=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),n=this.getCenter(),p=(l.startAngle-90)*d,e=l.borderRadius,a="object"==typeof e?e.radius:e;for(var u of(super.translate(),this.nodeColumns[0]))if(u.sum){let e=u.shapeArgs,r=n[0],d=n[1],t=n[2]/2,h=t-l.nodeWidth,s=p+c*(e.y||0),i=p+c*((e.y||0)+(e.height||0));for(let o of(u.angle=s+(i-s)/2,u.shapeType="arc",u.shapeArgs={x:r,y:d,r:t,innerR:h,start:s,end:i,borderRadius:a},u.dlBox={x:r+Math.cos((s+i)/2)*(t+h)/2,y:d+Math.sin((s+i)/2)*(t+h)/2,width:1,height:1},u.linksFrom))if(o.linkBase){let n,a;var y=o.linkBase.map((e,t)=>{var e=c*e,s=Math.cos(p+e)*(1+h),i=Math.sin(p+e)*(1+h);return n=l.curveFactor||0,(a=Math.abs(o.linkBase[3-t]*c-e))>Math.PI&&(a=2*Math.PI-a),(a*=h)<h&&(n*=a/h),{x:r+s,y:d+i,cpX:r+(1-n)*s,cpY:d+(1-n)*i}});o.shapeArgs={d:[["M",y[0].x,y[0].y],["A",h,h,0,0,1,y[1].x,y[1].y],["C",y[1].cpX,y[1].cpY,y[2].cpX,y[2].cpY,y[2].x,y[2].y],["A",h,h,0,0,1,y[3].x,y[3].y],["C",y[3].cpX,y[3].cpY,y[0].cpX,y[0].cpY,y[0].x,y[0].y]]}}}}}return u.defaultOptions=p(l.defaultOptions,s),c(u.prototype,{orderNodes:!1,getCenter:h.prototype.getCenter}),u.prototype.pointClass=t,a.registerSeriesType("dependencywheel",u),u}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});
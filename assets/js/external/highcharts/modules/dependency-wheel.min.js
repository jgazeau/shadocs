"use strict";!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(e,t,s,n){e.hasOwnProperty(t)||(e[t]=n.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e=e?e._modules:{},"Series/DependencyWheel/DependencyWheelPoint.js",[e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t){({sankey:{prototype:{pointClass:e}}}=e.seriesTypes);const a=t["wrap"];class s extends e{constructor(){super(...arguments),this.toNode=this.shapeArgs=this.series=this.options=this.linksTo=this.linksFrom=this.index=this.fromNode=this.angle=void 0}getDataLabelPath(t){const e=this.series.chart.renderer,s=this.shapeArgs,n=this.angle<0||this.angle>Math.PI,i=s.start||0,o=s.end||0;return this.dataLabelPath?(this.dataLabelPath=this.dataLabelPath.destroy(),delete this.dataLabelPath):a(t,"destroy",e=>(this.dataLabelPath&&(this.dataLabelPath=this.dataLabelPath.destroy()),e.call(t))),this.dataLabelPath=e.arc({open:!0,longArc:Math.abs(Math.abs(i)-Math.abs(o))<Math.PI?0:1}).attr({x:s.x,y:s.y,r:s.r+(this.dataLabel.options.distance||0),start:n?i:o,end:n?o:i,clockwise:+n}).add(e.defs)}isValid(){return!0}}return s}),t(e,"Series/DependencyWheel/DependencyWheelSeriesDefaults.js",[],function(){return{center:[null,null],curveFactor:.6,startAngle:0,dataLabels:{textPath:{enabled:!1,attributes:{dy:5}}}}}),t(e,"Series/DependencyWheel/DependencyWheelSeries.js",[e["Core/Animation/AnimationUtilities.js"],e["Series/DependencyWheel/DependencyWheelPoint.js"],e["Series/DependencyWheel/DependencyWheelSeriesDefaults.js"],e["Core/Globals.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,s,n,i,o,a){const r=e["animObject"],h=n["deg2rad"],{pie:c,sankey:u}=o["seriesTypes"],{extend:d,merge:l}=a;class p extends u{constructor(){super(...arguments),this.points=this.nodes=this.nodeColumns=this.options=this.data=void 0}animate(n){if(!n){const n=r(this.options.animation).duration/2/this.nodes.length;this.nodes.forEach(function(e,t){const s=e.graphic;s&&(s.attr({opacity:0}),setTimeout(function(){e.graphic&&e.graphic.animate({opacity:1},{duration:n})},n*t))},this),this.points.forEach(function(e){const t=e.graphic;!e.isNode&&t&&t.attr({opacity:0}).animate({opacity:1},this.options.animation)},this)}}createNode(e){const a=u.prototype.createNode.call(this,e);return a.getSum=function(){return a.linksFrom.concat(a.linksTo).reduce(function(e,t){return e+t.weight},0)},a.offset=function(e){function s(e){return e.fromNode===a?e.toNode:e.fromNode}let t=0,n,i=a.linksFrom.concat(a.linksTo),o;for(i.sort(function(e,t){return s(e).index-s(t).index}),n=0;n<i.length;n++)if(s(i[n]).index>a.index){i=i.slice(0,n).reverse().concat(i.slice(n).reverse()),o=!0;break}for(o||i.reverse(),n=0;n<i.length;n++){if(i[n]===e)return t;t+=i[n].weight}},a}createNodeColumns(){const t=[i.compose([],this)];return this.nodes.forEach(function(e){e.column=0,t[0].push(e)}),t}getNodePadding(){return this.options.nodePadding/Math.PI}translate(){const d=this.options,l=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),i=this.getCenter(),p=(d.startAngle-90)*h,e=d.borderRadius,o="object"==typeof e?e.radius:e;u.prototype.translate.call(this),this.nodeColumns[0].forEach(function(e){if(e.sum){var t=e.shapeArgs;const r=i[0],h=i[1],s=i[2]/2,c=s-d.nodeWidth,n=p+l*(t.y||0);t=p+l*((t.y||0)+(t.height||0)),e.angle=n+(t-n)/2,e.shapeType="arc",e.shapeArgs={x:r,y:h,r:s,innerR:c,start:n,end:t,borderRadius:o},e.dlBox={x:r+Math.cos((n+t)/2)*(s+c)/2,y:h+Math.sin((n+t)/2)*(s+c)/2,width:1,height:1},e.linksFrom.forEach(function(a){if(a.linkBase){let o;var e=a.linkBase.map(function(e,t){e*=l;let s=Math.cos(p+e)*(1+c),n=Math.sin(p+e)*(1+c),i=d.curveFactor||0;return(o=Math.abs(a.linkBase[3-t]*l-e))>Math.PI&&(o=2*Math.PI-o),(o*=c)<c&&(i*=o/c),{x:r+s,y:h+n,cpX:r+(1-i)*s,cpY:h+(1-i)*n}});a.shapeArgs={d:[["M",e[0].x,e[0].y],["A",c,c,0,0,1,e[1].x,e[1].y],["C",e[1].cpX,e[1].cpY,e[2].cpX,e[2].cpY,e[2].x,e[2].y],["A",c,c,0,0,1,e[3].x,e[3].y],["C",e[3].cpX,e[3].cpY,e[0].cpX,e[0].cpY,e[0].x,e[0].y]]}}})}})}}return p.defaultOptions=l(u.defaultOptions,s),d(p.prototype,{orderNodes:!1,getCenter:c.prototype.getCenter}),p.prototype.pointClass=t,o.registerSeriesType("dependencywheel",p),p}),t(e,"masters/modules/dependency-wheel.src.js",[],function(){})});
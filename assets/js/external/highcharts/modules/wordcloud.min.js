"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/wordcloud",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/DrawPointUtilities.js",[t["Core/Utilities.js"]],function(t){return{draw:function(t,e){const{animatableAttribs:i,onComplete:o,css:n,renderer:r}=e,a=t.series&&t.series.chart.hasRendered?void 0:t.series&&t.series.options.animation;let s=t.graphic;if(e.attribs=Object.assign(Object.assign({},e.attribs),{class:t.getClassName()})||{},t.shouldDraw())s||(t.graphic=s="text"===e.shapeType?r.text():r[e.shapeType](e.shapeArgs||{}),s.add(e.group)),n&&s.css(n),s.attr(e.attribs).animate(i,!e.isNew&&a,o);else if(s){const e=()=>{t.graphic=s=s&&s.destroy(),"function"==typeof o&&o()};Object.keys(i).length?s.animate(i,void 0,()=>e()):e()}}}}),e(t,"Series/Wordcloud/WordcloudPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){({column:{prototype:{pointClass:t}}}=t.seriesTypes),e=e.extend;class i extends t{constructor(){super(...arguments),this.series=this.rect=this.polygon=this.options=this.dimensions=void 0}isValid(){return!0}}return e(i.prototype,{weight:1}),i}),e(t,"Series/Wordcloud/WordcloudUtils.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e){function s(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function n(t){let e,n=t.axes||[];return n.length||(n=[],e=e=t.concat([t[0]]),e.reduce(function(t,e){t=t,o=e[0]-t[0];const i=[-(t=e[1]-t[1]),o];var o;return u(n,t=>t[0]===i[0]&&t[1]===i[1])||n.push(i),e}),t.axes=n),n}function r(t,e){return t=t.map(t=>t[0]*e[0]+t[1]*e[1]),{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}}function l(i,o){var t=n(i),e=n(o),t=t.concat(e);return!u(t,t=>{var e=r(i,t);return!!((t=r(o,t)).min>e.max||t.max<e.min)})}function g(i,t){function o(t){let e=s(n,t.rect);return e=e&&(i.rotation%90||t.rotation%90)?l(r,t.polygon):e}let e=!1,n=i.rect,r=i.polygon,a=i.lastCollidedWith;return a&&!(e=o(a))&&delete i.lastCollidedWith,e=e||!!u(t,function(t){var e=o(t);return e&&(i.lastCollidedWith=t),e})}function i(t,e){e=4*t;let i=Math.ceil((Math.sqrt(e)-1)/2),o=2*i+1,n=Math.pow(o,2),r=!1;return--o,t<=1e4&&("boolean"==typeof r&&e>=n-o&&(r={x:i-(n-e),y:-i}),n-=o,"boolean"==typeof r&&e>=n-o&&(r={x:-i,y:-i+(n-e)}),n-=o,(r="boolean"==typeof r?e>=n-o?{x:-i+(n-e),y:i}:{x:i,y:i-(n-e-o)}:r).x*=5,r.y*=5),r}function a(t,e){return e=c(e)?e:14,e=Math.pow(10,e),Math.round(t*e)/e}function o(t,e){var i=t[0],o=(t=t[1],h*-e);return[a(i*(e=Math.cos(o))-t*(o=Math.sin(o))),a(i*o+t*e)]}function d(t,e,i){return[(t=o([t[0]-e[0],t[1]-e[1]],i))[0]+e[0],t[1]+e[1]]}const h=t["deg2rad"],{extend:m,find:u,isNumber:c,isObject:f,merge:p}=e;return{archimedeanSpiral:function(t,e){var i=e.field,o=(e=!1,i=i.width*i.width+i.height*i.height,.8*t);return t<=1e4&&(e={x:o*Math.cos(o),y:o*Math.sin(o)},Math.min(Math.abs(e.x),Math.abs(e.y))<i||(e=!1)),e},extendPlayingField:function(t,e){var i,o,n;return f(t)&&f(e)&&(o=e.bottom-e.top,n=e.right-e.left,e=t.ratioX,o=o*(i=t.ratioY)<n*e?n:o,t=p(t,{width:t.width+o*e*2,height:t.height+o*i*2})),t},getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,e){var i=e[0];return e=e[1],t.left=Math.min(i,t.left),t.right=Math.max(i,t.right),t.bottom=Math.max(e,t.bottom),t.top=Math.min(e,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPlayingField:function(t,e,i){i=i.reduce(function(t,e){e=e.dimensions;var i=Math.max(e.width,e.height);return t.maxHeight=Math.max(t.maxHeight,e.height),t.maxWidth=Math.max(t.maxWidth,e.width),t.area+=i*i,t},{maxHeight:0,maxWidth:0,area:0});var o=e<t?t/e:1;return{width:(i=Math.max(i.maxHeight,i.maxWidth,.85*Math.sqrt(i.area)))*o,height:i*(t=t<e?e/t:1),ratioX:o,ratioY:t}},getPolygon:function(t,e,i,o,n){const r=[t,e],a=t-i/2;return t+=i/2,i=e-o/2,e+=o/2,[[a,i],[t,i],[t,e],[a,e]].map(function(t){return d(t,r,-n)})},getRandomPosition:function(t){return Math.round(t*(Math.random()+.5)/2)},getRotation:function(t,e,i,o){let n=!1;return n=c(t)&&c(e)&&c(i)&&c(o)&&0<t&&-1<e&&i<o?i+e%t*((o-i)/(t-1||1)):n},getScale:function(t,e,i){var o=2*Math.max(Math.abs(i.top),Math.abs(i.bottom));return i=2*Math.max(Math.abs(i.left),Math.abs(i.right)),Math.min(0<i?1/i*t:1,0<o?1/o*e:1)},getSpiral:function(t,e){let i,o=[];for(i=1;i<1e4;i++)o.push(t(i,e));return function(t){return t<=1e4&&o[t-1]}},intersectionTesting:function(t,e){let i=e.placed,o=e.field,n=e.rectangle,r=e.polygon,a=e.spiral,s=1,l={x:0,y:0},d=t.rect=m({},n);for(t.polygon=r,t.rotation=e.rotation;!1!==l&&(g(t,i)||(h=d,p=c=u=void 0,u=o.width/2,c=-o.height/2,p=o.height/2,!(-o.width/2<h.left&&u>h.right&&c<h.top&&p>h.bottom)));)l=a(s),f(l)&&(d.left=n.left+l.x,d.right=n.right+l.x,d.top=n.top+l.y,d.bottom=n.bottom+l.y,t.polygon=function(e,i,t){return t.map(function(t){return[t[0]+e,t[1]+i]})}(l.x,l.y,r)),s++;var h,u,c,p;return l},isPolygonsColliding:l,isRectanglesIntersecting:s,rectangularSpiral:function(t,e){return t=i(t),e=e.field,t&&(t.x*=e.ratioX,t.y*=e.ratioY),t},rotate2DToOrigin:o,rotate2DToPoint:d,squareSpiral:i,updateFieldBoundaries:function(t,e){return(!c(t.left)||t.left>e.left)&&(t.left=e.left),(!c(t.right)||t.right<e.right)&&(t.right=e.right),(!c(t.top)||t.top>e.top)&&(t.top=e.top),(!c(t.bottom)||t.bottom<e.bottom)&&(t.bottom=e.bottom),t}}}),e(t,"Series/Wordcloud/WordcloudSeries.js",[t["Series/DrawPointUtilities.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Wordcloud/WordcloudPoint.js"],t["Series/Wordcloud/WordcloudUtils.js"]],function(S,i,e,t,o,n,r){const a=i["noop"],{column:s}=t["seriesTypes"],{extend:v,isArray:l,isNumber:P,isObject:A,merge:d}=o,{archimedeanSpiral:h,extendPlayingField:j,getBoundingBoxFromPolygon:F,getPlayingField:C,getPolygon:W,getRandomPosition:u,getRotation:c,getScale:T,getSpiral:O,intersectionTesting:D,isPolygonsColliding:p,rectangularSpiral:g,rotate2DToOrigin:m,rotate2DToPoint:f,squareSpiral:x,updateFieldBoundaries:U}=r;class y extends s{constructor(){super(...arguments),this.points=this.options=this.data=void 0}bindAxes(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};e.prototype.bindAxes.call(this),v(this.yAxis.options,t),v(this.xAxis.options,t)}pointAttribs(t,e){return delete(t=i.seriesTypes.column.prototype.pointAttribs.call(this,t,e)).stroke,delete t["stroke-width"],t}deriveFontSize(t,e,i){return t=P(t)?t:0,e=P(e)?e:1,i=P(i)?i:1,Math.floor(Math.max(i,t*e))}drawPoints(){let l=this,d=l.hasRendered;var t=l.xAxis;let e=l.yAxis,h=l.group,u=l.options,c=u.animation,p=u.allowExtendPlayingField,g=l.chart.renderer,i=g.text().add(h),m=[],f=l.placementStrategy[u.placementStrategy],x,y=u.rotation,o=l.points.map(function(t){return t.weight}),b=Math.max.apply(null,o),w=l.points.concat().sort(function(t,e){return e.weight-t.weight}),M;l.group.attr({scaleX:1,scaleY:1}),w.forEach(function(t){var e=l.deriveFontSize(1/b*t.weight,u.maxFontSize,u.minFontSize),e=v({fontSize:e+"px"},u.style);i.css(e).attr({x:0,y:0,text:t.name}),e=i.getBBox(!0),t.dimensions={height:e.height,width:e.width}}),M=C(t.len,e.len,w),x=O(l.spirals[u.spiral],{field:M}),w.forEach(function(t){var e=l.deriveFontSize(1/b*t.weight,u.maxFontSize,u.minFontSize),e=v({fontSize:e+"px"},u.style);let i=f(t,{data:w,field:M,placed:m,rotation:y}),o=v(l.pointAttribs(t,t.selected&&"select"),{align:"center","alignment-baseline":"middle","dominant-baseline":"middle",x:i.x,y:i.y,text:t.name,rotation:P(i.rotation)?i.rotation:void 0}),n=W(i.x,i.y,t.dimensions.width,t.dimensions.height,i.rotation),r=F(n),a=D(t,{rectangle:r,polygon:n,field:M,placed:m,spiral:x,rotation:i.rotation}),s;!a&&p&&(M=j(M,r),a=D(t,{rectangle:r,polygon:n,field:M,placed:m,spiral:x,rotation:i.rotation})),A(a)?(o.x=(o.x||0)+a.x,o.y=(o.y||0)+a.y,r.left+=a.x,r.right+=a.x,r.top+=a.y,r.bottom+=a.y,M=U(M,r),m.push(t),t.isNull=!1,t.isInside=!0):t.isNull=!0,c&&(s={x:o.x,y:o.y},d?(delete o.x,delete o.y):(o.x=0,o.y=0)),S.draw(t,{animatableAttribs:s,attribs:o,css:e,group:h,renderer:g,shapeArgs:void 0,shapeType:"text"})}),i=i.destroy(),t=T(t.len,e.len,M),l.group.attr({scaleX:t,scaleY:t})}hasData(){return A(this)&&!0===this.visible&&l(this.points)&&0<this.points.length}getPlotBox(){var t=this.chart,e=this[(i=t.inverted)?"yAxis":"xAxis"],i=this[i?"xAxis":"yAxis"];return{translateX:(e?e.left:t.plotLeft)+(e?e.len:t.plotWidth)/2,translateY:(i?i.top:t.plotTop)+(i?i.len:t.plotHeight)/2,scaleX:1,scaleY:1}}}return y.defaultOptions=d(s.defaultOptions,{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,cropThreshold:1/0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">‚óè</span> {series.name}: <b>{point.weight}</b><br/>'}}),v(y.prototype,{animate:a,animateDrilldown:a,animateDrillupFrom:a,pointClass:n,setClip:a,placementStrategy:{random:function(t,e){var i=e.field;return e=e.rotation,{x:u(i.width)-i.width/2,y:u(i.height)-i.height/2,rotation:c(e.orientations,t.index,e.from,e.to)}},center:function(t,e){return e=e.rotation,{x:0,y:0,rotation:c(e.orientations,t.index,e.from,e.to)}}},pointArrayMap:["weight"],spirals:{archimedean:h,rectangular:g,square:x},utils:{extendPlayingField:j,getRotation:c,isPolygonsColliding:p,rotate2DToOrigin:m,rotate2DToPoint:f}}),t.registerSeriesType("wordcloud",y),y}),e(t,"masters/modules/wordcloud.src.js",[],function(){})});
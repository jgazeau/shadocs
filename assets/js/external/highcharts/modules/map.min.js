!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,s){t.hasOwnProperty(e)||(t[e]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(t,n){var e;let i=t["parse"],{addEvent:l,extend:h,merge:p,pick:d,splat:s}=n;{t=e=e||{};let r,a=[];function c(){let t=this.options;this.colorAxis=[],t.colorAxis&&(t.colorAxis=s(t.colorAxis),t.colorAxis.map(t=>new r(this,t)))}function u(e){let t=this.chart.colorAxis||[],i=t=>{t=e.allItems.indexOf(t);-1!==t&&(this.destroyItem(e.allItems[t]),e.allItems.splice(t,1))},s=[],o,r;for(t.forEach(function(t){(o=t.options)&&o.showInLegend&&(o.dataClasses&&o.visible?s=s.concat(t.getDataClassLegendSymbols()):o.visible&&s.push(t),t.series.forEach(function(t){t.options.showInLegend&&!o.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){i(t)}):i(t))}))}),r=s.length;r--;)e.allItems.unshift(s[r])}function m(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function g(e){this.chart.colorAxis?.forEach(t=>{t.update({},e.redraw)})}function f(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function b(){let t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function y(t){let e=this,i=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][i]()}),this.series.buildKDTree()}function x(){let i=this,t=this.data.length?this.data:this.points,s=this.options.nullColor,o=this.colorAxis,r=this.colorKey;t.forEach(t=>{var e=t.getNestedProperty(r),e=t.options.color||(t.isNull||null===t.value?s:o&&void 0!==e?o.toColor(e,t):t.color||i.color);e&&t.color!==e&&(t.color=e,"point"===i.options.legendType&&t.legendItem&&t.legendItem.label&&i.chart.legend.colorizeItem(t,t.visible))})}function v(){this.elem.attr("fill",i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)}function M(){this.elem.attr("stroke",i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)}t.compose=function(e,s,i,t,o){if(r=r||e,n.pushUnique(a,s)){let t=s.prototype;t.collectionsWithUpdate.push("colorAxis"),t.collectionsWithInit.colorAxis=[t.addColorAxis],l(s,"afterGetAxes",c);{e=s;let i=e.prototype.createAxis;e.prototype.createAxis=function(t,e){if("colorAxis"!==t)return i.apply(this,arguments);t=new r(this,p(e.axis,{index:this[t].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(t=>{t.series=[]}),this.series.forEach(t=>{t.bindAxes(),t.isDirtyData=!0}),d(e.redraw,!0)&&this.redraw(e.animation),t}}}if(n.pushUnique(a,i)){let t=i.prototype;t.fillSetter=v,t.strokeSetter=M}n.pushUnique(a,t)&&(l(t,"afterGetAllItems",u),l(t,"afterColorizeItem",m),l(t,"afterUpdate",g)),n.pushUnique(a,o)&&(h(o.prototype,{optionalAxis:"colorAxis",translateColors:x}),h(o.prototype.pointClass.prototype,{setVisible:y}),l(o,"afterTranslate",f,{order:1}),l(o,"bindAxes",b))},t.pointSetVisible=y}return e}),e(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0}}),e(t,"Core/Axis/Color/ColorAxisLike.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(t,e){let p=t["parse"],d=e["merge"];return t={initDataClasses:function(t){let i=this.chart,e=this.legendItem=this.legendItem||{},s=this.options,o=t.dataClasses||[],r,a,n=i.options.chart.colorCount,l=0,h;this.dataClasses=a=[],e.labels=[];for(let t=0,e=o.length;t<e;++t)r=d(r=o[t]),a.push(r),!i.styledMode&&r.color||("category"===s.dataClassColor?(i.styledMode||(n=(h=i.options.colors||[]).length,r.color=h[l]),r.colorIndex=l,++l===n&&(l=0)):r.color=p(s.minColor).tweenTo(p(s.maxColor),e<2?.5:t/(e-1)))},initStops:function(){let t=this.options,i=this.stops=t.stops||[[0,t.minColor||""],[1,t.maxColor||""]];for(let t=0,e=i.length;t<e;++t)i[t].color=p(i[t][1])},normalizedValue:function(t){var e=this.max||0,i=this.min||0;return 1-(e-(t=this.logarithmic?this.logarithmic.log2lin(t):t))/(e-i||1)},toColor:function(t,e){let i,s,o,r,a,n;var l=this.dataClasses,h=this.stops;if(l){for(n=l.length;n--;)if(s=(a=l[n]).from,o=a.to,(void 0===s||t>=s)&&(void 0===o||t<=o)){r=a.color,e&&(e.dataClass=n,e.colorIndex=a.colorIndex);break}}else{for(i=this.normalizedValue(t),n=h.length;n--&&!(i>h[n][0]););s=h[n]||h[n+1],i=1-((o=h[n+1]||s)[0]-i)/(o[0]-s[0]||1),r=s.color.tweenTo(o.color,i)}return r}},t}),e(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Axis/Color/ColorAxisLike.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,o,e,i,u,s,r){let d=s["series"],{extend:m,fireEvent:g,isArray:a,isNumber:n,merge:l,pick:f}=r;class c extends t{static compose(t,e,i,s){o.compose(c,t,e,i,s)}constructor(t,e){super(t,e),this.beforePadding=!1,this.chart=void 0,this.coll="colorAxis",this.dataClasses=void 0,this.options=void 0,this.stops=void 0,this.visible=!0,this.init(t,e)}init(t,e){var i=t.options.legend||{},s=e.layout?"vertical"!==e.layout:"vertical"!==i.layout,o=e.visible,i=l(c.defaultColorAxisOptions,e,{showEmpty:!1,title:null,visible:i.enabled&&!1!==o});this.side=e.side||s?2:1,this.reversed=e.reversed||!s,this.opposite=!s,super.init(t,i,"colorAxis"),this.userOptions=e,a(t.userOptions.colorAxis)&&(t.userOptions.colorAxis[this.index]=e),e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=s,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(t){super.setOptions(t),this.options.crosshair=this.options.marker}setAxisSize(){var t,e,i,s;let o=this.legendItem&&this.legendItem.symbol,r=this.chart,a=r.options.legend||{};o?(this.left=t=o.attr("x"),this.top=e=o.attr("y"),this.width=i=o.attr("width"),this.height=s=o.attr("height"),this.right=r.chartWidth-t-i,this.bottom=r.chartHeight-e-s,this.len=this.horiz?i:s,this.pos=this.horiz?t:e):this.len=(this.horiz?a.symbolWidth:a.symbolHeight)||c.defaultLegendLength}getOffset(){var t=this.legendItem&&this.legendItem.group,i=this.chart.axisOffset[this.side];if(t){this.axisParent=t,super.getOffset();let e=this.chart.legend;e.allItems.forEach(function(t){t instanceof c&&t.drawLegendSymbol(e,t)}),e.render(),this.chart.getMargins(!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i}}setLegendColor(){var t=this.horiz,e=this.reversed,i=e?1:0,e=e?0:1,t=t?[i,0,e,0]:[0,e,0,i];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}}drawLegendSymbol(t,e){let i=e.legendItem||{},s=t.padding,o=t.options,r=this.options.labels,a=f(o.itemDistance,10),n=this.horiz,l=f(o.symbolWidth,n?c.defaultLegendLength:12),h=f(o.symbolHeight,n?12:c.defaultLegendLength),p=f(o.labelPadding,n?16:30);this.setLegendColor(),i.symbol||(i.symbol=this.chart.renderer.symbol("roundedRect",0,t.baseline-11,l,h,{r:o.symbolRadius??3}).attr({zIndex:1}).add(i.group)),i.labelWidth=l+s+(n?a:f(r.x,r.distance)+this.maxLabelLength),i.labelHeight=h+s+(n?p:0)}setState(e){this.series.forEach(function(t){t.setState(e)})}setVisible(){}getSeriesExtremes(){let t=this.series,e,i,s,o,r,a,n=t.length,l,h;for(this.dataMin=1/0,this.dataMax=-1/0;n--;){if(i=(a=t[n]).colorKey=f(a.options.colorKey,a.colorKey,a.pointValKey,a.zoneAxis,"y"),o=a.pointArrayMap,r=a[i+"Min"]&&a[i+"Max"],a[i+"Data"])e=a[i+"Data"];else if(o){if(e=[],s=o.indexOf(i),l=a.yData,0<=s&&l)for(h=0;h<l.length;h++)e.push(f(l[h][s],l[h]))}else e=a.yData;var p;r?(a.minColorValue=a[i+"Min"],a.maxColorValue=a[i+"Max"]):(p=d.prototype.getExtremes.call(a,e),a.minColorValue=p.dataMin,a.maxColorValue=p.dataMax),void 0!==a.minColorValue&&(this.dataMin=Math.min(this.dataMin,a.minColorValue),this.dataMax=Math.max(this.dataMax,a.maxColorValue)),r||d.prototype.applyExtremes.call(a)}}drawCrosshair(t,e){let i;var s=this.legendItem||{},o=e&&e.plotX,r=e&&e.plotY,a=this.pos,n=this.len;e&&((i=this.toPixels(e.getNestedProperty(e.series.colorKey)))<a?i=a-2:i>a+n&&(i=a+n+2),e.plotX=i,e.plotY=this.len-i,super.drawCrosshair(t,e),e.plotX=o,e.plotY=r,this.cross&&!this.cross.addedToColorAxis&&s.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(s.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!=typeof this.crosshair||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(t){var e=this.left,i=t.translatedValue,s=this.top;return n(i)?this.horiz?[["M",i-4,s-6],["L",i+4,s-6],["L",i,s],["Z"]]:[["M",e,i],["L",e-6,i+6],["L",e-6,i-6],["Z"]]:super.getPlotLinePath(t)}update(t,e){let i=this.chart,s=i.legend;this.series.forEach(t=>{t.isDirtyData=!0}),(t.dataClasses&&s.allItems||this.dataClasses)&&this.destroyItems(),super.update(t,e),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),s.colorizeItem(this,!0))}destroyItems(){let t=this.chart,e=this.legendItem||{};if(e.label)t.legend.destroyItem(this);else if(e.labels)for(var i of e.labels)t.legend.destroyItem(i);t.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(t){this.destroyItems(),super.remove(t)}getDataClassLegendSymbols(){let a,n=this,l=n.chart,h=n.legendItem&&n.legendItem.labels||[],t=l.options.legend,p=f(t.valueDecimals,-1),d=f(t.valueSuffix,""),c=i=>n.series.reduce((t,e)=>(t.push(...e.points.filter(t=>t.dataClass===i)),t),[]);return h.length||n.dataClasses.forEach((t,i)=>{let e=t.from,s=t.to,o=l["numberFormatter"],r=!0;a="",void 0===e?a="< ":void 0===s&&(a="> "),void 0!==e&&(a+=o(e,p)+d),void 0!==e&&void 0!==s&&(a+=" - "),void 0!==s&&(a+=o(s,p)+d),h.push(m({chart:l,name:a,options:{},drawLegendSymbol:u.rectangle,visible:!0,isDataClass:!0,setState:t=>{for(var e of c(i))e.setState(t)},setVisible:function(){this.visible=r=n.visible=!r;let t=[];for(var e of c(i))e.setVisible(r),-1===t.indexOf(e.series)&&t.push(e.series);l.legend.colorizeItem(this,r),t.forEach(t=>{g(t,"afterDataClassLegendClick")})}},t))}),h}}return c.defaultColorAxisOptions=e,c.defaultLegendLength=200,c.keepProps=["legendItem"],m(c.prototype,i),Array.prototype.push.apply(t.keepProps,c.keepProps),c}),e(t,"Maps/MapNavigationDefaults.js",[],function(){return{lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}}),e(t,"Maps/MapPointer.js",[t["Core/Utilities.js"]],function(t){var i;let{defined:r,extend:a,pick:n,pushUnique:l,wrap:h}=t;{t=i=i||{};let s,e=[],o=0;function p(t){let e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)}function d(t){let e=this.chart;t=this.normalize(t);var i=r(t.wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail;1<=Math.abs(i)&&(o+=Math.abs(i),s&&clearTimeout(s),s=setTimeout(()=>{o=0},50)),o<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapView&&e.mapView.zoomBy(-(e.options.mapNavigation.mouseWheelSensitivity-1)*i,void 0,[t.chartX,t.chartY],!(Math.abs(i)<1)&&void 0)}function c(t,e,i){let s=this.chart;return e=t.call(this,e,i),s&&s.mapView&&(t=s.mapView.pixelsToLonLat({x:e.chartX-s.plotLeft,y:e.chartY-s.plotTop}))&&a(e,t),e}function u(t,e,i,s,o,r,a){t.call(this,e,i,s,o,r,a),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=s.scaleX>s.scaleY,this.pinchTranslateDirection(!t,e,i,s,o,r,a,t?s.scaleX:s.scaleY))}function m(t){var e=this.chart.options.mapNavigation;e&&n(e.enableTouchZoom,e.enabled)&&(this.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}t.compose=function(t){l(e,t)&&(t=t.prototype,a(t,{onContainerDblClick:p,onContainerMouseWheel:d}),h(t,"normalize",c),h(t,"pinchTranslate",u),h(t,"zoomOption",m))}}return i}),e(t,"Maps/MapSymbols.js",[t["Core/Utilities.js"]],function(t){let a,e=t["pushUnique"],i=[];function s(t,e,i,s,o){var r;return o&&(r=o?.r||0,o.brBoxY=e-r,o.brBoxHeight=s+r),a.roundedRect(t,e,i,s,o)}function o(t,e,i,s,o){var r;return o&&(r=o?.r||0,o.brBoxHeight=s+r),a.roundedRect(t,e,i,s,o)}return{compose:function(t){e(i,t)&&((a=t.prototype.symbols).bottombutton=s,a.topbutton=o)}}}),e(t,"Maps/MapNavigation.js",[t["Core/Defaults.js"],t["Maps/MapNavigationDefaults.js"],t["Maps/MapPointer.js"],t["Maps/MapSymbols.js"],t["Core/Utilities.js"]],function(t,s,o,r,e){let a=t["setOptions"],{addEvent:u,extend:m,merge:g,objectEach:i,pick:n,pushUnique:l}=e,h=[];function f(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}return class p{static compose(t,e,i){o.compose(e),r.compose(i),l(h,t)&&u(t,"beforeRender",function(){this.mapNavigation=new p(this),this.mapNavigation.update()}),l(h,a)&&a(s)}constructor(t){this.navButtonsGroup=void 0,this.chart=t,this.navButtons=[],this.init(t)}init(t){this.chart=t}update(t){function e(t){this.handler.call(h,t),f(t)}let l=this,h=l.chart,p=l.navButtons,d=h.options.mapNavigation,c;for(t&&(d=h.options.mapNavigation=g(h.options.mapNavigation,t));p.length;)p.pop().destroy();!h.renderer.forExport&&n(d.enableButtons,d.enabled)&&(l.navButtonsGroup||(l.navButtonsGroup=h.renderer.g().attr({zIndex:4}).add()),i(d.buttons,(i,t)=>{i=g(d.buttonOptions,i),!h.styledMode&&i.theme&&((c=i.theme).style=g(i.theme.style,i.style));let{text:s,width:o=0,height:r=0,padding:a=0}=i,n=h.renderer.button("+"!==s&&"-"!==s&&s||"",0,0,e,c,void 0,void 0,void 0,"zoomIn"===t?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[t]).attr({width:o,height:r,title:h.options.lang[t],padding:i.padding,zIndex:5}).add(l.navButtonsGroup);if("+"===s||"-"===s){let t=o+1,e=[["M",a+3,a+r/2],["L",a+t-3,a+r/2]];"+"===s&&e.push(["M",a+t/2,a+3],["L",a+t/2,a+r-3]),h.renderer.path(e).addClass("highcharts-button-symbol").attr(h.styledMode?{}:{stroke:i.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(n)}if(n.handler=i.onclick,u(n.element,"dblclick",f),p.push(n),m(i,{width:n.width,height:2*(n.height||0)}),h.hasLoaded)n.align(i,!1,i.alignTo);else{let t=u(h,"load",()=>{n.element&&n.align(i,!1,i.alignTo),t()})}}),h.hasLoaded||u(h,"render",function(){var t,e,i,s=h.exportingGroup&&h.exportingGroup.getBBox();s&&(t=l.navButtonsGroup.getBBox(),e=s,(i=t).x>=e.x+e.width||i.x+i.width<=e.x||i.y>=e.y+e.height||i.y+i.height<=e.y||(i=-t.y-t.height+s.y-5,e=s.y+s.height-t.y+5,s=d.buttonOptions&&d.buttonOptions.verticalAlign,l.navButtonsGroup.attr({translateY:"bottom"===s?i:e})))})),this.updateEvents(d)}updateEvents(t){let e=this.chart;n(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||u(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),n(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||u(e.container,"wheel",function(t){return e.pointer.inClass(t.target,"highcharts-no-mousewheel")||(e.pointer.onContainerMouseWheel(t),f(t)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}}),e(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,s){var e;let o=t.seriesTypes["column"]["prototype"],{addEvent:r,defined:a}=s;{t=e=e||{};let i=[];function n(t){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}t.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},t.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){let e={};return!a(t.color)||t.state&&"normal"!==t.state||(e[this.colorProp||"fill"]=t.color),e},pointAttribs:o.pointAttribs},t.compose=function(t){var e=t.prototype.pointClass;return s.pushUnique(i,e)&&r(e,"afterSetState",n),t}}return e}),e(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,s,i){var o;let r=e["getOptions"],{isNumber:a,merge:n,pick:l}=i;class h extends t{init(t,e){var i=r().credits,i=n({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:l(i.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:l(i.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);super.init(i,e)}mapZoom(t,e,i,s,o){this.mapView&&(a(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,a(e)&&a(i)?this.mapView.projection.inverse([e,i]):void 0,a(s)&&a(o)?[s,o]:void 0))}}return(o=h=h||{}).maps={},o.mapChart=function(t,e,i){return new o(t,e,i)},o.splitPath=function(e){let i;if("string"==typeof e){let t=(e=e.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/);i=t.map(t=>/[A-za-z]/.test(t)?t:parseFloat(t))}else i=e;return s.prototype.pathToSegments(i)},h}),e(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(t){let i=-Number.MAX_VALUE,s=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=Number.MAX_VALUE,a;if(t.forEach(t=>{var e=t[t.length-2],t=t[t.length-1];"number"==typeof e&&"number"==typeof t&&(s=Math.min(s,e),i=Math.max(i,e),r=Math.min(r,t),o=Math.max(o,t),a=!0)}),a)return{x1:s,y1:r,x2:i,y2:o}},pointInPolygon:function(t,e){let i,s,o=!1,r=t.x,a=t.y;for(i=0,s=e.length-1;i<e.length;s=i++)e[i][1]>a!=e[s][1]>a&&r<(e[s][0]-e[i][0])*(a-e[i][1])/(e[s][1]-e[i][1])+e[i][0]&&(o=!o);return o}}}),e(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s){let n=e["boundsFromPath"],o=i.seriesTypes.scatter.prototype.pointClass,{extend:r,isNumber:l,pick:h}=s;class p extends o{constructor(){super(...arguments),this.options=void 0,this.path=void 0,this.series=void 0}static getProjectedPath(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]}applyOptions(t,e){let i=this.series,s=super.applyOptions(t,e),o=i.joinBy;return i.mapData&&i.mapMap&&(t=o[1],(t=void 0!==(e=super.getNestedProperty(t))&&i.mapMap[e])?r(s,t):-1!==i.pointArrayMap.indexOf("value")&&(s.value=s.value||null)),s}getProjectedBounds(t){let e=p.getProjectedPath(this,t),i=n(e),s=this.properties,o=this.series.chart.mapView;if(i){var r=s&&s["hc-middle-lon"],a=s&&s["hc-middle-lat"];if(o&&l(r)&&l(a)){t=t.forward([r,a]);i.midX=t[0],i.midY=t[1]}else{r=s&&s["hc-middle-x"],a=s&&s["hc-middle-y"];i.midX=i.x1+(i.x2-i.x1)*h(this.middleX,l(r)?r:.5);let t=h(this.middleY,l(a)?a:.5);this.geometry||(t=1-t),i.midY=i.y2-(i.y2-i.y1)*t}return i}}onMouseOver(t){s.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,t):this.series.onMouseOut()}setVisible(t){this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[t?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(e){let i=this.series.chart,s=i.mapView,o=this.bounds;if(s&&o){let t=l(this.insetIndex)&&s.insets[this.insetIndex];var r,a;t&&(r=t.projectedUnitsToPixels({x:o.x1,y:o.y1}),a=t.projectedUnitsToPixels({x:o.x2,y:o.y2}),r=s.pixelsToProjectedUnits({x:r.x,y:r.y}),a=s.pixelsToProjectedUnits({x:a.x,y:a.y}),o={x1:r.x,y1:r.y,x2:a.x,y2:a.y}),s.fitToBounds(o,void 0,!1),this.series.isDirty=!0,i.redraw(e)}}}return r(p.prototype,{dataLabelOnNull:t.pointMembers.dataLabelOnNull,moveToTopOnHover:t.pointMembers.moveToTopOnHover,isValid:t.pointMembers.isValid}),p}),e(t,"Series/Map/MapSeriesDefaults.js",[t["Core/Utilities.js"]],function(t){let i=t["isNumber"];return{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let t=this.series.chart["numberFormatter"],e=this.point["value"];return i(e)?t(e,-1):""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}}),e(t,"Maps/MapViewDefaults.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}}),e(t,"Maps/GeoJSONComposition.js",[t["Core/Globals.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(e,t,i){var s;let u=e["win"],p=t["format"],{error:m,extend:d,merge:o,pushUnique:r,wrap:a}=i;{e=s=s||{};let t=[];function n(t){return this.mapView&&this.mapView.lonLatToProjectedUnits(t)}function l(t){return this.mapView&&this.mapView.projectedUnitsToLonLat(t)}function h(t,e){let i=this.options.chart.proj4||u.proj4;var s,o,r,a,n,l,h,p,d,c;{if(i)return{jsonmarginX:s=0,jsonmarginY:o=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=e,t=i(e.crs,[t.lon,t.lat]),d=e.cosAngle||e.rotation&&Math.cos(e.rotation),c=e.sinAngle||e.rotation&&Math.sin(e.rotation),{x:(((e=e.rotation?[t[0]*d+t[1]*c,-t[0]*c+t[1]*d]:t)[0]-n)*a+l)*r+s,y:-(((h-e[1])*a+p)*r-o)};m(21,!1,this)}}function c(t,e){let i=this.options.chart.proj4||u.proj4;var s,o,r,a,n,l,h,p;if(i){if(null!==t.y)return{jsonmarginX:l=0,jsonmarginY:s=0,jsonres:o=1,scale:r=1,xoffset:p=0,xpan:h=0,yoffset:a=0,ypan:n=0}=e,l={x:((t.x-l)/o-h)/r+p,y:((t.y-s)/o+n)/r+a},h=e.cosAngle||e.rotation&&Math.cos(e.rotation),p=e.sinAngle||e.rotation&&Math.sin(e.rotation),{lat:(t=i(e.crs,"WGS84",e.rotation?{x:l.x*h+-l.y*p,y:l.x*p+l.y*h}:l)).y,lon:t.x}}else m(21,!1,this)}function g(t,e){e=e||Object.keys(t.objects)[0];let i=t.objects[e];if(i["hc-decoded-geojson"])return i["hc-decoded-geojson"];let r=t.arcs;if(t.transform){let i,s,o;var a=t.arcs,{scale:n,translate:l}=t.transform;r=[];for(let t=0,e=a.length;t<e;++t){var h=a[t];r.push(i=[]),s=0;for(let t=o=0,e=h.length;t<e;++t)i.push([(s+=h[t][0])*n[0]+l[0],(o+=h[t][1])*n[1]+l[1]])}}let s=t=>"number"==typeof t[0]?t.reduce((t,e,i)=>{let s=e<0?r[~e]:r[e];return e<0?(s=s.slice(0,0===i?s.length:s.length-1)).reverse():i&&(s=s.slice(1)),t.concat(s)},[]):t.map(s),o=i.geometries,p=[];for(let t=0,e=o.length;t<e;++t)p.push({type:"Feature",properties:o[t].properties,geometry:{type:o[t].type,coordinates:o[t].coordinates||s(o[t].arcs)}});e={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:p,"hc-recommended-mapview":i["hc-recommended-mapview"],bbox:t.bbox,title:t.title};return i["hc-decoded-geojson"]=e}function f(t,e){e=o(!0,this.options.credits,e),this.mapCredits&&(e.href=void 0),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}e.compose=function(e){if(r(t,e)){let t=e.prototype;t.fromLatLonToPoint=n,t.fromPointToLatLon=l,t.transformFromLatLon=h,t.transformToLatLon=c,a(t,"addCredits",f)}},e.geojson=function(t,i="map",e){let s=[],o="Topology"===t.type?g(t):t,r=o.features;for(let e=0,t=r.length;e<t;++e){let t;var a,n=r[e],l=n.geometry||{},h=l.type,l=l.coordinates,n=n.properties;("map"!==i&&"mapbubble"!==i||"Polygon"!==h&&"MultiPolygon"!==h)&&("mapline"!==i||"LineString"!==h&&"MultiLineString"!==h)?"mappoint"===i&&"Point"===h&&l.length&&(t={geometry:{coordinates:l,type:h}}):l.length&&(t={geometry:{coordinates:l,type:h}}),t&&(l=n&&(n.name||n.NAME),h=n&&n.lon,a=n&&n.lat,s.push(d(t,{lat:"number"==typeof a?a:void 0,lon:"number"==typeof h?h:void 0,name:"string"==typeof l?l:void 0,properties:n})))}return e&&o.copyrightShort&&(e.chart.mapCredits=p(e.chart.options.credits?.mapText,{geojson:o}),e.chart.mapCreditsFull=p(e.chart.options.credits?.mapTextFull,{geojson:o})),s},e.topo2geo=g}return s}),e(t,"Core/Geometry/PolygonClip.js",[],function(){function o(t,e,i=!0){let s=e[e.length-1],o,r,a,n=t;for(let t=0;t<e.length;t++){var l=n;o=e[t],n=[],r=i?l[l.length-1]:l[0];for(let t=0;t<l.length;t++)h(s,o,a=l[t])?(h(s,o,r)||n.push(p(s,o,r,a)),n.push(a)):h(s,o,r)&&n.push(p(s,o,r,a)),r=a;s=o}return n}function h(t,e,i){return(e[0]-t[0])*(i[1]-t[1])>(e[1]-t[1])*(i[0]-t[0])}function p(t,e,i,s){let o=[t[0]-e[0],t[1]-e[1]],r=[i[0]-s[0],i[1]-s[1]],a=t[0]*e[1]-t[1]*e[0],n=i[0]*s[1]-i[1]*s[0],l=1/(o[0]*r[1]-o[1]*r[0]),h=[(a*r[0]-n*o[0])*l,(a*r[1]-n*o[1])*l];return h.isIntersection=!0,h}return{clipLineString:function(t,e){let i=[],s=o(t,e,!1);for(let t=1;t<s.length;t++)s[t].isIntersection&&s[t-1].isIntersection&&(i.push(s.splice(0,t)),t=0),t===s.length-1&&i.push(s);return i},clipPolygon:o}}),e(t,"Maps/Projections/LambertConformalConic.js",[],function(){let l=Math.sign||(t=>0===t?0:0<t?1:-1),p=Math.PI/180,d=Math.PI/2,c=t=>Math.tan((d+t)/2);return class{constructor(t){var e=(t.parallels||[]).map(t=>t*p),i=e[0]||0,e=e[1]??i,s=Math.cos(i);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds);let o=i===e?Math.sin(i):Math.log(s/Math.cos(e))/Math.log(c(e)/c(i));Math.abs(o)<1e-10&&(o=1e-10*(l(o)||1)),this.n=o,this.c=s*Math.pow(c(i),o)/o}forward(t){let{c:e,n:i,projectedBounds:s}=this,o=t[0]*p,r=t[1]*p,a=(0<e?r<1e-6-d&&(r=1e-6-d):r>d-1e-6&&(r=d-1e-6),e/Math.pow(c(r),i)),n=a*Math.sin(i*o)*63.78137,l=63.78137*(e-a*Math.cos(i*o)),h=[n,l];return s&&(n<s.x1||n>s.x2||l<s.y1||l>s.y2)&&(h.outside=!0),h}inverse(t){let{c:e,n:i}=this,s=t[0]/63.78137,o=t[1]/63.78137,r=e-o,a=l(i)*Math.sqrt(s*s+r*r),n=Math.atan2(s,Math.abs(r))*l(r);return r*i<0&&(n-=Math.PI*l(s)*l(r)),[n/i/p,(2*Math.atan(Math.pow(e/a,1/i))-d)/p]}}}),e(t,"Maps/Projections/EqualEarth.js",[],function(){let p=Math.sqrt(3)/2;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(t){var e=Math.PI/180,i=Math.asin(p*Math.sin(t[1]*e)),s=i*i,o=s*s*s;return[t[0]*e*Math.cos(i)*74.03120656864502/(p*(1.340264+-.24331799999999998*s+o*(.0062510000000000005+.034164*s))),74.03120656864502*i*(1.340264+-.081106*s+o*(893e-6+.003796*s))]}inverse(t){let e=t[0]/74.03120656864502,i=t[1]/74.03120656864502,s=180/Math.PI,o=i,r,a,n,l;for(let t=0;t<12&&(a=(r=o*o)*r*r,n=o*(1.340264+-.081106*r+a*(893e-6+.003796*r))-i,o-=l=n/(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r)),!(Math.abs(l)<1e-9));++t);a=(r=o*o)*r*r;var t=s*p*e*(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r))/Math.cos(o),h=s*Math.asin(Math.sin(o)/p);return 180<Math.abs(t)?[NaN,NaN]:[t,h]}}}),e(t,"Maps/Projections/Miller.js",[],function(){let e=Math.PI/4,i=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(t){return[t[0]*i*63.78137,79.7267125*Math.log(Math.tan(e+.4*t[1]*i))]}inverse(t){return[t[0]/63.78137/i,2.5*(Math.atan(Math.exp(t[1]/63.78137*.8))-e)/i]}}}),e(t,"Maps/Projections/Orthographic.js",[],function(){let r=Math.PI/180;return class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(t){let e=t[0],i=t[1],s=i*r,o=[Math.cos(s)*Math.sin(e*r)*63.78460826781007,63.78460826781007*Math.sin(s)];return(e<-90||90<e)&&(o.outside=!0),o}inverse(t){var e=t[0]/63.78460826781007,t=t[1]/63.78460826781007,i=Math.sqrt(e*e+t*t),s=Math.asin(i),o=Math.sin(s);return[Math.atan2(e*o,i*Math.cos(s))/r,Math.asin(i&&t*o/i)/r]}}}),e(t,"Maps/Projections/WebMercator.js",[],function(){let s=Math.PI/180;return class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(t){let e=Math.sin(t[1]*s),i=[63.78137*t[0]*s,63.78137*Math.log((1+e)/(1-e))/2];return Math.abs(t[1])>this.maxLatitude&&(i.outside=!0),i}inverse(t){return[t[0]/(63.78137*s),(2*Math.atan(Math.exp(t[1]/63.78137))-Math.PI/2)/s]}}}),e(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(t,e,i,s,o){return{EqualEarth:e,LambertConformalConic:t,Miller:i,Orthographic:s,WebMercator:o}}),e(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){let{clipLineString:x,clipPolygon:v}=t,{clamp:p,erase:d}=i,C=2*Math.PI/360;function c(t){return t<-180&&(t+=360),180<t&&(t-=360),t}class M{static add(t,e){M.registry[t]=e}static greatCircle(t,e,i){let{atan2:s,cos:o,sin:r,sqrt:a}=Math,n=t[1]*C,l=t[0]*C,h=e[1]*C,p=e[0]*C,d=h-n,c=p-l,u=r(d/2)*r(d/2)+o(n)*o(h)*r(c/2)*r(c/2),m=2*s(a(u),a(1-u)),g=6371e3*m,f=Math.round(g/5e5),b=[];if(i&&b.push(t),1<f){var y=1/f;for(let t=y;t<.999;t+=y){var x=r((1-t)*m)/r(m),v=r(t*m)/r(m),M=x*o(n)*o(l)+v*o(h)*o(p),j=x*o(n)*r(l)+v*o(h)*r(p),x=x*r(n)+v*r(h),v=s(x,a(M*M+j*j)),x=s(j,M);b.push([x/C,v/C])}}return i&&b.push(e),b}static insertGreatCircles(t){let e=t.length-1;for(;e--;){var i;10<Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))&&((i=M.greatCircle(t[e],t[e+1])).length&&t.splice(e+1,0,...i))}}static toString(t){let{name:e,rotation:i}=t||{};return[e,i&&i.join(",")].join(";")}constructor(t={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90;var{name:e,projectedBounds:i,rotation:s}=this.options=t;this.rotator=s?this.getRotator(s):void 0;let o=e?M.registry[e]:void 0,{def:r,rotator:a}=(o&&(this.def=new o(t)),this);r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),a&&r?(this.forward=t=>r.forward(a.forward(t)),this.inverse=t=>a.inverse(r.inverse(t))):r?(this.forward=t=>r.forward(t),this.inverse=t=>r.inverse(t)):a&&(this.forward=a.forward,this.inverse=a.inverse),this.bounds="world"===i?r&&r.bounds:i}lineIntersectsBounds(t){let{x1:e,x2:i,y1:s,y2:o}=this.bounds||{},r=(t,e,i)=>{var s,[t,o]=t,r=e?0:1;if("number"==typeof i&&t[e]>=i!=o[e]>=i)return s=(i-t[e])/(o[e]-t[e]),s=t[r]+s*(o[r]-t[r]),e?[s,i]:[i,s]},a,n=t[0];return((a=r(t,0,e))||(a=r(t,0,i)))&&(n=a,t[1]=a),n=(a=r(t,1,s))||(a=r(t,1,o))?a:n}getRotator(t){let o=t[0]*C,e=(t[1]||0)*C,i=(t[2]||0)*C,r=Math.cos(e),a=Math.sin(e),n=Math.cos(i),l=Math.sin(i);if(0!=o||0!=e||0!=i)return{forward:t=>{var e=t[0]*C+o,t=t[1]*C,i=Math.cos(t),s=Math.cos(e)*i,e=Math.sin(e)*i,i=Math.sin(t),t=i*r+s*a;return[Math.atan2(e*n-t*l,s*r-i*a)/C,Math.asin(t*n+e*l)/C]},inverse:t=>{var e=t[0]*C,t=t[1]*C,i=Math.cos(t),s=Math.cos(e)*i,e=Math.sin(e)*i,i=Math.sin(t),t=i*n-e*l;return[(Math.atan2(e*n+i*l,s*r+t*a)-o)/C,Math.asin(t*r-s*a)/C]}}}forward(t){return t}inverse(t){return t}cutOnAntimeridian(r,s){let l,a=[],h=[r];for(let i=0,t=r.length;i<t;++i){let t=r[i],e=r[i-1];if(!i){if(!s)continue;e=r[r.length-1]}var o=e[0],n=t[0];(o<-90||90<o)&&(n<-90||90<n)&&0<o!=0<n&&(n=p((180-(o+360)%360)/((n+360)%360-(o+360)%360),0,1),n=e[1]+n*(t[1]-e[1]),a.push({i:i,lat:n,direction:o<0?1:-1,previousLonLat:e,lonLat:t}))}if(a.length)if(s){a.length%2==1&&(l=a.slice().sort((t,e)=>Math.abs(e.lat)-Math.abs(t.lat))[0],d(a,l));let o=a.length-2;for(;0<=o;){let t=a[o].i,e=c(180+1e-6*a[o].direction),i=c(180-1e-6*a[o].direction),s=r.splice(t,a[o+1].i-t,...M.greatCircle([e,a[o].lat],[e,a[o+1].lat],!0));s.push(...M.greatCircle([i,a[o+1].lat],[i,a[o].lat],!0)),h.push(s),o-=2}if(l)for(let t=0;t<h.length;t++){let{direction:o,lat:r}=l,a=h[t],n=a.indexOf(l.lonLat);if(-1<n){let e=(r<0?-1:1)*this.maxLatitude,i=c(180+1e-6*o),t=c(180-1e-6*o),s=M.greatCircle([i,r],[i,e],!0);for(let t=i+120*o;-180<t&&t<180;t+=120*o)s.push([t,e]);s.push(...M.greatCircle([t,e],[t,l.lat],!0)),a.splice(n,0,...s);break}}}else{let i=a.length;for(;i--;){let t=a[i].i,e=r.splice(t,r.length,[c(180+1e-6*a[i].direction),a[i].lat]);e.unshift([c(180-1e-6*a[i].direction),a[i].lat]),h.push(e)}}return h}path(t){let c,{bounds:u,def:e,rotator:i}=this,m=[],g="Polygon"===t.type||"MultiPolygon"===t.type,f=this.hasGeoProjection,b=!e||!1!==e.antimeridianCutting,s=b?i:void 0,y=b&&e||this,o=(u&&(c=[[u.x1,u.y1],[u.x2,u.y1],[u.x2,u.y2],[u.x1,u.y2]]),t=>{let e=t.map(e=>{if(b){let t=(e=s?s.forward(e):e)[0];e=[t=Math.abs(t-180)<1e-6?t<180?179.999999:180.000001:t,e[1]]}return e}),i=[e];f&&(M.insertGreatCircles(e),b&&(i=this.cutOnAntimeridian(e,g))),i.forEach(n=>{let l,h;if(!(n.length<2)){let e=!1,i=!1,s=t=>{e?m.push(["L",t[0],t[1]]):(m.push(["M",t[0],t[1]]),e=!0)},o=!1,r=!1,a=n.map(t=>{let e=y.forward(t);return e.outside?o=!0:r=!0,e[1]===1/0?e[1]=1e10:e[1]===-1/0&&(e[1]=-1e10),e});if(b){if(g&&a.push(a[0]),o){if(!r)return;if(c)if(g)a=v(a,c);else if(u)return void x(a,c).forEach(t=>{e=!1,t.forEach(s)})}a.forEach(s)}else for(let t=0;t<a.length;t++){var p=n[t],d=a[t];if(d.outside)i=!0;else{if(g&&!l&&(l=p,n.push(p),a.push(d)),i&&h)if(g&&f){let t=M.greatCircle(h,p);t.forEach(t=>s(y.forward(t)))}else e=!1;s(d),h=p,i=!1}}}})});return"LineString"===t.type?o(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(t=>o(t)):"Polygon"===t.type?(t.coordinates.forEach(t=>o(t)),m.length&&m.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(t=>{t.forEach(t=>o(t))}),m.length&&m.push(["Z"])),m}}return M.registry=e,M}),e(t,"Maps/MapView.js",[t["Maps/MapViewDefaults.js"],t["Maps/GeoJSONComposition.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(r,t,e,l,i){let s=t["topo2geo"],{boundsFromPath:a,pointInPolygon:h}=e,{addEvent:m,clamp:g,fireEvent:f,isArray:n,isNumber:b,isObject:o,isString:p,merge:d,pick:c,pushUnique:u,relativeLength:y}=i,x=[],v={};function M(t,e){var{width:e,height:i}=e,e=Math.max((t.x2-t.x1)/(e/256),(t.y2-t.y1)/(i/256));return Math.log(400.979322/e)/Math.log(2)}class j{static compose(t){u(x,t)&&(v=t.maps,m(t,"afterInit",function(){this.mapView=new j(this,this.options.mapView)},{order:0}))}static compositeBounds(t){if(t.length)return t.slice(1).reduce((t,e)=>(t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2),t),d(t[0]))}static mergeInsets(t,e){let i=t=>{let i={};return t.forEach((t,e)=>{i[t&&t.id||"i"+e]=t}),i},s=d(i(t),i(e)),o=Object.keys(s).map(t=>s[t]);return o}constructor(e,t){let a,n;if(this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],!(this instanceof C)){let t=[e.options.chart.map,...(e.options.series||[]).map(t=>t.mapData)].map(t=>this.getGeoMap(t)),o=[],r=(t.forEach(t=>{var e,i,s;t&&(a=a||t["hc-recommended-mapview"],t.bbox)&&([t,e,i,s]=t.bbox,o.push({x1:t,y1:e,x2:i,y2:s}))}),o.length&&j.compositeBounds(o));f(e,"beforeMapViewInit",{geoBounds:r},function(){var t,e,i,s;r&&({x1:t,y1:e,x2:i,y2:s}=r,n=180<i-t&&90<s-e?{name:"EqualEarth"}:{name:"LambertConformalConic",parallels:[e,s],rotation:[-(t+i)/2]})}),this.geoMap=t[0]}this.userOptions=t||{},e.options.mapView&&e.options.mapView.recommendedMapView&&(a=e.options.mapView.recommendedMapView);let i=d(r,{projection:n},a,t),s=a&&a.insets,o=t&&t.insets;s&&o&&(i.insets=j.mergeInsets(s,o)),this.chart=e,this.center=i.center,this.options=i,this.projection=new l(i.projection),this.playingField=e.plotBox,this.zoom=i.zoom||0,this.minZoom=i.minZoom,this.createInsets(),this.eventsToUnbind.push(m(e,"afterSetChartSize",()=>{this.playingField=this.getField(),void 0!==this.minZoom&&this.minZoom!==this.zoom||(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&b(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&d(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let e=this.options,t=e.insets;t&&t.forEach(t=>{t=new C(this,d(e.insetOptions,t));this.insets.push(t)})}fitToBounds(t,e,i=!0,s){var o,r=t||this.getProjectedBounds();r&&(e=c(e,t?0:this.options.padding),o=this.getField(!1),e=n(e)?e:[e,e,e,e],this.padding=[y(e[0],o.height),y(e[1],o.width),y(e[2],o.height),y(e[3],o.width)],this.playingField=this.getField(),e=M(r,this.playingField),t||(this.minZoom=e),o=this.projection.inverse([(r.x2+r.x1)/2,(r.y2+r.y1)/2]),this.setView(o,e,i,s))}getField(t=!0){t=t?this.padding:[0,0,0,0];return{x:t[3],y:t[0],width:this.chart.plotWidth-t[1]-t[3],height:this.chart.plotHeight-t[0]-t[2]}}getGeoMap(t){return p(t)?v[t]&&"Topology"===v[t].type?s(v[t]):v[t]:o(t,!0)?"FeatureCollection"===t.type?t:"Topology"===t.type?s(t):void 0:void 0}getMapBBox(){var t,e,i=this.getProjectedBounds(),s=this.getScale();if(i)return t=this.padding,e=this.projectedUnitsToPixels({x:i.x1,y:i.y2}),{width:(i.x2-i.x1)*s+t[1]+t[3],height:(i.y2-i.y1)*s+t[0]+t[2],x:e.x-t[3],y:e.y-t[0]}}getProjectedBounds(){let s=this.projection,t=this.chart.series.reduce((t,e)=>{var i=e.getProjectedBounds&&e.getProjectedBounds();return i&&!1!==e.options.affectsMapView&&t.push(i),t},[]),o=this.options.fitToGeometry;if(o){if(!this.fitToGeometryCache)if("MultiPoint"===o.type){let t=o.coordinates.map(t=>s.forward(t)),e=t.map(t=>t[0]),i=t.map(t=>t[1]);this.fitToGeometryCache={x1:Math.min.apply(0,e),x2:Math.max.apply(0,e),y1:Math.min.apply(0,i),y2:Math.max.apply(0,i)}}else this.fitToGeometryCache=a(s.path(o));return this.fitToGeometryCache}return this.projection.bounds||j.compositeBounds(t)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){var{x:t,y:e,width:i,height:s}=this.playingField,o=this.projection.forward(this.center),r=this.projection.hasCoordinates?-1:1,a=this.getScale(),r=a*r;return{scaleX:a,scaleY:r,translateX:t+i/2-o[0]*a,translateY:e+s/2-o[1]*r}}lonLatToPixels(t){t=this.lonLatToProjectedUnits(t);if(t)return this.projectedUnitsToPixels(t)}lonLatToProjectedUnits(t){let e=this.chart,i=e.mapTransforms;if(i){for(var s in i)if(Object.hasOwnProperty.call(i,s)&&i[s].hitZone){var o=e.transformFromLatLon(t,i[s]);if(o&&h(o,i[s].hitZone.coordinates[0]))return o}return e.transformFromLatLon(t,i.default)}for(var r of this.insets){var a;if(r.options.geoBounds&&h({x:t.lon,y:t.lat},r.options.geoBounds.coordinates[0]))return a=r.projection.forward([t.lon,t.lat]),r=r.projectedUnitsToPixels({x:a[0],y:a[1]}),this.pixelsToProjectedUnits(r)}var n=this.projection.forward([t.lon,t.lat]);if(!n.outside)return{x:n[0],y:n[1]}}projectedUnitsToLonLat(t){let e=this.chart,i=e.mapTransforms;if(i){for(var s in i)if(Object.hasOwnProperty.call(i,s)&&i[s].hitZone&&h(t,i[s].hitZone.coordinates[0]))return e.transformToLatLon(t,i[s]);return e.transformToLatLon(t,i.default)}var o,r,a=this.projectedUnitsToPixels(t);for(o of this.insets)if(o.hitZone&&h(a,o.hitZone.coordinates[0]))return r=o.pixelsToProjectedUnits(a),{lon:(r=o.projection.inverse([r.x,r.y]))[0],lat:r[1]};var n=this.projection.inverse([t.x,t.y]);return{lon:n[0],lat:n[1]}}redraw(t){this.chart.series.forEach(t=>{t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)}setView(p,d,t=!0,e){p&&(this.center=p),"number"==typeof d&&("number"==typeof this.minZoom&&(d=Math.max(d,this.minZoom)),"number"==typeof this.options.maxZoom&&(d=Math.min(d,this.options.maxZoom)),b(d)&&(this.zoom=d));var c,u,p=this.getProjectedBounds();if(p){let t=this.projection.forward(this.center),{x:e,y:i,width:s,height:o}=this.playingField,r=this.getScale(),a=this.projectedUnitsToPixels({x:p.x1,y:p.y1}),n=this.projectedUnitsToPixels({x:p.x2,y:p.y2}),l=[(p.x1+p.x2)/2,(p.y1+p.y2)/2],h=this.chart.series.some(t=>t.isDrilling);h||(d=a.x,p=n.y,c=n.x,u=a.y,c-d<s?t[0]=l[0]:d<e&&c<e+s?t[0]+=Math.max(d-e,c-s-e)/r:e+s<c&&e<d&&(t[0]+=Math.min(c-s-e,d-e)/r),u-p<o?t[1]=l[1]:p<i&&u<i+o?t[1]-=Math.max(p-i,u-o-i)/r:i+o<u&&i<p&&(t[1]-=Math.min(u-o-i,p-i)/r),this.center=this.projection.inverse(t)),this.insets.forEach(t=>{t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()}f(this,"afterSetView"),t&&this.redraw(e)}projectedUnitsToPixels(t){var e=this.getScale(),i=this.projection.forward(this.center),s=this.playingField,o=s.x+s.width/2,s=s.y+s.height/2;return{x:o-e*(i[0]-t.x),y:s+e*(i[1]-t.y)}}pixelsToLonLat(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))}pixelsToProjectedUnits(t){var{x:t,y:e}=t,i=this.getScale(),s=this.projection.forward(this.center),o=this.playingField,r=o.x+o.width/2,o=o.y+o.height/2;return{x:s[0]+(t-r)/i,y:s[1]-(e-o)/i}}setUpEvents(){let p,d,c,u=this["chart"],t=t=>{let e=u.pointer.pinchDown,i=this.projection,{mouseDownX:s,mouseDownY:o}=u;var r,a,n,l,h;1===e.length&&(s=e[0].chartX,o=e[0].chartY),"number"==typeof s&&"number"==typeof o&&(l=s+","+o,{chartX:r,chartY:a}=t.originalEvent,l!==d&&(d=l,p=this.projection.forward(this.center),c=(this.projection.options.rotation||[0,0]).slice()),l=(l=i.def&&i.def.bounds)&&M(l,this.playingField)||-1/0,"Orthographic"===i.options.name&&(this.minZoom||1/0)<1.3*l?(l=440/(this.getScale()*Math.min(u.plotWidth,u.plotHeight)),c&&(n=(s-r)*l-c[0],l=g(-c[1]-(o-a)*l,-80,80),h=this.zoom,this.update({projection:{rotation:[-n,-l]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=h,u.redraw(!1))):b(r)&&b(a)&&(n=this.getScale(),l=this.projection.hasCoordinates?1:-1,h=this.projection.inverse([p[0]+(s-r)/n,p[1]-(o-a)/n*l]),isNaN(h[0]+h[1])||this.setView(h,void 0,!0,!1)),t.preventDefault())};m(u,"pan",t),m(u,"touchpan",t),m(u,"selection",t=>{var e,i,s,o;t.resetSelection?this.zoomBy():(s=t.x-u.plotLeft,o=t.y-u.plotTop,{y:e,x:i}=this.pixelsToProjectedUnits({x:s,y:o}),{y:s,x:o}=this.pixelsToProjectedUnits({x:s+t.width,y:o+t.height}),this.fitToBounds({x1:i,y1:e,x2:o,y2:s},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||u.showResetZoom(),t.preventDefault())})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(t,e=!0,i){let s=t.projection,o=s&&l.toString(s)!==l.toString(this.options.projection),r=!1;d(!0,this.userOptions,t),d(!0,this.options,t),"insets"in t&&(this.insets.forEach(t=>t.destroy()),this.insets.length=0,r=!0),(o||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(o||r)&&(this.chart.series.forEach(t=>{let e=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&e)for(;1<e.length;){let t=e.pop();t&&t.destroy()}}),o&&(this.projection=new l(this.options.projection)),r&&this.createInsets(),t.center||!Object.hasOwnProperty.call(t,"zoom")||b(t.zoom)||this.fitToBounds(void 0,void 0,!1)),t.center||b(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(i)}zoomBy(e,i,s,o){let r=this.chart,a=this.projection.forward(this.center),[n,l]=i?this.projection.forward(i):[];if("number"==typeof e){let t;var h,i=this.zoom+e;s&&([e,s]=s,h=this.getScale(),e=e-r.plotLeft-r.plotWidth/2,s=s-r.plotTop-r.plotHeight/2,n=a[0]+e/h,l=a[1]+s/h),"number"==typeof n&&"number"==typeof l&&(e=1-Math.pow(2,this.zoom)/Math.pow(2,i),s=a[0]-n,h=a[1]-l,a[0]-=s*e,a[1]+=h*e,t=this.projection.inverse(a)),this.setView(t,i,void 0,o)}else this.fitToBounds(void 0,void 0,void 0,o)}}class C extends j{constructor(e,t){if(super(e.chart,t),this.id=t.id,this.mapView=e,this.options=d({center:[0,0]},e.options.insetOptions,t),this.allBounds=[],this.options.geoBounds){let t=e.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=a(t),this.geoBoundsProjectedPolygon=t.map(t=>[t[1]||0,t[2]||0])}}getField(l=!0){var h=this.hitZone;if(h){let t=l?this.padding:[0,0,0,0],e=h.coordinates[0],i=e.map(t=>t[0]),s=e.map(t=>t[1]),o=Math.min.apply(0,i)+t[3],r=Math.max.apply(0,i)-t[1],a=Math.min.apply(0,s)+t[0],n=Math.max.apply(0,s)-t[2];if(b(o)&&b(a))return{x:o,y:a,width:r-o,height:n-a}}return super.getField.call(this,l)}getHitZone(){let{chart:i,mapView:s,options:o}=this,e=(o.field||{})["coordinates"];if(e){let t=e[0];if("percent"===o.units){let e="mapBoundingBox"===o.relativeTo&&s.getMapBBox()||d(i.plotBox,{x:0,y:0});t=t.map(t=>[y(t[0]+"%",e.width,e.x),y(t[1]+"%",e.height,e.y)])}return{type:"Polygon",coordinates:[t]}}}getProjectedBounds(){return j.compositeBounds(this.allBounds)}isInside(t){var{geoBoundsProjectedBox:e,geoBoundsProjectedPolygon:i}=this;return!!(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&i&&h(t,i))}render(){let{chart:n,mapView:i,options:l}=this,s=l.borderPath||l.field;if(s&&i.group){let t=!0,r=(this.border||(this.border=n.renderer.path().addClass("highcharts-mapview-inset-border").add(i.group),t=!1),n.styledMode||this.border.attr({stroke:l.borderColor,"stroke-width":l.borderWidth}),Math.round(this.border.strokeWidth())%2/2),a="mapBoundingBox"===l.relativeTo&&i.getMapBBox()||i.playingField,e=(s.coordinates||[]).reduce((t,e)=>e.reduce((t,e,i)=>{let[s,o]=e;return"percent"===l.units&&(s=n.plotLeft+y(s+"%",a.width,a.x),o=n.plotTop+y(o+"%",a.height,a.y)),s=Math.floor(s)+r,o=Math.floor(o)+r,t.push(0===i?["M",s,o]:["L",s,o]),t},t),[]);this.border[t?"animate":"attr"]({d:e})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(t=>t())}setUpEvents(){}}return j}),e(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Series/Map/MapSeriesDefaults.js"],t["Maps/MapView.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,f,s,b,o,a,r,n){let{animObject:g,stop:y}=t,l=f["noop"],h=s["splitPath"],{column:p,scatter:d}=r.seriesTypes,{extend:c,find:u,fireEvent:m,getNestedProperty:x,isArray:v,defined:M,isNumber:j,isObject:C,merge:w,objectEach:P,pick:S,splat:L}=n;class A extends d{constructor(){super(...arguments),this.chart=void 0,this.data=void 0,this.group=void 0,this.joinBy=void 0,this.options=void 0,this.points=void 0,this.processedData=[]}animate(t){let{chart:e,group:i}=this,s=g(this.options.animation);t?i.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):i.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},s)}clearBounds(){this.points.forEach(t=>{delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds}doFullTranslate(){return!(!this.isDirtyData&&!this.chart.isResizing&&this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}drawPoints(){let c=this,{chart:u,group:i,transformGroups:s=[]}=this,{mapView:o,renderer:m}=u;if(o){(this.transformGroups=s)[0]||(s[0]=m.g().add(i));for(let t=0,e=o.insets.length;t<e;++t)s[t+1]||s.push(m.g().add(i));this.doFullTranslate()&&(this.points.forEach(t=>{let e=t["graphic"];t.group=s["number"==typeof t.insetIndex?t.insetIndex+1:0],e&&e.parentGroup!==t.group&&e.add(t.group)}),p.prototype.drawPoints.apply(this),this.points.forEach(e=>{let n=e.graphic;if(n){let a=n.animate,t="";e.name&&(t+="highcharts-name-"+e.name.replace(/ /g,"-").toLowerCase()),e.properties&&e.properties["hc-key"]&&(t+=" highcharts-key-"+e.properties["hc-key"].toString().toLowerCase()),t&&n.addClass(t),u.styledMode&&n.css(this.pointAttribs(e,e.selected?"select":void 0)),n.animate=function(t,e,i){var s,o=j(t["stroke-width"])&&!j(n["stroke-width"]),r=j(n["stroke-width"])&&!j(t["stroke-width"]),o=((o||r)&&(s=S(c.getStrokeWidth(c.options),1)/(u.mapView&&u.mapView.getScale()||1),o&&(n["stroke-width"]=s),r&&(t["stroke-width"]=s)),a.call(n,t,e,r?function(){n.element.removeAttribute("stroke-width"),delete n["stroke-width"],i&&i.apply(this,arguments)}:i));return o}}})),s.forEach((a,t)=>{let e=0===t?o:o.insets[t-1],n=e.getSVGTransform(),l=S(this.getStrokeWidth(this.options),1),h=n.scaleX,p=0<n.scaleY?1:-1,d=s=>{(c.points||[]).forEach(t=>{let e,i=t.graphic;i&&i["stroke-width"]&&(e=this.getStrokeWidth(t.options))&&i.attr({"stroke-width":e/s})})};if(m.globalAnimation&&u.hasRendered&&o.allowTransformAnimation){let s=Number(a.attr("translateX")),o=Number(a.attr("translateY")),r=Number(a.attr("scaleX")),t=w(g(m.globalAnimation)),e=t.step;t.step=function(){e&&e.apply(this,arguments),((t,e)=>{var i=r+(h-r)*e.pos;a.attr({translateX:s+(n.translateX-s)*e.pos,translateY:o+(n.translateY-o)*e.pos,scaleX:i,scaleY:i*p,"stroke-width":l/i}),d(i)}).apply(this,arguments)},a.attr({animator:0}).animate({animator:1},t,function(){"boolean"!=typeof m.globalAnimation&&m.globalAnimation.complete&&m.globalAnimation.complete({applyDrilldown:!0})})}else y(a),a.attr(w(n,{"stroke-width":l/h})),d(h)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:r,projection:t}=this.chart.mapView,e=[];(this.points||[]).forEach(o=>{if(o.path||o.geometry){if("string"==typeof o.path?o.path=h(o.path):v(o.path)&&"M"===o.path[0]&&(o.path=this.chart.renderer.pathToSegments(o.path)),!o.bounds){let s=o.getProjectedBounds(t);if(s){o.labelrank=S(o.labelrank,(s.x2-s.x1)*(s.y2-s.y1));let{midX:e,midY:i}=s;if(r&&j(e)&&j(i)){let t=u(r,t=>t.isInside({x:e,y:i}));t&&(delete o.projectedPath,(s=o.getProjectedBounds(t.projection))&&t.allBounds.push(s),o.insetIndex=r.indexOf(t))}o.bounds=s}}o.bounds&&void 0===o.insetIndex&&e.push(o.bounds)}}),this.bounds=a.compositeBounds(e)}return this.bounds}getStrokeWidth(t){var e=this.pointAttrToOptions;return t[e&&e["stroke-width"]||"borderWidth"]}hasData(){return!!this.processedXData.length}pointAttribs(t,e){let{mapView:i,styledMode:s}=t.series.chart,o=s?this.colorAttribs(t):p.prototype.pointAttribs.call(this,t,e),r=this.getStrokeWidth(t.options);e&&(e=w(this.options.states&&this.options.states[e],t.options.states&&t.options.states[e]||{}),a=this.getStrokeWidth(e),M(a)&&(r=a),o.stroke=e.borderColor??t.color),r&&i&&(r/=i.getScale());var a=this.getStrokeWidth(this.options);return o.dashstyle&&i&&j(a)&&(r=a/i.getScale()),t.visible||(o.fill=this.options.nullColor),M(r)?o["stroke-width"]=r:delete o["stroke-width"],o["stroke-linecap"]=o["stroke-linejoin"]=this.options.linecap,o}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(t,e=!0,i,s){delete this.bounds,super.setData(t,!1,void 0,s),this.processData(),this.generatePoints(),e&&this.chart.redraw(i)}processData(){let e,i,s,o=this.options,r=o.data,t=this.chart,a=t.options.chart,n=this.joinBy,l=o.keys||this.pointArrayMap,h=[],p={},d=this.chart.mapView,c=d&&(C(o.mapData,!0)?d.getGeoMap(o.mapData):d.geoMap),u=t.mapTransforms=a.mapTransforms||c&&c["hc-transform"]||t.mapTransforms,m=(u&&P(u,t=>{t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),v(o.mapData)?s=o.mapData:c&&"FeatureCollection"===c.type&&(this.mapTitle=c.title,s=f.geojson(c,this.type,this)),this.processedData=[],this.processedData);var g;if(r)for(let i=0,t=r.length;i<t;++i){if(j(g=r[i]))m[i]={value:g};else if(v(g)){let e=0;m[i]={},!o.keys&&g.length>l.length&&"string"==typeof g[0]&&(m[i]["hc-key"]=g[0],++e);for(let t=0;t<l.length;++t,++e)l[t]&&void 0!==g[e]&&(0<l[t].indexOf(".")?b.prototype.setNestedProperty(m[i],g[e],l[t]):m[i][l[t]]=g[e])}else m[i]=r[i];n&&"_i"===n[0]&&(m[i]._i=i)}if(s){this.mapData=s,this.mapMap={};for(let t=0;t<s.length;t++)i=(e=s[t]).properties,e._i=t,n[0]&&i&&i[n[0]]&&(e[n[0]]=i[n[0]]),p[e[n[0]]]=e;if(this.mapMap=p,n[1]){let e=n[1];m.forEach(t=>{t=x(e,t);p[t]&&h.push(p[t])})}if(o.allAreas){if(n[1]){let e=n[1];m.forEach(t=>{h.push(x(e,t))})}let e="|"+h.map(function(t){return t&&t[n[0]]}).join("|")+"|";s.forEach(t=>{n[0]&&-1!==e.indexOf("|"+t[n[0]]+"|")||m.push(w(t,{value:null}))})}}this.processedXData=Array(m.length)}setOptions(t){let e=super.setOptions(t),i=e.joinBy;return null===e.joinBy&&(i="_i"),(i=this.joinBy=L(i))[1]||(i[1]=i[0]),e}translate(){let s=this.doFullTranslate(),o=this.chart.mapView,r=o&&o.projection;if(!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!o||o.userOptions.center||j(o.userOptions.zoom)||o.zoom!==o.minZoom?this.getProjectedBounds():o.fitToBounds(void 0,void 0,!1)),o){let i=o.getSVGTransform();this.points.forEach(t=>{var e=j(t.insetIndex)&&o.insets[t.insetIndex].getSVGTransform()||i;e&&t.bounds&&j(t.bounds.midX)&&j(t.bounds.midY)&&(t.plotX=t.bounds.midX*e.scaleX+e.translateX,t.plotY=t.bounds.midY*e.scaleY+e.translateY),s&&(t.shapeType="path",t.shapeArgs={d:b.getProjectedPath(t,r)}),t.projectedPath&&!t.projectedPath.length?t.setVisible(!1):t.visible||t.setVisible(!0)})}m(this,"afterTranslate")}}return A.defaultOptions=w(d.defaultOptions,o),c(A.prototype,{type:"map",axisTypes:e.seriesMembers.axisTypes,colorAttribs:e.seriesMembers.colorAttribs,colorKey:e.seriesMembers.colorKey,directTouch:!0,drawDataLabels:l,drawGraph:l,forceDL:!0,getCenter:i.getCenter,getExtremesFromAll:!0,getSymbol:l,isCartesian:!1,parallelArrays:e.seriesMembers.parallelArrays,pointArrayMap:e.seriesMembers.pointArrayMap,pointClass:b,preserveAspectRatio:!0,searchPoint:l,trackerGroups:e.seriesMembers.trackerGroups,useMapGeometry:!0}),e.compose(A),r.registerSeriesType("map",A),A}),e(t,"Series/MapLine/MapLineSeriesDefaults.js",[],function(){return{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}}),e(t,"Series/MapLine/MapLineSeries.js",[t["Series/MapLine/MapLineSeriesDefaults.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s){let{extend:o,merge:r}=s;class a extends e{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0}pointAttribs(t,e){let i=super.pointAttribs(t,e);return i.fill=this.options.fillColor,i}}return a.defaultOptions=r(e.defaultOptions,t),o(a.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),i.registerSeriesType("mapline",a),a}),e(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){let i=t.seriesTypes["scatter"],s=e["isNumber"];class o extends i.prototype.pointClass{constructor(){super(...arguments),this.options=void 0,this.series=void 0}isValid(){return!!(this.options.geometry||s(this.x)&&s(this.y)||s(this.options.lon)&&s(this.options.lat))}}return o}),e(t,"Series/MapPoint/MapPointSeriesDefaults.js",[],function(){return{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}}),e(t,"Series/MapPoint/MapPointSeries.js",[t["Core/Globals.js"],t["Series/MapPoint/MapPointPoint.js"],t["Series/MapPoint/MapPointSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,s,o,r){let a=t["noop"],{map:n,scatter:l}=s.seriesTypes,{extend:h,fireEvent:p,isNumber:d,merge:c}=r;class u extends l{constructor(){super(...arguments),this.chart=void 0,this.data=void 0,this.options=void 0,this.points=void 0,this.clearBounds=n.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)}projectPoint(o){let r=this.chart.mapView;if(r){let{geometry:t,lon:e,lat:i}=o,s=t&&"Point"===t.type&&t.coordinates;if(s=d(e)&&d(i)?[e,i]:s)return r.lonLatToProjectedUnits({lon:s[0],lat:s[1]})}}translate(){let h=this.chart.mapView;if(this.processedXData||this.processData(),this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),h){let n=h.getSVGTransform(),l=h.projection["hasCoordinates"];this.points.forEach(t=>{let e,{x:i,y:s}=t,o=d(t.insetIndex)&&h.insets[t.insetIndex].getSVGTransform()||n,r=this.projectPoint(t.options)||t.properties&&this.projectPoint(t.properties);var a;r?(i=r.x,s=r.y):t.bounds&&(i=t.bounds.midX,s=t.bounds.midY,o&&d(i)&&d(s)&&(t.plotX=i*o.scaleX+o.translateX,t.plotY=s*o.scaleY+o.translateY,e=!0)),d(i)&&d(s)?e||(a=h.projectedUnitsToPixels({x:i,y:s}),t.plotX=a.x,t.plotY=l?a.y:this.chart.plotHeight-a.y):t.y=t.plotX=t.plotY=void 0,t.isInside=this.isPointInside(t),t.zone=this.zones.length?t.getZone():void 0})}p(this,"afterTranslate")}}return u.defaultOptions=c(l.defaultOptions,i),o.prototype.symbols.mapmarker=(t,e,i,s,o)=>{let r,a;var n=o&&"legend"===o.context,o=(n?(r=t+i/2,a=e+s):o&&"number"==typeof o.anchorX&&"number"==typeof o.anchorY?(r=o.anchorX,a=o.anchorY):(r=t+i/2,a=e+s/2,e-=s),n?s/3:s/2);return[["M",r,a],["C",r,a,r-o,e+1.5*o,r-o,e+o],["A",o,o,1,1,1,r+o,e+o],["C",r+o,e+1.5*o,r,a,r,a],["Z"]]},h(u.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:e,searchPoint:a,useMapGeometry:!0}),s.registerSeriesType("mappoint",u),u}),e(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),e(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,r,e,i){let d=t["parse"],s=e["noop"],{arrayMax:n,arrayMin:l,isNumber:p,merge:c,pick:u,stableSort:m}=i;return class{constructor(t,e){this.chart=void 0,this.legend=void 0,this.maxLabel=void 0,this.movementX=void 0,this.ranges=void 0,this.selected=void 0,this.visible=void 0,this.symbols=void 0,this.options=void 0,this.setState=s,this.init(t,e)}init(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e}addToLegend(t){t.splice(this.options.legendIndex,0,this)}drawLegendSymbol(t){let e,i=(this.chart,u(t.options.itemDistance,20)),s=this.legendItem||{},o=this.options,r=o.ranges,a=o.connectorDistance;var n,l,h;r&&r.length&&p(r[0].value)?(m(r,function(t,e){return e.value-t.value}),this.ranges=r,this.setOptions(),this.render(),n=this.getMaxLabelSize(),h=2*(l=this.ranges[0].radius),e=0<(e=a-l+n.width)?e:0,this.maxLabel=n,this.movementX="left"===o.labels.align?e:0,s.labelWidth=h+e+i,s.labelHeight=h+n.height/2):t.options.bubbleLegend.autoRanges=!0}setOptions(){let i=this.ranges,s=this.options,o=this.chart.series[s.seriesIndex],r=this.legend.baseline,a={zIndex:s.zIndex,"stroke-width":s.borderWidth},n={zIndex:s.zIndex,"stroke-width":s.connectorWidth},l={align:this.legend.options.rtl||"left"===s.labels.align?"right":"left",zIndex:s.zIndex},h=o.options.marker.fillOpacity,p=this.chart.styledMode;i.forEach(function(t,e){p||(a.stroke=u(t.borderColor,s.borderColor,o.color),a.fill=u(t.color,s.color,1!==h?d(o.color).setOpacity(h).get("rgba"):o.color),n.stroke=u(t.connectorColor,s.connectorColor,o.color)),i[e].radius=this.getRangeRadius(t.value),i[e]=c(i[e],{center:i[0].radius-i[e].radius+r}),p||c(!0,i[e],{bubbleAttribs:c(a),connectorAttribs:c(n),labelAttribs:l})},this)}getRangeRadius(t){let e=this.options,i=this.options.seriesIndex,s=this.chart.series[i],o=e.ranges[0].value,r=e.ranges[e.ranges.length-1].value,a=e.minSize,n=e.maxSize;return s.getRadius.call(this,r,o,a,n,t)}render(){let t=this.legendItem||{},e=this.chart.renderer,i=this.options.zThreshold;for(var s of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),t.symbol=e.g("bubble-legend"),t.label=e.g("bubble-legend-item").css(this.legend.itemStyle||{}),t.symbol.translateX=0,t.symbol.translateY=0,t.symbol.add(t.label),t.label.add(t.group),this.ranges))s.value>=i&&this.renderRange(s);this.hideOverlappingLabels()}renderRange(t){let e=this.ranges[0],i=this.legend,s=this.options,o=s.labels,r=this.chart,a=r.series[s.seriesIndex],n=r.renderer,l=this.symbols,h=l.labels,p=t.center,d=Math.abs(t.radius),c=s.connectorDistance||0,u=o.align,m=i.options.rtl,g=s.borderWidth,f=s.connectorWidth,b=e.radius||0,y=p-d-g/2+f/2,x=(y%1?1:.5)-(f%2?0:.5),v=n.styledMode,M=m||"left"===u?-c:c,j=("center"===u&&(M=0,s.connectorDistance=0,t.labelAttribs.align="center"),l.bubbleItems.push(n.circle(b,p+x,d).attr(v?{}:t.bubbleAttribs).addClass((v?"highcharts-color-"+a.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(s.className||"")).add(this.legendItem.symbol)),l.connectors.push(n.path(n.crispLine([["M",b,y],["L",b+M,y]],s.connectorWidth)).attr(v?{}:t.connectorAttribs).addClass((v?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(s.connectorClassName||"")).add(this.legendItem.symbol)),n.text(this.formatLabel(t)).attr(v?{}:t.labelAttribs).css(v?{}:o.style).addClass("highcharts-bubble-legend-labels "+(s.labels.className||"")).add(this.legendItem.symbol)),C={x:b+M+s.labels.x,y:y+s.labels.y+.4*j.getBBox().height};j.attr(C),h.push(j),j.placed=!0,j.alignAttr=C}getMaxLabelSize(){let e,i,t=this.symbols.labels;return t.forEach(function(t){i=t.getBBox(!0),e=!e||i.width>e.width?i:e}),e||{}}formatLabel(t){let e=this.options,i=e.labels.formatter,s=e.labels.format,o=this.chart["numberFormatter"];return s?r.format(s,t):i?i.call(t):o(t.value,1)}hideOverlappingLabels(){let t=this.chart,e=this.options.labels.allowOverlap,i=this.symbols;!e&&i&&(t.hideOverlappingLabels(i.labels),i.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&i.connectors[e].show():i.connectors[e].hide()}))}getRanges(){let t=this.legend.bubbleLegend,e=t.chart.series,i=t.options.ranges,s,o,r=Number.MAX_VALUE,a=-Number.MAX_VALUE;return e.forEach(function(t){t.isBubble&&!t.ignoreSeries&&(o=t.zData.filter(p)).length&&(r=u(t.options.zMin,Math.min(r,Math.max(l(o),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),a=u(t.options.zMax,Math.max(a,n(o))))}),s=r===a?[{value:a}]:[{value:r},{value:(r+a)/2},{value:a,autoRanges:!0}],i.length&&i[0].radius&&s.reverse(),s.forEach(function(t,e){i&&i[e]&&(s[e]=c(i[e],t))}),s}predictBubbleSizes(){let t=this.chart,e=t.legend.options,i=e.floating,s="horizontal"===e.layout,o=s?t.legend.lastLineHeight:0,r=t.plotSizeX,a=t.plotSizeY,n=t.series[this.options.seriesIndex],l=n.getPxExtremes(),h=Math.ceil(l.minPxSize),p=Math.ceil(l.maxPxSize),d,c=n.options.maxSize;return i||!/%$/.test(c)?d=p:(d=(Math.min(a,r)+o)*(c=parseFloat(c))/100/(c/100+1),(s&&a-d>=r||!s&&r-d>=a)&&(d=p)),[h,Math.ceil(d)]}updateRanges(t,e){let i=this.legend.options.bubbleLegend;i.minSize=t,i.maxSize=e,i.ranges=this.getRanges()}correctSizes(){let t=this.legend,e=this.chart,i=e.series[this.options.seriesIndex],s=i.getPxExtremes(),o=s.maxPxSize,r=this.options.maxSize;1<Math.abs(Math.ceil(o)-r)&&(this.updateRanges(this.options.minSize,s.maxPxSize),t.render())}}}),e(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(s,r,t,o){let a=t["setOptions"],{addEvent:n,objectEach:l,wrap:h}=o,p=[];function d(t,e,i){let s,o,r,a=this.legend,n=0<=c(this);a&&a.options.enabled&&a.bubbleLegend&&a.options.bubbleLegend.autoRanges&&n?(s=a.bubbleLegend.options,o=a.bubbleLegend.predictBubbleSizes(),a.bubbleLegend.updateRanges(o[0],o[1]),s.placed||(a.group.placed=!1,a.allItems.forEach(t=>{(r=t.legendItem||{}).group&&(r.group.translateY=void 0)})),a.render(),this.getMargins(),this.axes.forEach(function(t){t.visible&&t.render(),s.placed||(t.setScale(),t.updateNames(),l(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0}))}),s.placed=!0,this.getMargins(),t.call(this,e,i),a.bubbleLegend.correctSizes(),f(a,u(a))):(t.call(this,e,i),a&&a.options.enabled&&a.bubbleLegend&&(a.render(),f(a,u(a))))}function c(t){let e=t.series,i=0;for(;i<e.length;){if(e[i]&&e[i].isBubble&&e[i].visible&&e[i].zData.length)return i;i++}return-1}function u(t){let e=t.allItems,i=[],s=e.length,o,r,a,n=0,l=0;for(n=0;n<s;n++)if(r=e[n].legendItem||{},a=(e[n+1]||{}).legendItem||{},r.labelHeight&&(e[n].itemHeight=r.labelHeight),e[n]===e[s-1]||r.y!==a.y){for(i.push({height:0}),o=i[i.length-1];l<=n;l++)e[l].itemHeight>o.height&&(o.height=e[l].itemHeight);o.step=n}return i}function m(t){let e=this.bubbleLegend,i=this.options,s=i.bubbleLegend,o=c(this.chart);e&&e.ranges&&e.ranges.length&&(s.ranges.length&&(s.autoRanges=!!s.ranges[0].autoRanges),this.destroyItem(e)),0<=o&&i.enabled&&s.enabled&&(s.seriesIndex=o,this.bubbleLegend=new r(s,this),this.bubbleLegend.addToLegend(t.allItems))}function g(t){if(t.defaultPrevented)return!1;let e=this.chart,i=this.visible,s=this.chart.legend;s&&s.bubbleLegend&&(this.visible=!i,this.ignoreSeries=i,t=0<=c(e),s.bubbleLegend.visible!==t&&(s.update({bubbleLegend:{enabled:t}}),s.bubbleLegend.visible=t),this.visible=i)}function f(t,i){let e=t.allItems,s=t.options.rtl,o,r,a,n,l=0;e.forEach((t,e)=>{(n=t.legendItem||{}).group&&(o=n.group.translateX||0,r=n.y||0,((a=t.movementX)||s&&t.ranges)&&(a=s?o-t.options.maxSize/2:o+a,n.group.attr({translateX:a})),e>i[l].step&&l++,n.group.attr({translateY:Math.round(r+i[l].height/2)}),n.y=r+i[l].height/2)})}return{compose:function(t,e,i){o.pushUnique(p,t)&&(a({legend:{bubbleLegend:s}}),h(t.prototype,"drawChartBox",d)),o.pushUnique(p,e)&&n(e,"afterGetAllItems",m),o.pushUnique(p,i)&&n(i,"legendItemClick",g)}}}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t,i){let{scatter:{prototype:{pointClass:s}}}=t["seriesTypes"],o=i["extend"];class r extends s{constructor(){super(...arguments),this.options=void 0,this.series=void 0}haloPath(t){return e.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)}}return o(r.prototype,{ttBelow:!1}),r}),e(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(o,t,e,i,s,r){let a=e["parse"],n=i["noop"],{series:l,seriesTypes:{column:{prototype:h},scatter:p}}=s,{addEvent:d,arrayMax:c,arrayMin:u,clamp:m,extend:g,isNumber:f,merge:b,pick:y}=r,x=[];function v(){let t=this.len,o=(this.chart,this.isXAxis),r=o?"xData":"yData",a=this.min,n=this.max-a,l=0,h=t,p=t/n,d;this.series.forEach(e=>{if(e.bubblePadding&&e.reserveSpace()){this.allowZoomOutside=!0,d=!0;var i,s=e[r];if(o&&((e.onPoint||e).getRadii(0,0,e),e.onPoint&&(e.radii=e.onPoint.radii)),0<n){let t=s.length;for(;t--;)f(s[t])&&this.dataMin<=s[t]&&s[t]<=this.max&&(i=e.radii&&e.radii[t]||0,l=Math.min((s[t]-a)*p-i,l),h=Math.max((s[t]-a)*p+i,h))}}}),d&&0<n&&!this.logarithmic&&(h-=t,p*=(t+Math.max(0,l)-Math.min(h,t))/t,[["min","userMin",l],["max","userMax",h]].forEach(t=>{void 0===y(this.options[t[0]],this[t[1]])&&(this[t[0]]+=t[2]/p)}))}class M extends p{constructor(){super(...arguments),this.data=void 0,this.maxPxSize=void 0,this.minPxSize=void 0,this.options=void 0,this.points=void 0,this.radii=void 0,this.yData=void 0,this.zData=void 0}static compose(t,e,i,s){o.compose(e,i,s),r.pushUnique(x,t)&&(t.prototype.beforePadding=v)}animate(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){let e=t["graphic"];e&&e.width&&(this.hasRendered||e.attr({x:t.plotX,y:t.plotY,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)}getRadii(){let t=this.zData,e=this.yData,i=[],s,o,r,a=this.chart.bubbleZExtremes,{minPxSize:n,maxPxSize:l}=this.getPxExtremes();if(!a){let e,i=Number.MAX_VALUE,s=-Number.MAX_VALUE;this.chart.series.forEach(t=>{t.bubblePadding&&t.reserveSpace()&&((t=(t.onPoint||t).getZExtremes())&&(i=Math.min(y(i,t.zMin),t.zMin),s=Math.max(y(s,t.zMax),t.zMax),e=!0))}),e?(a={zMin:i,zMax:s},this.chart.bubbleZExtremes=a):a={zMin:0,zMax:0}}for(o=0,s=t.length;o<s;o++)r=t[o],i.push(this.getRadius(a.zMin,a.zMax,n,l,r,e&&e[o]));this.radii=i}getRadius(t,e,i,s,o,r){let a=this.options,n="width"!==a.sizeBy,l=a.zThreshold,h=e-t,p=.5;if(null===r||null===o)return null;if(f(o)){if(a.sizeByAbsoluteValue&&(o=Math.abs(o-l),e=h=Math.max(e-l,Math.abs(t-l)),t=0),o<t)return i/2-1;0<h&&(p=(o-t)/h)}return n&&0<=p&&(p=Math.sqrt(p)),Math.ceil(i+p*(s-i))/2}hasData(){return!!this.processedXData.length}pointAttribs(t,e){let i=this.options.marker,s=i.fillOpacity,o=l.prototype.pointAttribs.call(this,t,e);return 1!==s&&(o.fill=a(o.fill).setOpacity(s).get("rgba")),o}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:i,options:s,radii:o}=this,r=this.getPxExtremes()["minPxSize"],a=i.length;for(;a--;){let t=i[a],e=o?o[a]:0;"z"===this.zoneAxis&&(t.negative=(t.z||0)<(s.zThreshold||0)),f(e)&&r/2<=e?(t.marker=g(t.marker,{radius:e,width:2*e,height:2*e}),t.dlBox={x:t.plotX-e,y:t.plotY-e,width:2*e,height:2*e}):(t.shapeArgs=t.plotY=t.dlBox=void 0,t.isInside=!1)}}getPxExtremes(){let i=Math.min(this.chart.plotWidth,this.chart.plotHeight),t=t=>{let e;return"string"==typeof t&&(e=/%$/.test(t),t=parseInt(t,10)),e?i*t/100:t},e=t(y(this.options.minSize,8)),s=Math.max(t(y(this.options.maxSize,"20%")),e);return{minPxSize:e,maxPxSize:s}}getZExtremes(){var t=this.options,e=(this.zData||[]).filter(f);if(e.length){var i=y(t.zMin,m(u(e),!1===t.displayNegative?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),t=y(t.zMax,c(e));if(f(i)&&f(t))return{zMin:i,zMax:t}}}}return M.defaultOptions=b(p.defaultOptions,{dataLabels:{formatter:function(){let t=this.series.chart["numberFormatter"],e=this.point["z"];return f(e)?t(e,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),g(M.prototype,{alignDataLabel:h.alignDataLabel,applyZones:n,bubblePadding:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:t,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),d(M,"updatedData",t=>{delete t.target.chart.bubbleZExtremes}),d(M,"remove",t=>{delete t.target.chart.bubbleZExtremes}),s.registerSeriesType("bubble",M),M}),e(t,"Series/MapBubble/MapBubblePoint.js",[t["Series/Bubble/BubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){let{map:{prototype:{pointClass:{prototype:s}}}}=e["seriesTypes"],o=i["extend"];class r extends t{isValid(){return"number"==typeof this.z}}return o(r.prototype,{applyOptions:s.applyOptions,getProjectedBounds:s.getProjectedBounds}),r}),e(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,s){let{map:{prototype:o},mappoint:{prototype:r}}=i["seriesTypes"],{extend:a,merge:n}=s;class l extends t{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.points=void 0,this.clearBounds=o.clearBounds}searchPoint(t,e){return this.searchKDTree({clientX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)}translate(){r.translate.call(this),this.getRadii(),this.translateBubble()}updateParallelArrays(t,e,i){super.updateParallelArrays.call(this,t,e,i);let s=this.processedXData,o=this.xData;s&&o&&(s.length=o.length)}}return l.defaultOptions=n(t.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),a(l.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:o.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:e,processData:o.processData,projectPoint:r.projectPoint,setData:o.setData,setOptions:o.setOptions,updateData:o.updateData,useMapGeometry:!0,xyFromShape:!0}),i.registerSeriesType("mapbubble",l),l}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){let{prototype:{pointClass:i}}=t.seriesTypes["scatter"],{clamp:r,defined:m,extend:s,pick:a}=e;class o extends i{constructor(){super(...arguments),this.options=void 0,this.series=void 0,this.value=void 0,this.x=void 0,this.y=void 0}applyOptions(t,e){return!this.isNull&&null!==this.value||delete this.color,super.applyOptions(t,e),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){let t=this.series,e=t.options,i=(e.colsize||1)/2,s=(e.rowsize||1)/2,l=t.xAxis,h=t.yAxis,p=this.options.marker||t.options.marker,o=t.pointPlacementToXValue(),d=a(this.pointPadding,e.pointPadding,0),c={x1:r(Math.round(l.len-l.translate(this.x-i,!1,!0,!1,!0,-o)),-l.len,2*l.len),x2:r(Math.round(l.len-l.translate(this.x+i,!1,!0,!1,!0,-o)),-l.len,2*l.len),y1:r(Math.round(h.translate(this.y-s,!1,!0,!1,!0)),-h.len,2*h.len),y2:r(Math.round(h.translate(this.y+s,!1,!0,!1,!0)),-h.len,2*h.len)};for(var u of[["width","x"],["height","y"]]){let t=u[0],e=u[1],i=e+"1",s=e+"2",o=Math.abs(c[i]-c[s]),r=p&&p.lineWidth||0,a=Math.abs(c[i]+c[s])/2,n=p&&p[t];m(n)&&n<o&&(u=n/2+r/2,c[i]=a-u,c[s]=a+u),d&&(("x"===e&&l.reversed||"y"===e&&!h.reversed)&&(i=s,s=e+"1"),c[i]+=d,c[s]-=d)}return c}haloPath(t){if(!t)return[];var{x:e=0,y:i=0,width:s=0,height:o=0}=this.shapeArgs||{};return[["M",e-t,i-t],["L",e-t,i+o+t],["L",e+s+t,i+o+t],["L",e+s+t,i-t],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}return s(o.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),o}),e(t,"Series/Heatmap/HeatmapSeriesDefaults.js",[t["Core/Utilities.js"]],function(t){let i=t["isNumber"];return{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let t=this.series.chart["numberFormatter"],e=this.point["value"];return i(e)?t(e,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}}),e(t,"Series/InterpolationUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e){let s=t["doc"],{defined:o,pick:r}=e;return{colorFromPoint:function(e,i){let s=i.series.colorAxis;if(s){let t=s.toColor(e||0,i).split(")")[0].split("(")[1].split(",").map(t=>r(parseFloat(t),parseInt(t,10)));return t[3]=255*r(t[3],1),o(e)&&i.visible||(t[3]=0),t}return[0,0,0,0]},getContext:function(t){let{canvas:e,context:i}=t;return e&&i?(i.clearRect(0,0,e.width,e.height),i):(t.canvas=s.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}}}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Series/Heatmap/HeatmapSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"],t["Series/InterpolationUtilities.js"]],function(h,t,e,i,s,o,r,a){let{series:p,seriesTypes:{column:n,scatter:l}}=s,{symbols:d}=o["prototype"],{addEvent:c,extend:u,fireEvent:m,isNumber:g,merge:f,pick:b}=r,{colorFromPoint:k,getContext:D}=a;class y extends l{constructor(){super(...arguments),this.canvas=void 0,this.colorAxis=void 0,this.context=void 0,this.data=void 0,this.options=void 0,this.points=void 0,this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let A=this,t=A.options,e=t.interpolation,i=t.marker||{};if(e){let{image:M,chart:j,xAxis:C,yAxis:w}=A,{reversed:P=!1,len:t}=C,{reversed:S=!1,len:e}=w,L={width:t,height:e};if(!M||A.isDirtyData||A.isDirtyCanvas){let g=D(A),{canvas:f,options:{colsize:b=1,rowsize:y=1},points:x,points:{length:v}}=A,t=j.colorAxis&&j.colorAxis[0];if(f&&g&&t){let{min:e,max:t}=C.getExtremes(),{min:i,max:s}=w.getExtremes(),o=t-e,r=s-i,a=Math.round(o/b/8*8),n=Math.round(r/y/8*8),[l,h]=[[a,a/o,P,"ceil"],[n,n/r,!S,"floor"]].map(([e,i,t,s])=>t?t=>Math[s](e-i*t):t=>Math[s](i*t)),p=f.width=a+1,d=f.height=n+1,c=p*d,u=(v-1)/c,m=new Uint8ClampedArray(4*c);A.buildKDTree();for(let t=0;t<c;t++){var T=x[Math.ceil(u*t)],{x:z,y:B}=T;m.set(k(T.value,T),(T=z,4*Math.ceil(p*h(B-i)+l(T-e))))}g.putImageData(new ImageData(m,p),0,0),M?M.attr({...L,href:f.toDataURL("image/png",1)}):(A.directTouch=!1,A.image=j.renderer.image(f.toDataURL("image/png",1)).attr(L).add(A.group))}A.isDirtyCanvas=!1}else M.width===t&&M.height===e||M.attr(L)}else(i.enabled||A._hasPointMarkers)&&(p.prototype.drawPoints.call(A),A.points.forEach(t=>{t.graphic&&(t.graphic[A.chart.styledMode?"css":"animate"](A.colorAttribs(t)),null===t.value&&t.graphic.addClass("highcharts-null-point"))}))}getExtremes(){var{dataMin:t,dataMax:e}=p.prototype.getExtremes.call(this,this.valueData);return g(t)&&(this.valueMin=t),g(e)&&(this.valueMax=e),p.prototype.getExtremes.call(this)}getValidPoints(t,e){return p.prototype.getValidPoints.call(this,t,e,!0)}hasData(){return!!this.processedXData.length}init(){super.init.apply(this,arguments);let t=this.options;t.pointRange=b(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,d.ellipse=d.circle,t.marker&&g(t.borderRadius)&&(t.marker.r=t.borderRadius)}markerAttribs(t,e){var i,s=t.shapeArgs||{};return t.hasImage?{x:t.plotX,y:t.plotY}:e&&"normal"!==e?(t=t.options.marker||{},i=(i=this.options.marker||{}).states&&i.states[e]||{},e=((t=t.states&&t.states[e]||{}).width||i.width||s.width||0)+(t.widthPlus||i.widthPlus||0),t=(t.height||i.height||s.height||0)+(t.heightPlus||i.heightPlus||0),{x:(s.x||0)+((s.width||0)-e)/2,y:(s.y||0)+((s.height||0)-t)/2,width:e,height:t}):s}pointAttribs(t,e){let i=p.prototype.pointAttribs.call(this,t,e),s=this.options||{},o=this.chart.options.plotOptions||{},r=o.series||{},a=o.heatmap||{},n=t&&t.options.borderColor||s.borderColor||a.borderColor||r.borderColor,l=t&&t.options.borderWidth||s.borderWidth||a.borderWidth||r.borderWidth||i["stroke-width"];return i.stroke=t&&t.marker&&t.marker.lineColor||s.marker&&s.marker.lineColor||n||this.color,i["stroke-width"]=l,e&&"normal"!==e&&(t=f(s.states&&s.states[e],s.marker&&s.marker.states&&s.marker.states[e],t&&t.options.states&&t.options.states[e]||{}),i.fill=t.color||h.parse(i.fill).brighten(t.brightness||0).get(),i.stroke=t.lineColor||i.stroke),i}translate(){let t=this.options,{borderRadius:r,marker:e}=t,a=e&&e.symbol||"rect",n=d[a]?a:"rect",l=-1!==["circle","square"].indexOf(n);for(var h of(this.generatePoints(),this.points)){let t=h.getCellAttributes(),e=Math.min(t.x1,t.x2),i=Math.min(t.y1,t.y2),s=Math.max(Math.abs(t.x2-t.x1),0),o=Math.max(Math.abs(t.y2-t.y1),0);var p;h.hasImage=0===(h.marker&&h.marker.symbol||a||"").indexOf("url"),l&&(p=Math.abs(s-o),e=Math.min(t.x1,t.x2)+(s<o?0:p/2),i=Math.min(t.y1,t.y2)+(s<o?p/2:0),s=o=Math.min(s,o)),h.hasImage&&(h.marker={width:s,height:o}),h.plotX=h.clientX=(t.x1+t.x2)/2,h.plotY=(t.y1+t.y2)/2,h.shapeType="path",h.shapeArgs=f(!0,{x:e,y:i,width:s,height:o},{d:d[n](e,i,s,o,{r:g(r)?r:0})})}m(this,"afterTranslate")}}return y.defaultOptions=f(l.defaultOptions,i),c(y,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),u(y.prototype,{axisTypes:t.seriesMembers.axisTypes,colorKey:t.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:t.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:e,specialGroup:"group",trackerGroups:t.seriesMembers.trackerGroups,alignDataLabel:n.prototype.alignDataLabel,colorAttribs:t.seriesMembers.colorAttribs,getSymbol:p.prototype.getSymbol}),t.compose(y),s.registerSeriesType("heatmap",y),y}),e(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"],t["Maps/MapNavigation.js"],t["Series/MapBubble/MapBubbleSeries.js"],t["Maps/GeoJSONComposition.js"],t["Core/Chart/MapChart.js"],t["Maps/MapView.js"],t["Maps/Projection.js"]],function(t,e,i,s,o,r,a,n){t.ColorAxis=e,t.MapChart=r,t.mapChart=t.Map=r.mapChart,t.MapNavigation=i,t.MapView=a,t.maps=r.maps,t.Projection=n,t.geojson=o.geojson,t.topo2geo=o.topo2geo,e.compose(t.Chart,t.Fx,t.Legend,t.Series),o.compose(t.Chart),s.compose(t.Axis,t.Chart,t.Legend,t.Series),i.compose(r,t.Pointer,t.SVGRenderer),a.compose(r)})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Core/Axis/Color/ColorAxisComposition.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],function(t,e){var o,s,a,i=t.parse,l=e.addEvent,p=e.extend,h=e.merge,c=e.pick,r=e.splat;function u(){var o=this,t=this.options;this.colorAxis=[],t.colorAxis&&(t.colorAxis=r(t.colorAxis),t.colorAxis.forEach(function(t,e){t.index=e,new s(o,t)}))}function d(e){function o(t){-1!==(t=e.allItems.indexOf(t))&&(r.destroyItem(e.allItems[t]),e.allItems.splice(t,1))}var i,t,r=this,n=[];for((this.chart.colorAxis||[]).forEach(function(t){(i=t.options)&&i.showInLegend&&(i.dataClasses&&i.visible?n=n.concat(t.getDataClassLegendSymbols()):i.visible&&n.push(t),t.series.forEach(function(t){t.options.showInLegend&&!i.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){o(t)}):o(t))}))}),t=n.length;t--;)e.allItems.unshift(n[t])}function f(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function y(){var t=this.chart.colorAxis;t&&t.forEach(function(t,e,o){t.update({},o)})}function m(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function g(){var t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function b(t){var e=this,o=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][o]()}),this.series.buildKDTree()}function v(){var o=this,i=this.options.nullColor,r=this.colorAxis,n=this.colorKey;(this.data.length?this.data:this.points).forEach(function(t){var e=t.getNestedProperty(n);(e=t.options.color||(t.isNull||null===t.value?i:r&&void 0!==e?r.toColor(e,t):t.color||o.color))&&t.color!==e&&(t.color=e,"point"===o.options.legendType&&t.legendItem&&t.legendItem.label&&o.chart.legend.colorizeItem(t,t.visible))})}function x(){this.elem.attr("fill",i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)}function M(){this.elem.attr("stroke",i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)}return t=o=o||{},a=[],t.compose=function(t,e,o,i,r){var n;s=s||t,-1===a.indexOf(e)&&(a.push(e),(t=e.prototype).collectionsWithUpdate.push("colorAxis"),t.collectionsWithInit.colorAxis=[t.addColorAxis],l(e,"afterGetAxes",u),n=(t=e).prototype.createAxis,t.prototype.createAxis=function(t,e){if("colorAxis"!==t)return n.apply(this,arguments);var o=new s(this,h(e.axis,{index:this[t].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(function(t){t.series=[]}),this.series.forEach(function(t){t.bindAxes(),t.isDirtyData=!0}),c(e.redraw,!0)&&this.redraw(e.animation),o}),-1===a.indexOf(o)&&(a.push(o),(e=o.prototype).fillSetter=x,e.strokeSetter=M),-1===a.indexOf(i)&&(a.push(i),l(i,"afterGetAllItems",d),l(i,"afterColorizeItem",f),l(i,"afterUpdate",y)),-1===a.indexOf(r)&&(a.push(r),p(r.prototype,{optionalAxis:"colorAxis",translateColors:v}),p(r.prototype.pointClass.prototype,{setVisible:b}),l(r,"afterTranslate",m,{order:1}),l(r,"bindAxes",g))},t.pointSetVisible=b,o}),e(t,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0}}),e(t,"Core/Axis/Color/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Color/Color.js"],t["Core/Axis/Color/ColorAxisComposition.js"],t["Core/Axis/Color/ColorAxisDefaults.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,r,o,i,d,n,s){var a,l,p=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),h=e.parse,c=n.series,f=s.extend,u=s.isNumber,y=s.merge,m=s.pick;function g(t,e){var o=l.call(this,t,e)||this;return o.beforePadding=!1,o.chart=void 0,o.coll="colorAxis",o.dataClasses=void 0,o.name="",o.options=void 0,o.stops=void 0,o.visible=!0,o.init(t,e),o}return p(g,l=t),g.compose=function(t,e,o,i){r.compose(g,t,e,o,i)},g.prototype.init=function(t,e){var o=t.options.legend||{},i=e.layout?"vertical"!==e.layout:"vertical"!==o.layout,r=e.visible,o=y(g.defaultColorAxisOptions,e,{showEmpty:!1,title:null,visible:o.enabled&&!1!==r});this.coll="colorAxis",this.side=e.side||i?2:1,this.reversed=e.reversed||!i,this.opposite=!i,l.prototype.init.call(this,t,o),this.userOptions.visible=r,e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=i,this.zoomEnabled=!1},g.prototype.initDataClasses=function(t){var o,i=this.chart,e=this.legendItem=this.legendItem||{},r=t.dataClasses.length,n=this.options,s=0,a=i.options.chart.colorCount;this.dataClasses=o=[],e.labels=[],(t.dataClasses||[]).forEach(function(t,e){t=y(t),o.push(t),!i.styledMode&&t.color||("category"===n.dataClassColor?(i.styledMode||(e=i.options.colors,a=e.length,t.color=e[s]),t.colorIndex=s,++s===a&&(s=0)):t.color=h(n.minColor).tweenTo(h(n.maxColor),r<2?.5:e/(r-1)))})},g.prototype.hasData=function(){return!!(this.tickPositions||[]).length},g.prototype.setTickPositions=function(){if(!this.dataClasses)return l.prototype.setTickPositions.call(this)},g.prototype.initStops=function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(t){t.color=h(t[1])})},g.prototype.setOptions=function(t){l.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker},g.prototype.setAxisSize=function(){var t,e,o=this.legendItem&&this.legendItem.symbol,i=this.chart,r=i.options.legend||{};o?(this.left=r=o.attr("x"),this.top=t=o.attr("y"),this.width=e=o.attr("width"),this.height=o=o.attr("height"),this.right=i.chartWidth-r-e,this.bottom=i.chartHeight-t-o,this.len=this.horiz?e:o,this.pos=this.horiz?r:t):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||g.defaultLegendLength},g.prototype.normalizedValue=function(t){return this.logarithmic&&(t=this.logarithmic.log2lin(t)),1-(this.max-t)/(this.max-this.min||1)},g.prototype.toColor=function(t,e){var o,i=this.dataClasses,r=this.stops;if(i)for(o=i.length;o--;){var n=i[o],s=n.from,r=n.to;if((void 0===s||s<=t)&&(void 0===r||t<=r)){var a=n.color;e&&(e.dataClass=o,e.colorIndex=n.colorIndex);break}}else{for(t=this.normalizedValue(t),o=r.length;o--&&!(t>r[o][0]););s=r[o]||r[o+1],t=1-((r=r[o+1]||s)[0]-t)/(r[0]-s[0]||1),a=s.color.tweenTo(r.color,t)}return a},g.prototype.getOffset=function(){var e,t=this.legendItem&&this.legendItem.group,o=this.chart.axisOffset[this.side];t&&(this.axisParent=t,l.prototype.getOffset.call(this),(e=this.chart.legend).allItems.forEach(function(t){t instanceof g&&t.drawLegendSymbol(e,t)}),e.render(),this.chart.getMargins(!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=o)},g.prototype.setLegendColor=function(){var t=(e=this.reversed)?1:0,e=e?0:1,t=this.horiz?[t,0,e,0]:[0,e,0,t];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}},g.prototype.drawLegendSymbol=function(t,e){e=e.legendItem||{};var o=t.padding,i=t.options,r=m(i.itemDistance,10),n=this.horiz,s=m(i.symbolWidth,n?g.defaultLegendLength:12),a=m(i.symbolHeight,n?12:g.defaultLegendLength),i=m(i.labelPadding,n?16:30);this.setLegendColor(),e.symbol||(e.symbol=this.chart.renderer.rect(0,t.baseline-11,s,a).attr({zIndex:1}).add(e.group)),e.labelWidth=s+o+(n?r:this.options.labels.x+this.maxLabelLength),e.labelHeight=a+o+(n?i:0)},g.prototype.setState=function(e){this.series.forEach(function(t){t.setState(e)})},g.prototype.setVisible=function(){},g.prototype.getSeriesExtremes=function(){var t,e=this.series,o=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;o--;){var i=e[o],r=i.colorKey=m(i.options.colorKey,i.colorKey,i.pointValKey,i.zoneAxis,"y"),n=i.pointArrayMap,s=i[r+"Min"]&&i[r+"Max"];if(i[r+"Data"])var a=i[r+"Data"];else if(n){var a=[],n=n.indexOf(r),l=i.yData;if(0<=n&&l)for(t=0;t<l.length;t++)a.push(m(l[t][n],l[t]))}else a=i.yData;s?(i.minColorValue=i[r+"Min"],i.maxColorValue=i[r+"Max"]):(a=c.prototype.getExtremes.call(i,a),i.minColorValue=a.dataMin,i.maxColorValue=a.dataMax),void 0!==i.minColorValue&&(this.dataMin=Math.min(this.dataMin,i.minColorValue),this.dataMax=Math.max(this.dataMax,i.maxColorValue)),s||c.prototype.applyExtremes.call(i)}},g.prototype.drawCrosshair=function(t,e){var o,i=this.legendItem||{},r=e&&e.plotX,n=e&&e.plotY,s=this.pos,a=this.len;e&&((o=this.toPixels(e.getNestedProperty(e.series.colorKey)))<s?o=s-2:s+a<o&&(o=s+a+2),e.plotX=o,e.plotY=this.len-o,l.prototype.drawCrosshair.call(this,t,e),e.plotX=r,e.plotY=n,this.cross&&!this.cross.addedToColorAxis&&i.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(i.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!=typeof this.crosshair||this.cross.attr({fill:this.crosshair.color})))},g.prototype.getPlotLinePath=function(t){var e=this.left,o=t.translatedValue,i=this.top;return u(o)?this.horiz?[["M",o-4,i-6],["L",o+4,i-6],["L",o,i],["Z"]]:[["M",e,o],["L",e-6,o+6],["L",e-6,o-6],["Z"]]:l.prototype.getPlotLinePath.call(this,t)},g.prototype.update=function(t,e){var o=this.chart.legend;this.series.forEach(function(t){t.isDirtyData=!0}),(t.dataClasses&&o.allItems||this.dataClasses)&&this.destroyItems(),l.prototype.update.call(this,t,e),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),o.colorizeItem(this,!0))},g.prototype.destroyItems=function(){var t=this.chart;if((o=this.legendItem||{}).label)t.legend.destroyItem(this);else if(o.labels)for(var e=0,o=o.labels;e<o.length;e++)t.legend.destroyItem(o[e]);t.isDirtyLegend=!0},g.prototype.destroy=function(){this.chart.isDirtyLegend=!0,this.destroyItems(),l.prototype.destroy.apply(this,[].slice.call(arguments))},g.prototype.remove=function(t){this.destroyItems(),l.prototype.remove.call(this,t)},g.prototype.getDataClassLegendSymbols=function(){function s(o){return l.series.reduce(function(t,e){return t.push.apply(t,e.points.filter(function(t){return t.dataClass===o})),t},[])}var a,l=this,p=l.chart,h=l.legendItem&&l.legendItem.labels||[],t=p.options.legend,c=m(t.valueDecimals,-1),u=m(t.valueSuffix,"");return h.length||l.dataClasses.forEach(function(t,i){var e=t.from,o=t.to,r=p.numberFormatter,n=!0;a="",void 0===e?a="< ":void 0===o&&(a="> "),void 0!==e&&(a+=r(e,c)+u),void 0!==e&&void 0!==o&&(a+=" - "),void 0!==o&&(a+=r(o,c)+u),h.push(f({chart:p,name:a,options:{},drawLegendSymbol:d.drawRectangle,visible:!0,isDataClass:!0,setState:function(t){for(var e=0,o=s(i);e<o.length;e++)o[e].setState(t)},setVisible:function(){this.visible=n=l.visible=!n;for(var t=0,e=s(i);t<e.length;t++)e[t].setVisible(n);p.legend.colorizeItem(this,n)}},t))}),h},g.defaultColorAxisOptions=o,g.defaultLegendLength=200,g.keepProps=["legendItem"],e=g,Array.prototype.push.apply(t.keepProps,e.keepProps),e}),e(t,"Maps/MapNavigationDefaults.js",[t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e){return(e=e.extend)(t.defaultOptions.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),t.defaultOptions.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{fontSize:"15px",fontWeight:"bold"},theme:{"stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}),e(t,"Maps/MapNavigation.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o){function h(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}function i(t){this.navButtons=[],this.init(t)}var r=e.doc,c=o.addEvent,u=o.extend,n=o.isNumber,d=o.merge,f=o.objectEach,y=o.pick;i.prototype.init=function(t){this.chart=t},i.prototype.update=function(t){function r(t){this.handler.call(a,t),h(t)}var n,s=this,a=this.chart,l=a.options.mapNavigation,p=s.navButtons;for(t&&(l=a.options.mapNavigation=d(a.options.mapNavigation,t));p.length;)p.pop().destroy();y(l.enableButtons,l.enabled)&&!a.renderer.forExport&&(s.navButtonsGroup||(s.navButtonsGroup=a.renderer.g().attr({zIndex:4}).add()),f(l.buttons,function(t,e){t=d(l.buttonOptions,t),!a.styledMode&&t.theme&&((n=t.theme).style=d(t.theme.style,t.style));var o,i=a.renderer.button(t.text||"",0,0,r,n,void 0,void 0,void 0,"zoomIn"===e?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[e]).attr({width:t.width,height:t.height,title:a.options.lang[e],padding:t.padding,zIndex:5}).add(s.navButtonsGroup);i.handler=t.onclick,c(i.element,"dblclick",h),p.push(i),u(t,{width:i.width,height:2*i.height}),a.hasLoaded?i.align(t,!1,t.alignTo):o=c(a,"load",function(){i.element&&i.align(t,!1,t.alignTo),o()})}),t=function(){var t,e,o=a.exportingGroup&&a.exportingGroup.getBBox();!o||(t=s.navButtonsGroup.getBBox()).x>=o.x+o.width||t.x+t.width<=o.x||t.y>=o.y+o.height||t.y+t.height<=o.y||(e=-t.y-t.height+o.y-5,o=o.y+o.height-t.y+5,s.navButtonsGroup.attr({translateY:"bottom"===(l.buttonOptions&&l.buttonOptions.verticalAlign)?e:o}))},a.hasLoaded||c(a,"render",t)),this.updateEvents(l)},i.prototype.updateEvents=function(t){var e=this.chart;y(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||c(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),y(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||c(e.container,void 0!==r.onwheel?"wheel":void 0!==r.onmousewheel?"mousewheel":"DOMMouseScroll",function(t){return e.pointer.inClass(t.target,"highcharts-no-mousewheel")||(e.pointer.onContainerMouseWheel(t),h(t)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())},u(t.prototype,{fitToBox:function(o,i){return[["x","width"],["y","height"]].forEach(function(t){var e=t[0];t=t[1],o[e]+o[t]>i[e]+i[t]&&(o[t]>i[t]?(o[t]=i[t],o[e]=i[e]):o[e]=i[e]+i[t]-o[t]),o[t]>i[t]&&(o[t]=i[t]),o[e]<i[e]&&(o[e]=i[e])}),o},mapZoom:function(t,e,o,i,r){this.mapView&&(n(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,n(e)&&n(o)?this.mapView.projection.inverse([e,o]):void 0,n(i)&&n(r)?[i,r]:void 0))}}),c(t,"beforeRender",function(){this.mapNavigation=new i(this),this.mapNavigation.update()}),e.MapNavigation=i}),e(t,"Maps/MapPointer.js",[t["Core/Pointer.js"],t["Core/Utilities.js"]],function(t,e){var i,r=e.defined,n=e.extend,o=e.pick,s=(e=e.wrap,t.prototype.normalize),a=0;n(t.prototype,{normalize:function(t,e){var o=this.chart;return t=s.call(this,t,e),o&&o.mapView&&(e=o.mapView.pixelsToLonLat({x:t.chartX-o.plotLeft,y:t.chartY-o.plotTop}))&&n(t,e),t},onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e=this.chart,o=(t=this.normalize(t),r(t.wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail);1<=Math.abs(o)&&(a+=Math.abs(o),i&&clearTimeout(i),i=setTimeout(function(){a=0},50)),a<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapView&&e.mapView.zoomBy((e.options.mapNavigation.mouseWheelSensitivity-1)*-o,void 0,[t.chartX,t.chartY],!(Math.abs(o)<1)&&void 0)}}),e(t.prototype,"zoomOption",function(t){var e=this.chart.options.mapNavigation;o(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}),e(t.prototype,"pinchTranslate",function(t,e,o,i,r,n,s){t.call(this,e,o,i,r,n,s),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=i.scaleX>i.scaleY,this.pinchTranslateDirection(!t,e,o,i,r,n,s,t?i.scaleX:i.scaleY))})}),e(t,"Series/ColorMapComposition.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var o,i,t=t.seriesTypes.column.prototype,r=e.addEvent,n=e.defined;function s(t){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}return e=o=o||{},i=[],e.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value&&(void 0===this.value||!isNaN(this.value))}},e.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){var e={};return!n(t.color)||t.state&&"normal"!==t.state||(e[this.colorProp||"fill"]=t.color),e},pointAttribs:t.pointAttribs},e.compose=function(t){var e=t.prototype.pointClass;return-1===i.indexOf(e)&&(i.push(e),r(e,"afterSetState",s)),t},o}),e(t,"Maps/MapSymbols.js",[t["Core/Renderer/SVG/SVGRenderer.js"]],function(t){function n(t,e,o,i,r,n,s,a){return[["M",t+r,e],["L",t+o-n,e],["C",t+o-n/2,e,t+o,e+n/2,t+o,e+n],["L",t+o,e+i-s],["C",t+o,e+i-s/2,t+o-s/2,e+i,t+o-s,e+i],["L",t+a,e+i],["C",t+a/2,e+i,t,e+i-a/2,t,e+i-a],["L",t,e+r],["C",t,e+r/2,t+r/2,e,t+r,e],["Z"]]}return(t=t.prototype.symbols).bottombutton=function(t,e,o,i,r){return n(t-1,e-1,o,i,0,0,r=r&&r.r||0,r)},t.topbutton=function(t,e,o,i,r){return n(t-1,e-1,o,i,r=r&&r.r||0,r,0,0)},t}),e(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/Defaults.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,n,s,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=e.getOptions,p=i.merge,h=i.pick;function c(){return null!==n&&n.apply(this,arguments)||this}return a(c,n=t),c.prototype.init=function(t,e){var o=l().credits;t=p({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:h(o.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:h(o.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t),n.prototype.init.call(this,t,e)},(s=t=(t=c)||{}).maps={},s.mapChart=function(t,e,o){return new s(t,e,o)},s.splitPath=function(t){return"string"==typeof t&&(t=(t=t.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)})),o.prototype.pathToSegments(t)},t}),e(t,"Maps/MapUtilities.js",[],function(){return{boundsFromPath:function(t){var o,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,n=-Number.MAX_VALUE,s=Number.MAX_VALUE;if(t.forEach(function(t){var e=t[t.length-2];t=t[t.length-1],"number"==typeof e&&"number"==typeof t&&(r=Math.min(r,e),i=Math.max(i,e),s=Math.min(s,t),n=Math.max(n,t),o=!0)}),o)return{x1:r,y1:s,x2:i,y2:n}},pointInPolygon:function(t,e){var o,i=!1,r=t.x,n=t.y;for(t=0,o=e.length-1;t<e.length;o=t++)e[t][1]>n!=e[o][1]>n&&r<(e[o][0]-e[t][0])*(n-e[t][1])/(e[o][1]-e[t][1])+e[t][0]&&(i=!i);return i}}}),e(t,"Series/Map/MapPoint.js",[t["Series/ColorMapComposition.js"],t["Maps/MapUtilities.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,n,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=e.boundsFromPath,l=i.extend,p=i.isNumber,h=i.pick;function c(){var t=null!==n&&n.apply(this,arguments)||this;return t.options=void 0,t.path=void 0,t.series=void 0,t}return n=o.seriesTypes.scatter.prototype.pointClass,s(c,n),c.getProjectedPath=function(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]},c.prototype.applyOptions=function(t,e){var o=this.series;return t=n.prototype.applyOptions.call(this,t,e),e=o.joinBy,o.mapData&&o.mapMap&&((e=void 0!==(e=n.prototype.getNestedProperty.call(t,e[1]))&&o.mapMap[e])?l(t,e):-1!==o.pointArrayMap.indexOf("value")&&(t.value=t.value||null)),t},c.prototype.getProjectedBounds=function(t){t=c.getProjectedPath(this,t),t=a(t);var e,o=this.properties;if(t)return e=o&&o["hc-middle-x"],o=o&&o["hc-middle-y"],t.midX=t.x1+(t.x2-t.x1)*h(this.middleX,p(e)?e:.5),e=h(this.middleY,p(o)?o:.5),this.geometry||(e=1-e),t.midY=t.y2-(t.y2-t.y1)*e,t},c.prototype.onMouseOver=function(t){i.clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?n.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},c.prototype.setVisible=function(t){var e=t?"show":"hide";this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[e](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))},c.prototype.zoomTo=function(){var t,e,o=this.series.chart,i=o.mapView,r=this.bounds;i&&r&&((t=p(this.insetIndex)&&i.insets[this.insetIndex])&&(e=t.projectedUnitsToPixels({x:r.x1,y:r.y1}),r=t.projectedUnitsToPixels({x:r.x2,y:r.y2}),e=i.pixelsToProjectedUnits({x:e.x,y:e.y}),r=i.pixelsToProjectedUnits({x:r.x,y:r.y}),r={x1:e.x,y1:e.y,x2:r.x,y2:r.y}),i.fitToBounds(r,void 0,!1),this.series.isDirty=!0,o.redraw())},l((e=c).prototype,{dataLabelOnNull:t.pointMembers.dataLabelOnNull,moveToTopOnHover:t.pointMembers.moveToTopOnHover,isValid:t.pointMembers.isValid}),e}),e(t,"Maps/MapViewOptionsDefault.js",[],function(){return{center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0}}),e(t,"Maps/MapViewInsetsOptionsDefault.js",[],function(){return{borderColor:"#cccccc",borderWidth:1,center:[0,0],padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}}),e(t,"Extensions/GeoJSON.js",[t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o,i){function r(t,e){if(e=e||Object.keys(t.objects)[0],(e=t.objects[e])["hc-decoded-geojson"])return e["hc-decoded-geojson"];function o(t){return"number"==typeof t[0]?t.reduce(function(t,e,o){var i=e<0?n[~e]:n[e];return e<0?(i=i.slice(0,0===o?i.length:i.length-1)).reverse():o&&(i=i.slice(1)),t.concat(i)},[]):t.map(o)}var i,r,n=t.arcs,s=(t.transform&&(s=t.transform,i=s.scale,r=s.translate,n=t.arcs.map(function(t){var e=0,o=0;return t.map(function(t){return(t=t.slice())[0]=(e+=t[0])*i[0]+r[0],t[1]=(o+=t[1])*i[1]+r[1],t})})),e.geometries.map(function(t){return{type:"Feature",properties:t.properties,geometry:{type:t.type,coordinates:t.coordinates||o(t.arcs)}}}));return t={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:s,"hc-recommended-mapview":e["hc-recommended-mapview"],bbox:t.bbox,title:t.title},e["hc-decoded-geojson"]=t}function n(t,n,e){void 0===n&&(n="map");var s=[];return(t="Topology"===t.type?r(t):t).features.forEach(function(t){var e,o,i=t.geometry||{},r=i.type;i=i.coordinates,t=t.properties,("map"!==n&&"mapbubble"!==n||"Polygon"!==r&&"MultiPolygon"!==r)&&("mapline"!==n||"LineString"!==r&&"MultiLineString"!==r)?"mappoint"===n&&"Point"===r&&i.length&&(e={geometry:{coordinates:i,type:r}}):i.length&&(e={geometry:{coordinates:i,type:r}}),e&&(r=t&&(t.name||t.NAME),i=t&&t.lon,o=t&&t.lat,s.push(l(e,{lat:"number"==typeof o?o:void 0,lon:"number"==typeof i?i:void 0,name:"string"==typeof r?r:void 0,properties:t})))}),e&&t.copyrightShort&&(e.chart.mapCredits=a(e.chart.options.credits.mapText,{geojson:t}),e.chart.mapCreditsFull=a(e.chart.options.credits.mapTextFull,{geojson:t})),s}var a=e.format,u=o.win,d=i.error,l=i.extend,s=i.merge;return e=i.wrap,t.prototype.transformFromLatLon=function(t,e){var o,i,r,n,s,a,l,p,h,c=this.options.chart.proj4||u.proj4;if(c)return o=void 0===(o=e.jsonmarginX)?0:o,i=void 0===(i=e.jsonmarginY)?0:i,r=void 0===(r=e.jsonres)?1:r,n=void 0===(n=e.scale)?1:n,s=void 0===(s=e.xoffset)?0:s,a=void 0===(a=e.xpan)?0:a,l=void 0===(l=e.yoffset)?0:l,p=void 0===(p=e.ypan)?0:p,t=c(e.crs,[t.lon,t.lat]),c=e.cosAngle||e.rotation&&Math.cos(e.rotation),h=e.sinAngle||e.rotation&&Math.sin(e.rotation),{x:(((e=e.rotation?[t[0]*c+t[1]*h,-t[0]*h+t[1]*c]:t)[0]-s)*n+a)*r+o,y:-(((l-e[1])*n+p)*r-i)};d(21,!1,this)},t.prototype.transformToLatLon=function(t,e){var o,i,r,n,s,a,l,p,h=this.options.chart.proj4||u.proj4;if(h){if(null!==t.y)return o=e.jsonmarginX,i=e.jsonmarginY,r=void 0===(r=e.jsonres)?1:r,n=void 0===(n=e.scale)?1:n,s=e.xoffset,a=e.xpan,l=e.yoffset,p=e.ypan,t={x:((t.x-(void 0===o?0:o))/r-(void 0===a?0:a))/n+(void 0===s?0:s),y:((t.y-(void 0===i?0:i))/r+(void 0===p?0:p))/n+(void 0===l?0:l)},o=e.cosAngle||e.rotation&&Math.cos(e.rotation),i=e.sinAngle||e.rotation&&Math.sin(e.rotation),{lat:(e=h(e.crs,"WGS84",e.rotation?{x:t.x*o+t.y*-i,y:t.x*i+t.y*o}:t)).y,lon:e.x}}else d(21,!1,this)},t.prototype.fromPointToLatLon=function(t){return this.mapView&&this.mapView.projectedUnitsToLonLat(t)},t.prototype.fromLatLonToPoint=function(t){return this.mapView&&this.mapView.lonLatToProjectedUnits(t)},e(t.prototype,"addCredits",function(t,e){e=s(!0,this.options.credits,e),this.mapCredits&&(e.href=null),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}),{geojson:o.geojson=n,topo2geo:o.topo2geo=r}}),e(t,"Core/Geometry/PolygonClip.js",[],function(){function h(t,e,o){return(e[0]-t[0])*(o[1]-t[1])>(e[1]-t[1])*(o[0]-t[0])}function c(t,e,o,i){var r=[t[0]-e[0],t[1]-e[1]],n=[o[0]-i[0],o[1]-i[1]];return t=t[0]*e[1]-t[1]*e[0],o=o[0]*i[1]-o[1]*i[0],i=1/(r[0]*n[1]-r[1]*n[0]),(r=[(t*n[0]-o*r[0])*i,(t*n[1]-o*r[1])*i]).isIntersection=!0,r}var t,i;return(i=t=t||{}).clipLineString=function(t,e){var o=[];for(t=i.clipPolygon(t,e,!1),e=1;e<t.length;e++)t[e].isIntersection&&t[e-1].isIntersection&&(o.push(t.splice(0,e)),e=0),e===t.length-1&&o.push(t);return o},i.clipPolygon=function(t,e,o){void 0===o&&(o=!0);for(var i,r=e[e.length-1],n=t,s=0;s<e.length;s++){var a=n;t=e[s];for(var n=[],l=o?a[a.length-1]:a[0],p=0;p<a.length;p++)i=a[p],h(r,t,i)?(h(r,t,l)||n.push(c(r,t,l,i)),n.push(i)):h(r,t,l)&&n.push(c(r,t,l,i)),l=i;r=t}return n},t}),e(t,"Maps/Projections/LambertConformalConic.js",[],function(){var s=Math.sign||function(t){return 0===t?0:0<t?1:-1},a=Math.PI/180,l=Math.PI/2;return t.prototype.forward=function(t){var e=t[0]*a,o=this.c,i=this.n,r=this.projectedBounds,n=(t=t[1]*a,0<o?t<1e-6-l&&(t=1e-6-l):l-1e-6<t&&(t=l-1e-6),o/Math.pow(Math.tan((l+t)/2),i)),o=[t=n*Math.sin(i*e)*63.78137,e=63.78137*(o-n*Math.cos(i*e))];return r&&(t<r.x1||t>r.x2||e<r.y1||e>r.y2)&&(o.outside=!0),o},t.prototype.inverse=function(t){var e=t[0]/63.78137,o=this.c,i=this.n,r=(t=o-t[1]/63.78137,s(i)*Math.sqrt(e*e+t*t)),n=Math.atan2(e,Math.abs(t))*s(t);return t*i<0&&(n-=Math.PI*s(e)*s(t)),[n/i/a,(2*Math.atan(Math.pow(o/r,1/i))-l)/a]},t;function t(t){var e=(o=(t.parallels||[]).map(function(t){return t*a}))[0]||0,o=null!=(i=o[1])?i:e,i=Math.cos(e);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds),t=e===o?Math.sin(e):Math.log(i/Math.cos(o))/Math.log(Math.tan((l+o)/2)/Math.tan((l+e)/2)),Math.abs(t)<1e-10&&(t=1e-10*(s(t)||1)),this.n=t,this.c=i*Math.pow(Math.tan((l+e)/2),t)/t}}),e(t,"Maps/Projections/EqualEarth.js",[],function(){var l=Math.sqrt(3)/2;return t.prototype.forward=function(t){var e=Math.PI/180,o=Math.asin(l*Math.sin(t[1]*e)),i=o*o,r=i*i*i;return[t[0]*e*Math.cos(o)*74.03120656864502/(l*(1.340264+3*-.081106*i+r*(7*893e-6+.034164*i))),74.03120656864502*o*(1.340264+-.081106*i+r*(893e-6+.003796*i))]},t.prototype.inverse=function(t){for(var e=t[0]/74.03120656864502,o=(t=t[1]/74.03120656864502,180/Math.PI),i=t,r=0;r<12;++r){var n=i*i,s=n*n*n,a=i*(1.340264+-.081106*n+s*(893e-6+.003796*n))-t;if(i-=a/=n=1.340264+3*-.081106*n+s*(7*893e-6+.034164*n),Math.abs(a)<1e-9)break}return[o*l*e*(1.340264+3*-.081106*(n=i*i)+n*n*n*(7*893e-6+.034164*n))/Math.cos(i),o*Math.asin(Math.sin(i)/l)]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}}),e(t,"Maps/Projections/Miller.js",[],function(){var e=Math.PI/4,o=Math.PI/180;return t.prototype.forward=function(t){return[t[0]*o*63.78137,79.7267125*Math.log(Math.tan(e+.4*t[1]*o))]},t.prototype.inverse=function(t){return[t[0]/63.78137/o,2.5*(Math.atan(Math.exp(t[1]/63.78137*.8))-e)/o]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}}),e(t,"Maps/Projections/Orthographic.js",[],function(){var n=Math.PI/180;return t.prototype.forward=function(t){var e=t[0];return t=t[1]*n,t=[Math.cos(t)*Math.sin(e*n)*63.78460826781007,63.78460826781007*Math.sin(t)],(e<-90||90<e)&&(t.outside=!0),t},t.prototype.inverse=function(t){var e=t[0]/63.78460826781007,o=(t=t[1]/63.78460826781007,Math.sqrt(e*e+t*t)),i=Math.asin(o),r=Math.sin(i);return[Math.atan2(e*r,o*Math.cos(i))/n,Math.asin(o&&t*r/o)/n]},t;function t(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}}),e(t,"Maps/Projections/WebMercator.js",[],function(){var o=Math.PI/180;return t.prototype.forward=function(t){var e=Math.sin(t[1]*o),e=[63.78137*t[0]*o,63.78137*Math.log((1+e)/(1-e))/2];return 85.0511287798<Math.abs(t[1])&&(e.outside=!0),e},t.prototype.inverse=function(t){return[t[0]/(63.78137*o),(2*Math.atan(Math.exp(t[1]/63.78137))-Math.PI/2)/o]},t;function t(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}}),e(t,"Maps/Projections/ProjectionRegistry.js",[t["Maps/Projections/LambertConformalConic.js"],t["Maps/Projections/EqualEarth.js"],t["Maps/Projections/Miller.js"],t["Maps/Projections/Orthographic.js"],t["Maps/Projections/WebMercator.js"]],function(t,e,o,i,r){return{EqualEarth:e,LambertConformalConic:t,Miller:o,Orthographic:i,WebMercator:r}}),e(t,"Maps/Projection.js",[t["Core/Geometry/PolygonClip.js"],t["Maps/Projections/ProjectionRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){function u(t){return t<-180&&(t+=360),180<t&&(t-=360),t}var d=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},v=t.clipLineString,x=t.clipPolygon,f=o.clamp,y=o.erase,b=2*Math.PI/360;return M.add=function(t,e){M.registry[t]=e},M.greatCircle=function(t,e,o){var i=Math.atan2,r=Math.cos,n=Math.sin,s=Math.sqrt,a=t[1]*b,l=t[0]*b,p=e[1]*b,h=e[0]*b,c=p-a,u=h-l,d=(c=2*i(s(c=n(c/2)*n(c/2)+r(a)*r(p)*n(u/2)*n(u/2)),s(1-c)),Math.round(6371e3*c/5e5)),u=[];if(o&&u.push(t),1<d)for(d=t=1/d;d<.999;d+=t){var f=n((1-d)*c)/n(c),y=n(d*c)/n(c),m=f*r(a)*r(l)+y*r(p)*r(h),g=f*r(a)*n(l)+y*r(p)*n(h);f=i(f*n(a)+y*n(p),s(m*m+g*g)),m=i(g,m),u.push([m/b,f/b])}return o&&u.push(e),u},M.insertGreatCircles=function(t){for(var e,o=t.length-1;o--;)10<Math.max(Math.abs(t[o][0]-t[o+1][0]),Math.abs(t[o][1]-t[o+1][1]))&&((e=M.greatCircle(t[o],t[o+1])).length&&t.splice.apply(t,d([o+1,0],e,!1)))},M.toString=function(t){var e=(t=t||{}).rotation;return[t.name,e&&e.join(",")].join(";")},M.prototype.lineIntersectsBounds=function(t){function e(t,e,o){var i=t[0],r=(t=t[1],e?0:1);if("number"==typeof o&&i[e]>=o!=t[e]>=o)return i=i[r]+(o-i[e])/(t[e]-i[e])*(t[r]-i[r]),e?[i,o]:[o,i]}var o=this.bounds||{},i=o.x2,r=o.y1,n=o.y2,s=t[0];return((o=e(t,0,o.x1))||(o=e(t,0,i)))&&(s=o,t[1]=o),s=(o=e(t,1,r))||(o=e(t,1,n))?o:s},M.prototype.getRotator=function(t){var r=t[0]*b,e=(t[1]||0)*b,n=(t=(t[2]||0)*b,Math.cos(e)),s=Math.sin(e),a=Math.cos(t),l=Math.sin(t);if(0!=r||0!=e||0!==t)return{forward:function(t){var e=t[0]*b+r,o=t[1]*b,i=Math.cos(o);return t=Math.cos(e)*i,e=Math.sin(e)*i,i=(o=Math.sin(o))*n+t*s,[Math.atan2(e*a-i*l,t*n-o*s)/b,Math.asin(i*a+e*l)/b]},inverse:function(t){var e=t[0]*b,o=t[1]*b,i=Math.cos(o);return t=Math.cos(e)*i,e=Math.sin(e)*i,i=(o=Math.sin(o))*a-e*l,[(Math.atan2(e*a+o*l,t*n+i*s)-r)/b,Math.asin(i*n-t*s)/b]}}},M.prototype.forward=function(t){return t},M.prototype.inverse=function(t){return t},M.prototype.cutOnAntimeridian=function(n,s){var t,a=[],e=[n];if(n.forEach(function(t,e){var o=n[e-1];if(!e){if(!s)return;o=n[n.length-1]}var i=o[0],r=t[0];(i<-90||90<i)&&(r<-90||90<r)&&0<i!=0<r&&(r=f((180-(i+360)%360)/((r+360)%360-(i+360)%360),0,1),a.push({i:e,lat:o[1]+r*(t[1]-o[1]),direction:i<0?1:-1,previousLonLat:o,lonLat:t}))}),a.length)if(s){1==a.length%2&&(t=a.slice().sort(function(t,e){return Math.abs(e.lat)-Math.abs(t.lat)})[0],y(a,t));for(var o=a.length-2;0<=o;){var i=a[o].i,r=u(180+1e-6*a[o].direction),l=u(180-1e-6*a[o].direction);(i=n.splice.apply(n,d([i,a[o+1].i-i],M.greatCircle([r,a[o].lat],[r,a[o+1].lat],!0),!1))).push.apply(i,M.greatCircle([l,a[o+1].lat],[l,a[o].lat],!0)),e.push(i),o-=2}if(t)for(r=0;r<e.length;r++){var o=t.direction,p=t.lat;if(-1<(i=(l=e[r]).indexOf(t.lonLat))){var r=(p<0?-1:1)*this.maxLatitude,h=u(180+1e-6*o),c=u(180-1e-6*o),p=M.greatCircle([h,p],[h,r],!0);for(h+=120*o;-180<h&&h<180;h+=120*o)p.push([h,r]);p.push.apply(p,M.greatCircle([c,r],[c,t.lat],!0)),l.splice.apply(l,d([i,0],p,!1));break}}}else for(o=a.length;o--;)i=a[o].i,(i=n.splice(i,n.length,[u(180+1e-6*a[o].direction),a[o].lat])).unshift([u(180-1e-6*a[o].direction),a[o].lat]),e.push(i);return e},M.prototype.path=function(t){function e(t){var e=[t=t.map(function(t){var e;return g&&(e=(t=n?n.forward(t):t)[0],t=[e=Math.abs(e-180)<1e-6?e<180?179.999999:180.000001:e,t[1]]),t})];m&&(M.insertGreatCircles(t),g&&(e=o.cutOnAntimeridian(t,y))),e.forEach(function(t){if(!(t.length<2)){function e(t){o?f.push(["L",t[0],t[1]]):(f.push(["M",t[0],t[1]]),o=!0)}var o=!1,i=!1,r=!1,n=!1,s=t.map(function(t){return(t=b.forward(t)).outside?r=!0:n=!0,1/0===t[1]?t[1]=1e10:-1/0===t[1]&&(t[1]=-1e10),t});if(g){if(y&&s.push(s[0]),r){if(!n)return;if(u)if(y)s=x(s,u);else if(d)return void v(s,u).forEach(function(t){o=!1,t.forEach(e)})}s.forEach(e)}else for(var a=0;a<s.length;a++){var l,p,h=t[a],c=s[a];i=!!c.outside||(y&&!l&&(t.push(l=h),s.push(c)),i&&p&&(y&&m?M.greatCircle(p,h).forEach(function(t){return e(b.forward(t))}):o=!1),e(c),p=h,!1)}}})}var u,o=this,d=this.bounds,i=this.def,r=this.rotator,f=[],y="Polygon"===t.type||"MultiPolygon"===t.type,m=this.hasGeoProjection,g=!i||!1!==i.antimeridianCutting,n=g?r:void 0,b=g&&i||this;d&&(u=[[d.x1,d.y1],[d.x2,d.y1],[d.x2,d.y2],[d.x1,d.y2]]);return"LineString"===t.type?e(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(e):"Polygon"===t.type?(t.coordinates.forEach(e),f.length&&f.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(function(t){t.forEach(e)}),f.length&&f.push(["Z"])),f},M.registry=e,M;function M(t){void 0===t&&(t={}),this.hasGeoProjection=this.hasCoordinates=!1,this.maxLatitude=90;var e=(this.options=t).name,o=t.projectedBounds,i=t.rotation,r=(this.rotator=i?this.getRotator(i):void 0,(e=e?M.registry[e]:void 0)&&(this.def=new e(t)),this.def),n=this.rotator;r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),n&&r?(this.forward=function(t){return r.forward(n.forward(t))},this.inverse=function(t){return n.inverse(r.inverse(t))}):r?(this.forward=function(t){return r.forward(t)},this.inverse=function(t){return r.inverse(t)}):n&&(this.forward=n.forward,this.inverse=n.inverse),this.bounds="world"===o?r&&r.bounds:o}}),e(t,"Maps/MapView.js",[t["Maps/MapViewOptionsDefault.js"],t["Maps/MapViewInsetsOptionsDefault.js"],t["Extensions/GeoJSON.js"],t["Core/Chart/MapChart.js"],t["Maps/MapUtilities.js"],t["Maps/Projection.js"],t["Core/Utilities.js"]],function(h,i,t,e,o,c,r){function u(t,e){return Math.log(400.979322/Math.max((t.x2-t.x1)/(e.width/256),(t.y2-t.y1)/(e.height/256)))/Math.log(2)}var s,n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),d=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},l=t.topo2geo,p=e.maps,f=o.boundsFromPath,y=o.pointInPolygon,m=r.addEvent,g=r.clamp,b=r.fireEvent,v=r.isArray,x=r.isNumber,M=r.isObject,j=r.isString,C=r.merge,w=r.pick,P=r.relativeLength,S=(T.mergeInsets=function(t,e){function o(t){var o={};return t.forEach(function(t,e){o[t&&t.id||"i".concat(e)]=t}),o}var i=C(o(t),o(e));return Object.keys(i).map(function(t){return i[t]})},T.prototype.createInsets=function(){var e=this,o=this.options,t=o.insets;t&&t.forEach(function(t){t=new L(e,C(o.insetOptions,t)),e.insets.push(t)})},T.prototype.fitToBounds=function(t,e,o,i){void 0===o&&(o=!0);var r,n=t||this.getProjectedBounds();n&&(r=w(e,t?0:this.options.padding),e=this.getField(!1),r=v(r)?r:[r,r,r,r],this.padding=[P(r[0],e.height),P(r[1],e.width),P(r[2],e.height),P(r[3],e.width)],this.playingField=this.getField(),e=u(n,this.playingField),t||(this.minZoom=e),t=this.projection.inverse([(n.x2+n.x1)/2,(n.y2+n.y1)/2]),this.setView(t,e,o,i))},T.prototype.getField=function(t){return{x:(t=(t=void 0===t?!0:t)?this.padding:[0,0,0,0])[3],y:t[0],width:this.chart.plotWidth-t[1]-t[3],height:this.chart.plotHeight-t[0]-t[2]}},T.prototype.getGeoMap=function(t){return j(t)?p[t]:M(t,!0)?"FeatureCollection"===t.type?t:"Topology"===t.type?l(t):void 0:void 0},T.prototype.getMapBBox=function(){var t,e,o=this.getProjectedBounds(),i=this.getScale();if(o)return t=this.padding,e=this.projectedUnitsToPixels({x:o.x1,y:o.y2}),{width:(o.x2-o.x1)*i+t[1]+t[3],height:(o.y2-o.y1)*i+t[0]+t[2],x:e.x-t[3],y:e.y-t[0]}},T.prototype.getProjectedBounds=function(){var e=this.projection,t=this.chart.series.reduce(function(t,e){var o=e.getProjectedBounds&&e.getProjectedBounds();return o&&!1!==e.options.affectsMapView&&t.push(o),t},[]),o=this.options.fitToGeometry;return o?(this.fitToGeometryCache||("MultiPoint"===o.type?(t=(o=o.coordinates.map(function(t){return e.forward(t)})).map(function(t){return t[0]}),o=o.map(function(t){return t[1]}),this.fitToGeometryCache={x1:Math.min.apply(0,t),x2:Math.max.apply(0,t),y1:Math.min.apply(0,o),y2:Math.max.apply(0,o)}):this.fitToGeometryCache=f(e.path(o))),this.fitToGeometryCache):this.projection.bounds||T.compositeBounds(t)},T.prototype.getScale=function(){return 256/400.979322*Math.pow(2,this.zoom)},T.prototype.getSVGTransform=function(){var t=(i=this.playingField).x,e=i.y,o=i.width,i=i.height,r=this.projection.forward(this.center),n=this.projection.hasCoordinates?-1:1,s=this.getScale();return{scaleX:s,scaleY:n*=s,translateX:t+o/2-r[0]*s,translateY:e+i/2-r[1]*n}},T.prototype.lonLatToPixels=function(t){if(t=this.lonLatToProjectedUnits(t))return this.projectedUnitsToPixels(t)},T.prototype.lonLatToProjectedUnits=function(t){var e=this.chart,o=e.mapTransforms;if(o){for(var i in o)if(Object.hasOwnProperty.call(o,i)&&o[i].hitZone){var r=e.transformFromLatLon(t,o[i]);if(r&&y(r,o[i].hitZone.coordinates[0]))return r}return e.transformFromLatLon(t,o.default)}for(o=0,i=this.insets;o<i.length;o++)if((e=i[o]).options.geoBounds&&y({x:t.lon,y:t.lat},e.options.geoBounds.coordinates[0]))return t=e.projection.forward([t.lon,t.lat]),t=e.projectedUnitsToPixels({x:t[0],y:t[1]}),this.pixelsToProjectedUnits(t);if(!(t=this.projection.forward([t.lon,t.lat])).outside)return{x:t[0],y:t[1]}},T.prototype.projectedUnitsToLonLat=function(t){var e=this.chart;if(i=e.mapTransforms){for(var o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone&&y(t,i[o].hitZone.coordinates[0]))return e.transformToLatLon(t,i[o]);return e.transformToLatLon(t,i.default)}for(var i=this.projectedUnitsToPixels(t),o=0,r=this.insets;o<r.length;o++)if((e=r[o]).hitZone&&y(i,e.hitZone.coordinates[0]))return t=e.pixelsToProjectedUnits(i),{lon:(t=e.projection.inverse([t.x,t.y]))[0],lat:t[1]};return{lon:(t=this.projection.inverse([t.x,t.y]))[0],lat:t[1]}},T.prototype.redraw=function(t){this.chart.series.forEach(function(t){t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)},T.prototype.setView=function(t,e,o,i){void 0===o&&(o=!0),t&&(this.center=t),"number"==typeof e&&("number"==typeof this.minZoom&&(e=Math.max(e,this.minZoom)),"number"==typeof this.options.maxZoom&&(e=Math.min(e,this.options.maxZoom)),x(e)&&(this.zoom=e));var r,n,s,a,l,p,h,c,u=this.getProjectedBounds();u&&(t=this.projection.forward(this.center),e=(s=this.playingField).x,r=s.y,n=s.width,s=s.height,a=this.getScale(),c=this.projectedUnitsToPixels({x:u.x1,y:u.y1}),h=this.projectedUnitsToPixels({x:u.x2,y:u.y2}),u=[(u.x1+u.x2)/2,(u.y1+u.y2)/2],l=c.x,p=h.y,h=h.x,c=c.y,h-l<n?t[0]=u[0]:l<e&&h<e+n?t[0]+=Math.max(l-e,h-n-e)/a:e+n<h&&e<l&&(t[0]+=Math.min(h-n-e,l-e)/a),c-p<s?t[1]=u[1]:p<r&&c<r+s?t[1]-=Math.max(p-r,c-s-r)/a:r+s<c&&r<p&&(t[1]-=Math.min(c-s-r,p-r)/a),this.center=this.projection.inverse(t),this.insets.forEach(function(t){t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()),b(this,"afterSetView"),o&&this.redraw(i)},T.prototype.projectedUnitsToPixels=function(t){var e=this.getScale(),o=this.projection.forward(this.center),i=this.playingField;return{x:i.x+i.width/2-e*(o[0]-t.x),y:i.y+i.height/2+e*(o[1]-t.y)}},T.prototype.pixelsToLonLat=function(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))},T.prototype.pixelsToProjectedUnits=function(t){var e=t.x,o=(t=t.y,this.getScale()),i=this.projection.forward(this.center),r=this.playingField;return{x:i[0]+(e-(r.x+r.width/2))/o,y:i[1]-(t-(r.y+r.height/2))/o}},T.prototype.setUpEvents=function(){function t(t){var e,o,i=c.pointer.pinchDown,r=h.projection,n=c.mouseDownX,s=c.mouseDownY;1===i.length&&(n=i[0].chartX,s=i[0].chartY),"number"==typeof n&&"number"==typeof s&&(e=""+n+",".concat(s),i=(o=t.originalEvent).chartX,o=o.chartY,e!==l&&(l=e,a=h.projection.forward(h.center),p=(h.projection.options.rotation||[0,0]).slice()),e=(e=r.def&&r.def.bounds)&&u(e,h.playingField)||-1/0,"Orthographic"===r.options.name&&(h.minZoom||1/0)<1.1*e?(r=440/(h.getScale()*Math.min(c.plotWidth,c.plotHeight)),p&&(n=(n-i)*r-p[0],s=g(-p[1]-(s-o)*r,-80,80),i=h.zoom,h.update({projection:{rotation:[-n,-s]}},!1),h.zoom=i,c.redraw(!1))):x(i)&&x(o)&&(r=h.getScale(),s=h.projection.inverse([a[0]+(n-i)/r,a[1]-(s-o)/r*(h.projection.hasCoordinates?1:-1)]),h.setView(s,void 0,!0,!1)),t.preventDefault())}var a,l,p,h=this,c=this.chart;m(c,"pan",t),m(c,"touchpan",t),m(c,"selection",function(t){var e,o,i,r;t.resetSelection?h.zoomBy():(r=t.x-c.plotLeft,e=t.y-c.plotTop,o=(i=h.pixelsToProjectedUnits({x:r,y:e})).y,i=i.x,r=h.pixelsToProjectedUnits({x:r+t.width,y:e+t.height}),h.fitToBounds({x1:i,y1:o,x2:r.x,y2:r.y},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||c.showResetZoom(),t.preventDefault())})},T.prototype.render=function(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())},T.prototype.update=function(t,e,o){void 0===e&&(e=!0);var i=(i=t.projection)&&c.toString(i)!==c.toString(this.options.projection),r=!1;C(!0,this.userOptions,t),C(!0,this.options,t),"insets"in t&&(this.insets.forEach(function(t){return t.destroy()}),this.insets.length=0,r=!0),(i||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(i||r)&&(this.chart.series.forEach(function(t){var e=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&e)for(;1<e.length;)(t=e.pop())&&t.destroy()}),i&&(this.projection=new c(this.options.projection)),r&&this.createInsets(),t.center||x(t.zoom)||this.fitToBounds(void 0,void 0,!1)),t.center||x(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(o)},T.prototype.zoomBy=function(t,e,o,i){var r=this.chart,n=this.projection.forward(this.center),s=(e=e?this.projection.forward(e):[])[0],a=e[1];"number"==typeof t?(t=this.zoom+t,e=void 0,o&&(s=o[0],a=o[1],o=this.getScale(),s=s-r.plotLeft-r.plotWidth/2,r=a-r.plotTop-r.plotHeight/2,s=n[0]+s/o,a=n[1]+r/o),"number"==typeof s&&"number"==typeof a&&(o=1-Math.pow(2,this.zoom)/Math.pow(2,t),s=n[0]-s,r=n[1]-a,n[0]-=s*o,n[1]+=r*o,e=this.projection.inverse(n)),this.setView(e,t,void 0,i)):this.fitToBounds(void 0,void 0,void 0,i)},T.compositeBounds=function(t){if(t.length)return t.slice(1).reduce(function(t,e){return t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2),t},C(t[0]))},T),L=(a(A,s=S),A.prototype.getField=function(t){if(void 0===t&&(t=!0),e=this.hitZone){var e,o=t?this.padding:[0,0,0,0],i=(e=e.coordinates[0]).map(function(t){return t[0]}),r=e.map(function(t){return t[1]}),n=(e=Math.min.apply(0,i)+o[3],i=Math.max.apply(0,i)-o[1],Math.min.apply(0,r)+o[0]),o=Math.max.apply(0,r)-o[2];if(x(e)&&x(n))return{x:e,y:n,width:i-e,height:o-n}}return s.prototype.getField.call(this,t)},A.prototype.getHitZone=function(){var e,t=this.chart,o=this.mapView,i=this.options,r=(i.field||{}).coordinates;if(r)return r=r[0],"percent"===i.units&&(e="mapBoundingBox"===i.relativeTo&&o.getMapBBox()||C(t.plotBox,{x:0,y:0}),r=r.map(function(t){return[P(t[0]+"%",e.width,e.x),P(t[1]+"%",e.height,e.y)]})),{type:"Polygon",coordinates:[r]}},A.prototype.getProjectedBounds=function(){return S.compositeBounds(this.allBounds)},A.prototype.isInside=function(t){var e=this.geoBoundsProjectedBox,o=this.geoBoundsProjectedPolygon;return!!(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&o&&y(t,o))},A.prototype.render=function(){var t,r,n,s=this.chart,e=this.mapView,a=this.options,o=a.borderPath||a.field;o&&e.group&&(t=!0,this.border||(this.border=s.renderer.path().addClass("highcharts-mapview-inset-border").add(e.group),t=!1),s.styledMode||this.border.attr({stroke:a.borderColor,"stroke-width":a.borderWidth}),r=Math.round(this.border.strokeWidth())%2/2,n="mapBoundingBox"===a.relativeTo&&e.getMapBBox()||e.playingField,e=(o.coordinates||[]).reduce(function(t,e){return e.reduce(function(t,e,o){var i=e[0];return e=e[1],"percent"===a.units&&(i=s.plotLeft+P(i+"%",n.width,n.x),e=s.plotTop+P(e+"%",n.height,n.y)),i=Math.floor(i)+r,e=Math.floor(e)+r,t.push(0===o?["M",i,e]:["L",i,e]),t},t)},[]),this.border[t?"animate":"attr"]({d:e}))},A.prototype.destroy=function(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(function(t){return t()})},A.prototype.setUpEvents=function(){},A);function A(t,e){var o=s.call(this,t.chart,e)||this;return o.id=e.id,o.mapView=t,o.options=C(i,e),o.allBounds=[],o.options.geoBounds&&(t=t.projection.path(o.options.geoBounds),o.geoBoundsProjectedBox=f(t),o.geoBoundsProjectedPolygon=t.map(function(t){return[t[1]||0,t[2]||0]})),o}function T(t,e){var o,i,r,n,s,a,l,p=this;this.insets=[],this.padding=[0,0,0,0],this.eventsToUnbind=[],this instanceof L||(i=d([t.options.chart.map],(t.options.series||[]).map(function(t){return t.mapData}),!0).map(function(t){return p.getGeoMap(t)}),r=[],i.forEach(function(t){t&&(o=o||t["hc-recommended-mapview"],t.bbox&&(t=t.bbox,r.push({x1:t[0],y1:t[1],x2:t[2],y2:t[3]})))}),(a=r.length&&T.compositeBounds(r))&&(l=a.x1,n=a.y1,s=a.x2,a=a.y2,l=180<s-l&&90<a-n?{name:"EqualEarth"}:{name:"LambertConformalConic",parallels:[n,a],rotation:[-(l+s)/2]}),this.geoMap=i[0]),this.userOptions=e||{},i=C(h,{projection:l},o,e),a=o&&o.insets,e=e&&e.insets,a&&e&&(i.insets=T.mergeInsets(a,e)),this.chart=t,this.center=i.center,this.options=i,this.projection=new c(i.projection),this.playingField=t.plotBox,this.zoom=i.zoom||0,this.createInsets(),this.eventsToUnbind.push(m(t,"afterSetChartSize",function(){p.playingField=p.getField(),void 0!==p.minZoom&&p.minZoom!==p.zoom||(p.fitToBounds(void 0,void 0,!1),!p.chart.hasRendered&&x(p.userOptions.zoom)&&(p.zoom=p.userOptions.zoom),p.userOptions.center&&C(!0,p.center,p.userOptions.center))})),this.setUpEvents()}return m(e,"afterInit",function(){this.mapView=new S(this,this.options.mapView)}),S}),e(t,"Series/Map/MapSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/ColorMapComposition.js"],t["Series/CenteredUtilities.js"],t["Core/Globals.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Maps/MapView.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,f,i,r,y,l,n,s,p,a){var h,c,u=this&&this.__extends||(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),d=t.animObject,m=(t=f.noop,r.splitPath),g=(r=s.seriesTypes).column,b=r.scatter,v=(r=a.extend,a.find),x=a.fireEvent,M=a.getNestedProperty,j=a.isArray,C=a.defined,w=a.isNumber,P=a.isObject,S=a.merge,L=a.objectEach,A=a.pick,T=a.splat;function O(){var t=null!==c&&c.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.group=void 0,t.joinBy=void 0,t.options=void 0,t.points=void 0,t.processedData=[],t}return u(O,c=b),O.prototype.animate=function(t){var e=this.chart,o=this.group,i=d(this.options.animation);e.renderer.isSVG&&(t?o.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):o.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},i))},O.prototype.animateDrilldown=function(t){var e=this.chart,o=this.group;e.renderer.isSVG&&(t?o.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.1,scaleY:.1,opacity:.01}):(o.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1,opacity:1},this.chart.options.drilldown.animation),e.drilldown&&e.drilldown.fadeInGroup(this.dataLabelsGroup)))},O.prototype.animateDrillupFrom=function(){var t=this.chart;t.renderer.isSVG&&this.group.animate({translateX:t.plotLeft+t.plotWidth/2,translateY:t.plotTop+t.plotHeight/2,scaleX:.1,scaleY:.1,opacity:.01})},O.prototype.animateDrillupTo=function(t){g.prototype.animateDrillupTo.call(this,t)},O.prototype.clearBounds=function(){this.points.forEach(function(t){delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds},O.prototype.doFullTranslate=function(){return!(!(this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML)&&this.hasRendered)},O.prototype.drawMapDataLabels=function(){n.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},O.prototype.drawPoints=function(){var c=this,u=this,d=this.chart,o=this.group,t=this.transformGroups,i=void 0===t?[]:t,e=d.mapView,f=d.renderer;e&&((this.transformGroups=i)[0]||(i[0]=f.g().add(o)),e.insets.forEach(function(t,e){i[e+1]||i.push(f.g().add(o))}),this.doFullTranslate()&&(this.points.forEach(function(t){var e=t.graphic,o=t.shapeArgs;t.group=i["number"==typeof t.insetIndex?t.insetIndex+1:0],e&&e.parentGroup!==t.group&&e.add(t.group),o&&d.hasRendered&&!d.styledMode&&(o.fill=c.pointAttribs(t,t.state).fill)}),g.prototype.drawPoints.apply(this),this.points.forEach(function(t){var s,e,a=t.graphic;a&&(s=a.animate,e="",t.name&&(e+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&(e+=" highcharts-key-"+t.properties["hc-key"].toString().toLowerCase()),e&&a.addClass(e),d.styledMode&&a.css(c.pointAttribs(t,t.selected?"select":void 0)),a.animate=function(t,e,o){var i,r=w(t["stroke-width"])&&!w(a["stroke-width"]),n=w(a["stroke-width"])&&!w(t["stroke-width"]);return(r||n)&&(i=A(u.getStrokeWidth(u.options),1)/(d.mapView&&d.mapView.getScale()||1),r&&(a["stroke-width"]=i),n&&(t["stroke-width"]=i)),s.call(a,t,e,n?function(){a.element.removeAttribute("stroke-width"),delete a["stroke-width"],o&&o.apply(this,arguments)}:o)})})),i.forEach(function(o,t){function i(o){(u.points||[]).forEach(function(t){var e=t.graphic;e&&e["stroke-width"]&&(t=c.getStrokeWidth(t.options))&&e.attr({"stroke-width":t/o})})}var r,n,s,a=(0===t?e:e.insets[t-1]).getSVGTransform(),l=A(c.getStrokeWidth(c.options),1),p=a.scaleX,h=0<a.scaleY?1:-1;f.globalAnimation&&d.hasRendered?(r=Number(o.attr("translateX")),n=Number(o.attr("translateY")),s=Number(o.attr("scaleX")),o.attr({animator:0}).animate({animator:1},{step:function(t,e){t=s+(p-s)*e.pos,o.attr({translateX:r+(a.translateX-r)*e.pos,translateY:n+(a.translateY-n)*e.pos,scaleX:t,scaleY:t*h,"stroke-width":l/t}),i(t)}})):(o.attr(S(a,{"stroke-width":l/p})),i(p))}),this.drawMapDataLabels())},O.prototype.getProjectedBounds=function(){var t,n,s,a;return!this.bounds&&this.chart.mapView&&(t=this.chart.mapView,n=t.insets,s=t.projection,a=[],(this.points||[]).forEach(function(t){var e,o,i,r;(t.path||t.geometry)&&("string"==typeof t.path?t.path=m(t.path):j(t.path)&&"M"===t.path[0]&&(t.path=p.prototype.pathToSegments(t.path)),t.bounds||(e=t.getProjectedBounds(s))&&(t.labelrank=A(t.labelrank,(e.x2-e.x1)*(e.y2-e.y1)),o=e.midX,i=e.midY,n&&w(o)&&w(i)&&((r=v(n,function(t){return t.isInside({x:o,y:i})}))&&(delete t.projectedPath,(e=t.getProjectedBounds(r.projection))&&r.allBounds.push(e),t.insetIndex=n.indexOf(r))),t.bounds=e),t.bounds&&void 0===t.insetIndex&&a.push(t.bounds))}),this.bounds=l.compositeBounds(a)),this.bounds},O.prototype.getStrokeWidth=function(t){var e=this.pointAttrToOptions;return t[e&&e["stroke-width"]||"borderWidth"]},O.prototype.hasData=function(){return!!this.processedXData.length},O.prototype.pointAttribs=function(t,e){var o=(i=t.series.chart).mapView,i=i.styledMode?this.colorAttribs(t):g.prototype.pointAttribs.call(this,t,e),r=this.getStrokeWidth(t.options);return e&&(e=S(this.options.states[e],t.options.states&&t.options.states[e]||{}),e=this.getStrokeWidth(e),C(e)&&(r=e)),r&&o&&(r/=o.getScale()),e=this.getStrokeWidth(this.options),i.dashstyle&&o&&w(e)&&(r=e/o.getScale()),t.visible||(i.fill=this.options.nullColor),C(r)?i["stroke-width"]=r:delete i["stroke-width"],i["stroke-linecap"]=i["stroke-linejoin"]=this.options.linecap,i},O.prototype.updateData=function(){return!this.processedData&&c.prototype.updateData.apply(this,arguments)},O.prototype.setData=function(t,e,o,i){void 0===e&&(e=!0),delete this.bounds,c.prototype.setData.call(this,t,!1,void 0,i),this.processData(),this.generatePoints(),e&&this.chart.redraw(o)},O.prototype.processData=function(){var t,e,o,i,r=this.options,n=r.data,s=this.chart.options.chart,a=this.joinBy,l=r.keys||this.pointArrayMap,p=[],h={},c=(c=this.chart.mapView)&&(P(r.mapData,!0)?c.getGeoMap(r.mapData):c.geoMap),u=this.chart.mapTransforms,d=((this.chart.mapTransforms=u=s.mapTransforms||c&&c["hc-transform"]||u)&&L(u,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),j(r.mapData)?t=r.mapData:c&&"FeatureCollection"===c.type&&(this.mapTitle=c.title,t=f.geojson(c,this.type,this)),this.processedData=[]);if(n&&n.forEach(function(t,e){var o=0;if(w(t))d[e]={value:t};else if(j(t)){d[e]={},!r.keys&&t.length>l.length&&"string"==typeof t[0]&&(d[e]["hc-key"]=t[0],++o);for(var i=0;i<l.length;++i,++o)l[i]&&void 0!==t[o]&&(0<l[i].indexOf(".")?y.prototype.setNestedProperty(d[e],t[o],l[i]):d[e][l[i]]=t[o])}else d[e]=n[e];a&&"_i"===a[0]&&(d[e]._i=e)}),t){for(this.mapData=t,this.mapMap={},u=0;u<t.length;u++)c=(s=t[u]).properties,s._i=u,a[0]&&c&&c[a[0]]&&(s[a[0]]=c[a[0]]),h[s[a[0]]]=s;this.mapMap=h,a[1]&&(e=a[1],d.forEach(function(t){t=M(e,t),h[t]&&p.push(h[t])})),r.allAreas&&(a[1]&&(o=a[1],d.forEach(function(t){p.push(M(o,t))})),i="|"+p.map(function(t){return t&&t[a[0]]}).join("|")+"|",t.forEach(function(t){a[0]&&-1!==i.indexOf("|"+t[a[0]]+"|")||d.push(S(t,{value:null}))}))}this.processedXData=Array(d.length)},O.prototype.setOptions=function(t){var e=(t=n.prototype.setOptions.call(this,t)).joinBy;return(e=this.joinBy=T(e=null===e?"_i":e))[1]||(e[1]=e[0]),t},O.prototype.translate=function(){var o,i=this.doFullTranslate(),r=this.chart.mapView,n=r&&r.projection;!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints(),delete this.bounds,!r||r.userOptions.center||w(r.userOptions.zoom)?this.getProjectedBounds():r.fitToBounds(void 0,void 0,!1)),r&&(o=r.getSVGTransform(),this.points.forEach(function(t){var e=w(t.insetIndex)&&r.insets[t.insetIndex].getSVGTransform()||o;e&&t.bounds&&w(t.bounds.midX)&&w(t.bounds.midY)&&(t.plotX=t.bounds.midX*e.scaleX+e.translateX,t.plotY=t.bounds.midY*e.scaleY+e.translateY),i&&(t.shapeType="path",t.shapeArgs={d:y.getProjectedPath(t,n)})})),x(this,"afterTranslate")},O.defaultOptions=S(b.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){var t=this.series.chart.numberFormatter,e=this.point.value;return w(e)?t(e,-1):""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"butt",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#cccccc",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:null,brightness:.2},normal:{animation:!0},select:{color:"#cccccc"}}}),r((a=O).prototype,{type:"map",axisTypes:e.seriesMembers.axisTypes,colorAttribs:e.seriesMembers.colorAttribs,colorKey:e.seriesMembers.colorKey,directTouch:!0,drawDataLabels:t,drawGraph:t,drawLegendSymbol:i.drawRectangle,forceDL:!0,getCenter:o.getCenter,getExtremesFromAll:!0,getSymbol:t,isCartesian:!1,parallelArrays:e.seriesMembers.parallelArrays,pointArrayMap:e.seriesMembers.pointArrayMap,pointClass:y,preserveAspectRatio:!0,searchPoint:t,trackerGroups:e.seriesMembers.trackerGroups,useMapGeometry:!0}),e.compose(a),s.registerSeriesType("map",a),a}),e(t,"Series/MapLine/MapLineSeries.js",[t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(o,t,e){var i,r,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=t.series,a=e.extend,l=e.merge;function p(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return n(p,r=o),p.prototype.pointAttribs=function(t,e){return(t=o.prototype.pointAttribs.call(this,t,e)).fill=this.options.fillColor,t},p.defaultOptions=l(o.defaultOptions,{lineWidth:1,fillColor:"none"}),a((e=p).prototype,{type:"mapline",colorProp:"stroke",drawLegendSymbol:s.prototype.drawLegendSymbol,pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),t.registerSeriesType("mapline",e),e}),e(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=e.isNumber;return o=t.seriesTypes.scatter.prototype.pointClass,r(s,o),s.prototype.isValid=function(){return!!(this.options.geometry||n(this.x)&&n(this.y)||n(this.options.lon)&&n(this.options.lat))},s;function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}}),e(t,"Series/MapPoint/MapPointSeries.js",[t["Core/Globals.js"],t["Series/MapPoint/MapPointPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i,r){var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});t=t.noop;var a,l=(h=o.seriesTypes).map,p=h.scatter,h=r.extend,c=r.fireEvent,u=r.isNumber,d=r.merge;function f(){var t=null!==a&&a.apply(this,arguments)||this;return t.chart=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t.clearBounds=l.prototype.clearBounds,t}return s(f,a=p),f.prototype.drawDataLabels=function(){a.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},f.prototype.projectPoint=function(t){var e=this.chart.mapView;if(e){var o=t.geometry,i=t.lon;if(t=t.lat,o=o&&"Point"===o.type&&o.coordinates,o=u(i)&&u(t)?[i,t]:o)return e.lonLatToProjectedUnits({lon:o[0],lat:o[1]})}},f.prototype.translate=function(){var s,a,l=this,p=this.chart.mapView;this.processedXData||this.processData(),this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),p&&(s=p.getSVGTransform(),a=p.projection.hasCoordinates,this.points.forEach(function(t){var e,o=void 0===(o=t.x)?void 0:o,i=void 0===(i=t.y)?void 0:i,r=u(t.insetIndex)&&p.insets[t.insetIndex].getSVGTransform()||s,n=l.projectPoint(t.options)||t.properties&&l.projectPoint(t.properties);n?(o=n.x,i=n.y):t.bounds&&(o=t.bounds.midX,i=t.bounds.midY,r&&u(o)&&u(i))&&(t.plotX=o*r.scaleX+r.translateX,t.plotY=i*r.scaleY+r.translateY,e=!0),u(o)&&u(i)?e||(e=p.projectedUnitsToPixels({x:o,y:i}),t.plotX=e.x,t.plotY=a?e.y:l.chart.plotHeight-e.y):t.y=t.plotX=t.plotY=void 0,t.isInside=l.isPointInside(t),t.zone=l.zones.length?t.getZone():void 0})),c(this,"afterTranslate")},f.defaultOptions=d(p.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}}}),r=f,i.prototype.symbols.mapmarker=function(t,e,o,i,r){var n=r&&"legend"===r.context;return n?(t+=o/2,r=e+i):r&&"number"==typeof r.anchorX&&"number"==typeof r.anchorY?(t=r.anchorX,r=r.anchorY):(t+=o/2,r=e+i/2,e-=i),[["M",t,r],["C",t,r,t-(i=n?i/3:i/2),e+1.5*i,t-i,e+i],["A",i,i,1,1,1,t+i,e+i],["C",t+i,e+1.5*i,t,r,t,r],["Z"]]},h(r.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:e,searchPoint:t,useMapGeometry:!0}),o.registerSeriesType("mappoint",r),r}),e(t,"Series/Bubble/BubbleLegendDefaults.js",[],function(){return{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"10px",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}),e(t,"Series/Bubble/BubbleLegendItem.js",[t["Core/Color/Color.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,r,e,o){var c=t.parse,i=e.noop,s=o.arrayMax,a=o.arrayMin,l=o.isNumber,u=o.merge,d=o.pick,p=o.stableSort;function n(t,e){this.options=this.symbols=this.visible=this.selected=this.ranges=this.movementX=this.maxLabel=this.legend=this.fontMetrics=this.chart=void 0,this.setState=i,this.init(t,e)}return n.prototype.init=function(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e},n.prototype.addToLegend=function(t){t.splice(this.options.legendIndex,0,this)},n.prototype.drawLegendSymbol=function(t){var e=this.chart,o=d(t.options.itemDistance,20),i=this.legendItem||{},r=this.options,n=r.ranges,s=r.connectorDistance;this.fontMetrics=e.renderer.fontMetrics(r.labels.style.fontSize),n&&n.length&&l(n[0].value)?(p(n,function(t,e){return e.value-t.value}),this.ranges=n,this.setOptions(),this.render(),t=this.getMaxLabelSize(),e=2*(n=this.ranges[0].radius),s=0<(s=s-n+t.width)?s:0,this.maxLabel=t,this.movementX="left"===r.labels.align?s:0,i.labelWidth=e+s+o,i.labelHeight=e+this.fontMetrics.h/2):t.options.bubbleLegend.autoRanges=!0},n.prototype.setOptions=function(){var o=this.ranges,i=this.options,r=this.chart.series[i.seriesIndex],n=this.legend.baseline,s={zIndex:i.zIndex,"stroke-width":i.borderWidth},a={zIndex:i.zIndex,"stroke-width":i.connectorWidth},l={align:this.legend.options.rtl||"left"===i.labels.align?"right":"left",zIndex:i.zIndex},p=r.options.marker.fillOpacity,h=this.chart.styledMode;o.forEach(function(t,e){h||(s.stroke=d(t.borderColor,i.borderColor,r.color),s.fill=d(t.color,i.color,1!==p?c(r.color).setOpacity(p).get("rgba"):r.color),a.stroke=d(t.connectorColor,i.connectorColor,r.color)),o[e].radius=this.getRangeRadius(t.value),o[e]=u(o[e],{center:o[0].radius-o[e].radius+n}),h||u(!0,o[e],{bubbleAttribs:u(s),connectorAttribs:u(a),labelAttribs:l})},this)},n.prototype.getRangeRadius=function(t){var e=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,e.ranges[e.ranges.length-1].value,e.ranges[0].value,e.minSize,e.maxSize,t)},n.prototype.render=function(){var t=this.legendItem||{},e=this.chart.renderer,o=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),t.symbol=e.g("bubble-legend"),t.label=e.g("bubble-legend-item"),t.symbol.translateX=0;for(var e=t.symbol.translateY=0,i=this.ranges;e<i.length;e++){var r=i[e];r.value>=o&&this.renderRange(r)}t.symbol.add(t.label),t.label.add(t.group),this.hideOverlappingLabels()},n.prototype.renderRange=function(t){var e=this.options,o=e.labels,i=(s=this.chart).series[e.seriesIndex],r=s.renderer,n=this.symbols,s=n.labels,a=t.center,l=Math.abs(t.radius),p=e.connectorDistance||0,h=o.align,c=e.connectorWidth,u=this.ranges[0].radius||0,d=a-l-e.borderWidth/2+c/2,f=(f=this.fontMetrics).f/2-(f.h-f.f)/2,y=r.styledMode,p=this.legend.options.rtl||"left"===h?-p:p,h=("center"===h&&(e.connectorDistance=p=0,t.labelAttribs.align="center"),d+e.labels.y),m=u+p+e.labels.x;n.bubbleItems.push(r.circle(u,a+((d%1?1:.5)-(c%2?0:.5)),l).attr(y?{}:t.bubbleAttribs).addClass((y?"highcharts-color-"+i.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(e.className||"")).add(this.legendItem.symbol)),n.connectors.push(r.path(r.crispLine([["M",u,d],["L",u+p,d]],e.connectorWidth)).attr(y?{}:t.connectorAttribs).addClass((y?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(e.connectorClassName||"")).add(this.legendItem.symbol)),t=r.text(this.formatLabel(t),m,h+f).attr(y?{}:t.labelAttribs).css(y?{}:o.style).addClass("highcharts-bubble-legend-labels "+(e.labels.className||"")).add(this.legendItem.symbol),s.push(t),t.placed=!0,t.alignAttr={x:m,y:h+f}},n.prototype.getMaxLabelSize=function(){var e,o;return this.symbols.labels.forEach(function(t){o=t.getBBox(!0),e=!e||o.width>e.width?o:e}),e||{}},n.prototype.formatLabel=function(t){var e=(o=this.options).labels.formatter,o=o.labels.format,i=this.chart.numberFormatter;return o?r.format(o,t):e?e.call(t):i(t.value,1)},n.prototype.hideOverlappingLabels=function(){var t=this.chart,o=this.symbols;!this.options.labels.allowOverlap&&o&&(t.hideOverlappingLabels(o.labels),o.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&o.connectors[e].show():o.connectors[e].hide()}))},n.prototype.getRanges=function(){var e,t=this.legend.bubbleLegend,o=t.options.ranges,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,n=(t.chart.series.forEach(function(t){t.isBubble&&!t.ignoreSeries&&((e=t.zData.filter(l)).length&&(i=d(t.options.zMin,Math.min(i,Math.max(a(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),r=d(t.options.zMax,Math.max(r,s(e)))))}),i===r?[{value:r}]:[{value:i},{value:(i+r)/2},{value:r,autoRanges:!0}]);return o.length&&o[0].radius&&n.reverse(),n.forEach(function(t,e){o&&o[e]&&(n[e]=u(o[e],t))}),n},n.prototype.predictBubbleSizes=function(){var t=this.chart,e=this.fontMetrics,o=t.legend.options,i=o.floating,r=(o="horizontal"===o.layout)?t.legend.lastLineHeight:0,n=t.plotSizeX,s=t.plotSizeY,a=(p=t.series[this.options.seriesIndex]).getPxExtremes(),t=Math.ceil(a.minPxSize),a=Math.ceil(a.maxPxSize),l=Math.min(s,n),p=p.options.maxSize;return i||!/%$/.test(p)?e=a:(p=parseFloat(p),e=(l+r-e.h/2)*p/100/(p/100+1),(o&&n<=s-e||!o&&s<=n-e)&&(e=a)),[t,Math.ceil(e)]},n.prototype.updateRanges=function(t,e){var o=this.legend.options.bubbleLegend;o.minSize=t,o.maxSize=e,o.ranges=this.getRanges()},n.prototype.correctSizes=function(){var t=this.legend,e=this.chart.series[this.options.seriesIndex].getPxExtremes();1<Math.abs(Math.ceil(e.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())},t=n}),e(t,"Series/Bubble/BubbleLegendComposition.js",[t["Series/Bubble/BubbleLegendDefaults.js"],t["Series/Bubble/BubbleLegendItem.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(i,n,t,e){function r(t,e,o){var i,r,n=this.legend,s=0<=a(this);n&&n.options.enabled&&n.bubbleLegend&&n.options.bubbleLegend.autoRanges&&s?(r=n.bubbleLegend.options,s=n.bubbleLegend.predictBubbleSizes(),n.bubbleLegend.updateRanges(s[0],s[1]),r.placed||(n.group.placed=!1,n.allItems.forEach(function(t){(i=t.legendItem||{}).group&&(i.group.translateY=null)})),n.render(),this.getMargins(),this.axes.forEach(function(t){t.visible&&t.render(),r.placed||(t.setScale(),t.updateNames(),d(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0}))}),r.placed=!0,this.getMargins(),t.call(this,e,o),n.bubbleLegend.correctSizes(),h(n,l(n))):(t.call(this,e,o),n&&n.options.enabled&&n.bubbleLegend&&(n.render(),h(n,l(n))))}function a(t){t=t.series;for(var e=0;e<t.length;){if(t[e]&&t[e].isBubble&&t[e].visible&&t[e].zData.length)return e;e++}return-1}function l(t){for(var e=[],o=(t=t.allItems).length,i=0,r=0;r<o;r++){var n=t[r].legendItem||{},s=(t[r+1]||{}).legendItem||{};if(n.labelHeight&&(t[r].itemHeight=n.labelHeight),t[r]===t[o-1]||n.y!==s.y){for(e.push({height:0}),n=e[e.length-1];i<=r;i++)t[i].itemHeight>n.height&&(n.height=t[i].itemHeight);n.step=r}}return e}function s(t){var e=this.bubbleLegend,o=this.options,i=o.bubbleLegend,r=a(this.chart);e&&e.ranges&&e.ranges.length&&(i.ranges.length&&(i.autoRanges=!!i.ranges[0].autoRanges),this.destroyItem(e)),0<=r&&o.enabled&&i.enabled&&(i.seriesIndex=r,this.bubbleLegend=new n(i,this),this.bubbleLegend.addToLegend(t.allItems))}function p(){var t=this.chart,e=this.visible,o=this.chart.legend;o&&o.bubbleLegend&&(this.visible=!e,this.ignoreSeries=e,t=0<=a(t),o.bubbleLegend.visible!==t&&(o.update({bubbleLegend:{enabled:t}}),o.bubbleLegend.visible=t),this.visible=e)}function h(t,o){var i,r,n,s,a=t.options.rtl,l=0;t.allItems.forEach(function(t,e){(s=t.legendItem||{}).group&&(i=s.group.translateX||0,r=s.y||0,((n=t.movementX)||a&&t.ranges)&&(n=a?i-t.options.maxSize/2:i+n,s.group.attr({translateX:n})),e>o[l].step&&l++,s.group.attr({translateY:Math.round(r+o[l].height/2)}),s.y=r+o[l].height/2)})}var c=t.setOptions,u=e.addEvent,d=e.objectEach,f=e.wrap,y=[];return{compose:function(t,e,o){-1===y.indexOf(t)&&(y.push(t),c({legend:{bubbleLegend:i}}),f(t.prototype,"drawChartBox",r)),-1===y.indexOf(e)&&(y.push(e),u(e,"afterGetAllItems",s)),-1===y.indexOf(o)&&(y.push(o),u(o,"legendItemClick",p))}}}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t,o){var i,r,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return o=o.extend,r=t.seriesTypes.scatter.prototype.pointClass,n(s,r),s.prototype.haloPath=function(t){return e.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)},o((t=s).prototype,{ttBelow:!1}),t}),e(t,"Series/Bubble/BubbleSeries.js",[t["Series/Bubble/BubbleLegendComposition.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(r,t,e,o,i,n){function s(){var r,n=this,t=this.len,s=this.chart,a=this.isXAxis,l=a?"xData":"yData",p=this.min,h=this.max-p,c=0,u=t,d=t/h;this.series.forEach(function(t){if(t.bubblePadding&&(t.visible||!s.options.chart.ignoreHiddenSeries)){r=n.allowZoomOutside=!0;var e,o=t[l];if(a&&((t.onPoint||t).getRadii(0,0,t),t.onPoint&&(t.radii=t.onPoint.radii)),0<h)for(var i=o.length;i--;)b(o[i])&&n.dataMin<=o[i]&&o[i]<=n.max&&(e=t.radii&&t.radii[i]||0,c=Math.min((o[i]-p)*d-e,c),u=Math.max((o[i]-p)*d+e,u))}}),r&&0<h&&!this.logarithmic&&(u-=t,d*=(t+Math.max(0,c)-Math.min(u,t))/t,[["min","userMin",c],["max","userMax",u]].forEach(function(t){void 0===x(n.options[t[0]],n[t[1]])&&(n[t[0]]+=t[2]/d)}))}var a,l,p=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),h=e.parse,c=(e=o.noop,i.series),u=(o=(d=i.seriesTypes).column.prototype,d.scatter),d=n.addEvent,f=n.arrayMax,y=n.arrayMin,m=n.clamp,g=n.extend,b=n.isNumber,v=n.merge,x=n.pick,M=[];function j(){var t=null!==l&&l.apply(this,arguments)||this;return t.data=void 0,t.maxPxSize=void 0,t.minPxSize=void 0,t.options=void 0,t.points=void 0,t.radii=void 0,t.yData=void 0,t.zData=void 0,t}return p(j,l=u),j.compose=function(t,e,o,i){r.compose(e,o,i),-1===M.indexOf(t)&&(M.push(t),t.prototype.beforePadding=s)},j.prototype.animate=function(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){var e=t.graphic;e&&e.width&&(this.hasRendered||e.attr({x:t.plotX,y:t.plotY,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)},j.prototype.getRadii=function(){for(var e,o,i,r=this,t=this.zData,n=this.yData,s=[],a=this.chart.bubbleZExtremes,l=(c=this.getPxExtremes()).minPxSize,p=c.maxPxSize,h=(a||(e=Number.MAX_VALUE,o=-Number.MAX_VALUE,this.chart.series.forEach(function(t){t.bubblePadding&&(t.visible||!r.chart.options.chart.ignoreHiddenSeries)&&(t=(t.onPoint||t).getZExtremes())&&(e=Math.min(e||t.zMin,t.zMin),o=Math.max(o||t.zMax,t.zMax),i=!0)}),i?(a={zMin:e,zMax:o},this.chart.bubbleZExtremes=a):a={zMin:0,zMax:0}),0),c=t.length;h<c;h++){var u=t[h];s.push(this.getRadius(a.zMin,a.zMax,l,p,u,n&&n[h]))}this.radii=s},j.prototype.getRadius=function(t,e,o,i,r,n){var s=this.options,a="width"!==s.sizeBy,l=s.zThreshold,p=e-t,h=.5;if(null===n||null===r)return null;if(b(r)){if(s.sizeByAbsoluteValue&&(r=Math.abs(r-l),p=Math.max(e-l,Math.abs(t-l)),t=0),r<t)return o/2-1;0<p&&(h=(r-t)/p)}return a&&0<=h&&(h=Math.sqrt(h)),Math.ceil(o+h*(i-o))/2},j.prototype.hasData=function(){return!!this.processedXData.length},j.prototype.pointAttribs=function(t,e){var o=this.options.marker.fillOpacity;return t=c.prototype.pointAttribs.call(this,t,e),1!==o&&(t.fill=h(t.fill).setOpacity(o).get("rgba")),t},j.prototype.translate=function(){l.prototype.translate.call(this),this.getRadii(),this.translateBubble()},j.prototype.translateBubble=function(){for(var t=this.data,e=this.radii,o=this.getPxExtremes().minPxSize,i=t.length;i--;){var r=t[i],n=e?e[i]:0;b(n)&&o/2<=n?(r.marker=g(r.marker,{radius:n,width:2*n,height:2*n}),r.dlBox={x:r.plotX-n,y:r.plotY-n,width:2*n,height:2*n}):(r.shapeArgs=r.plotY=r.dlBox=void 0,r.isInside=!1)}},j.prototype.getPxExtremes=function(){var o=Math.min(this.chart.plotWidth,this.chart.plotHeight),t=function(t){var e;return"string"==typeof t&&(e=/%$/.test(t),t=parseInt(t,10)),e?o*t/100:t},e=t(x(this.options.minSize,8));return{minPxSize:e,maxPxSize:Math.max(t(x(this.options.maxSize,"20%")),e)}},j.prototype.getZExtremes=function(){var t=this.options,e=(this.zData||[]).filter(b);if(e.length){var o=x(t.zMin,m(y(e),!1===t.displayNegative?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),t=x(t.zMax,f(e));if(b(o)&&b(t))return{zMin:o,zMax:t}}},j.defaultOptions=v(u.defaultOptions,{dataLabels:{formatter:function(){var t=this.series.chart.numberFormatter,e=this.point.z;return b(e)?t(e,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),g((n=j).prototype,{alignDataLabel:o.alignDataLabel,applyZones:e,bubblePadding:!0,buildKDTree:e,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:t,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),d(n,"updatedData",function(t){delete t.target.chart.bubbleZExtremes}),d(n,"remove",function(t){delete t.target.chart.bubbleZExtremes}),i.registerSeriesType("bubble",n),n}),e(t,"Series/MapBubble/MapBubblePoint.js",[t["Series/Bubble/BubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,r,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function s(){return null!==r&&r.apply(this,arguments)||this}return e=e.seriesTypes.map.prototype.pointClass.prototype,o=o.extend,n(s,r=t),s.prototype.isValid=function(){return"number"==typeof this.z},o((t=s).prototype,{applyOptions:e.applyOptions,getProjectedBounds:e.getProjectedBounds}),t}),e(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,n,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=(p=o.seriesTypes).map.prototype,l=p.mappoint.prototype,p=i.extend,h=i.merge;function c(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.clearBounds=a.clearBounds,t}return s(c,n=t),c.prototype.searchPoint=function(t,e){return this.searchKDTree({clientX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)},c.prototype.translate=function(){l.translate.call(this),this.getRadii(),this.translateBubble()},c.defaultOptions=h(t.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),p((i=c).prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:a.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:e,processData:a.processData,projectPoint:l.projectPoint,setData:a.setData,setOptions:a.setOptions,updateData:a.updateData,useMapGeometry:!0,xyFromShape:!0}),o.registerSeriesType("mapbubble",i),i}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=e.clamp,h=e.defined,n=e.extend,c=e.pick;function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t.value=void 0,t.x=void 0,t.y=void 0,t}return o=t.seriesTypes.scatter.prototype.pointClass,r(a,o),a.prototype.applyOptions=function(t,e){return!this.isNull&&null!==this.value||delete this.color,o.prototype.applyOptions.call(this,t,e),this.formatPrefix=this.isNull||null===this.value?"null":"point",this},a.prototype.getCellAttributes=function(){var t=(n=this.series).options,e=(t.colsize||1)/2,o=(t.rowsize||1)/2,i=n.xAxis,r=n.yAxis,a=this.options.marker||n.options.marker,n=n.pointPlacementToXValue(),l=c(this.pointPadding,t.pointPadding,0),p={x1:s(Math.round(i.len-i.translate(this.x-e,!1,!0,!1,!0,-n)),-i.len,2*i.len),x2:s(Math.round(i.len-i.translate(this.x+e,!1,!0,!1,!0,-n)),-i.len,2*i.len),y1:s(Math.round(r.translate(this.y-o,!1,!0,!1,!0)),-r.len,2*r.len),y2:s(Math.round(r.translate(this.y+o,!1,!0,!1,!0)),-r.len,2*r.len)};return[["width","x"],["height","y"]].forEach(function(t){var e=t[0],o=(t=t[1])+"1",i=t+"2",r=Math.abs(p[o]-p[i]),n=a&&a.lineWidth||0,s=Math.abs(p[o]+p[i])/2,e=a&&a[e];h(e)&&e<r&&(p[o]=s-(e=e/2+n/2),p[i]=s+e),l&&("y"===t&&(o=i,i=t+"1"),p[o]+=l,p[i]-=l)}),p},a.prototype.haloPath=function(t){if(!t)return[];var e=this.shapeArgs||{},o=void 0===(o=e.x)?0:o,i=void 0===(i=e.y)?0:i,r=void 0===(r=e.width)?0:r;return[["M",o-t,i-t],["L",o-t,i+(e=void 0===(e=e.height)?0:e)+t],["L",o+r+t,i+e+t],["L",o+r+t,i-t],["Z"]]},a.prototype.isValid=function(){return 1/0!==this.value&&-1/0!==this.value},n((t=a).prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),t}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Series/ColorMapComposition.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Core/Legend/LegendSymbol.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(a,t,e,o,i,r,n){var s,l,p=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),h=i.series,c=i.seriesTypes,u=c.column,c=c.scatter,d=r.prototype.symbols,f=(r=n.extend,n.fireEvent),y=n.isNumber,m=n.merge,g=n.pick;function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.colorAxis=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t.valueMax=NaN,t.valueMin=NaN,t}return p(b,l=c),b.prototype.drawPoints=function(){var e=this;((this.options.marker||{}).enabled||this._hasPointMarkers)&&(h.prototype.drawPoints.call(this),this.points.forEach(function(t){t.graphic&&(t.graphic[e.chart.styledMode?"css":"animate"](e.colorAttribs(t)),null===t.value&&t.graphic.addClass("highcharts-null-point"))}))},b.prototype.getExtremes=function(){var t=(e=h.prototype.getExtremes.call(this,this.valueData)).dataMin,e=e.dataMax;return y(t)&&(this.valueMin=t),y(e)&&(this.valueMax=e),h.prototype.getExtremes.call(this)},b.prototype.getValidPoints=function(t,e){return h.prototype.getValidPoints.call(this,t,e,!0)},b.prototype.hasData=function(){return!!this.processedXData.length},b.prototype.init=function(){l.prototype.init.apply(this,arguments);var t=this.options;t.pointRange=g(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,d.ellipse=d.circle,t.marker&&(t.marker.r=t.borderRadius)},b.prototype.markerAttribs=function(t,e){var o,i=t.shapeArgs||{};return t.hasImage?{x:t.plotX,y:t.plotY}:e&&"normal"!==e?(o=t.options.marker||{},t=(t=this.options.marker||{}).states&&t.states[e]||{},e=((o=o.states&&o.states[e]||{}).width||t.width||i.width||0)+(o.widthPlus||t.widthPlus||0),t=(o.height||t.height||i.height||0)+(o.heightPlus||t.heightPlus||0),{x:(i.x||0)+((i.width||0)-e)/2,y:(i.y||0)+((i.height||0)-t)/2,width:e,height:t}):i},b.prototype.pointAttribs=function(t,e){var o=h.prototype.pointAttribs.call(this,t,e),i=this.options||{},r=(s=this.chart.options.plotOptions||{}).series||{},n=s.heatmap||{},s=t&&t.options.borderColor||i.borderColor||n.borderColor||r.borderColor,r=t&&t.options.borderWidth||i.borderWidth||n.borderWidth||r.borderWidth||o["stroke-width"];return o.stroke=t&&t.marker&&t.marker.lineColor||i.marker&&i.marker.lineColor||s||this.color,o["stroke-width"]=r,e&&"normal"!==e&&(t=m(i.states&&i.states[e],i.marker&&i.marker.states&&i.marker.states[e],t&&t.options.states&&t.options.states[e]||{}),o.fill=t.color||a.parse(o.fill).brighten(t.brightness||0).get(),o.stroke=t.lineColor||o.stroke),o},b.prototype.translate=function(){var s=this.options,a=s.marker&&s.marker.symbol||"rect",l=d[a]?a:"rect",p=-1!==["circle","square"].indexOf(l);this.generatePoints(),this.points.forEach(function(t){var e=t.getCellAttributes(),o=Math.min(e.x1,e.x2),i=Math.min(e.y1,e.y2),r=Math.max(Math.abs(e.x2-e.x1),0),n=Math.max(Math.abs(e.y2-e.y1),0);t.hasImage=0===(t.marker&&t.marker.symbol||a||"").indexOf("url"),p&&(i=Math.abs(r-n),o=Math.min(e.x1,e.x2)+(r<n?0:i/2),i=Math.min(e.y1,e.y2)+(r<n?i/2:0),r=n=Math.min(r,n)),t.hasImage&&(t.marker={width:r,height:n}),t.plotX=t.clientX=(e.x1+e.x2)/2,t.plotY=(e.y1+e.y2)/2,t.shapeType="path",t.shapeArgs=m(!0,{x:o,y:i,width:r,height:n},{d:d[l](o,i,r,n,{r:s.borderRadius})})}),f(this,"afterTranslate")},b.defaultOptions=m(c.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){var t=this.series.chart.numberFormatter,e=this.point.value;return y(e)?t(e,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}}),r((n=b).prototype,{axisTypes:t.seriesMembers.axisTypes,colorKey:t.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:t.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:e,specialGroup:"group",trackerGroups:t.seriesMembers.trackerGroups,alignDataLabel:u.prototype.alignDataLabel,colorAttribs:t.seriesMembers.colorAttribs,drawLegendSymbol:o.drawRectangle,getSymbol:h.prototype.getSymbol}),t.compose(n),i.registerSeriesType("heatmap",n),n}),e(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Core/Axis/Color/ColorAxis.js"],t["Series/MapBubble/MapBubbleSeries.js"],t["Core/Chart/MapChart.js"],t["Maps/MapView.js"],t["Maps/Projection.js"]],function(t,e,o,i,r,n){t.ColorAxis=e,t.MapChart=i,t.mapChart=t.Map=i.mapChart,t.MapView=r,t.maps=i.maps,t.Projection=n,e.compose(t.Chart,t.Fx,t.Legend,t.Series),o.compose(t.Axis,t.Chart,t.Legend,t.Series)})});
"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/organization",["highcharts","highcharts/modules/sankey"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,e,n){t.hasOwnProperty(i)||(t[i]=n.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Series/Organization/OrganizationPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,i){const{sankey:{prototype:{pointClass:e}}}=t["seriesTypes"],{defined:o,find:r,pick:a}=i;class n extends e{constructor(){super(...arguments),this.toNode=this.series=this.options=this.linksTo=this.linksFrom=this.fromNode=void 0}init(){return e.prototype.init.apply(this,arguments),this.isNode||(this.dataLabelOnNull=!0,this.formatPrefix="link"),this}getSum(){return 1}setNodeColumn(){super.setNodeColumn();const n=this,i=n.getFromNode().fromNode;if(!o(n.options.column)&&0!==n.linksTo.length&&i&&"hanging"===i.options.layout){n.options.layout=a(n.options.layout,"hanging"),n.hangsFrom=i;let e=-1;r(i.linksFrom,function(t,i){return(t=t.toNode===n)&&(e=i),t});for(let t=0;t<i.linksFrom.length;t++){var s=i.linksFrom[t];s.toNode.id===n.id?t=i.linksFrom.length:e+=function i(t){let e=t.linksFrom.length;return t.linksFrom.forEach(t=>{t.id===t.toNode.linksTo[0].id?e+=i(t.toNode):e--}),e}(s.toNode)}n.column=(n.column||0)+e}}}return n}),i(t,"Series/Organization/OrganizationSeriesDefaults.js",[],function(){return{borderColor:"#666666",borderRadius:3,link:{color:"#666666",lineWidth:1,radius:10,type:"default"},borderWidth:1,dataLabels:{nodeFormatter:function(){function t(e){return Object.keys(e).reduce(function(t,i){return t+i+":"+e[i]+";"},'style="')+'"'}var i={width:"100%",height:"100%",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"};const e={"max-height":"100%","border-radius":"50%"},n={width:"100%",padding:0,"text-align":"center","white-space":"normal"},{description:s,image:o,title:r}=this.point;return o&&(e["max-width"]="30%",n.width="70%"),this.series.chart.renderer.forExport&&(i.display="block",n.position="absolute",n.left=o?"30%":0,n.top=0),i="<div "+t(i)+">",o&&(i+='<img src="'+o+'" '+t(e)+">"),i+="<div "+t(n)+">",this.point.name&&(i+="<h4 "+t({margin:0})+">"+this.point.name+"</h4>"),r&&(i+="<p "+t({margin:0})+">"+(r||"")+"</p>"),s&&(i+="<p "+t({opacity:.75,margin:"5px"})+">"+s+"</p>"),i+"</div></div>"},style:{fontWeight:"normal",fontSize:"0.9em"},useHTML:!0,linkTextPath:{attributes:{startOffset:"95%",textAnchor:"end"}}},hangingIndent:20,hangingIndentTranslation:"inherit",minNodeLength:10,nodeWidth:50,tooltip:{nodeFormat:"{point.name}<br>{point.title}<br>{point.description}"}}}),i(t,"Series/PathUtilities.js",[],function(){function l(i,e){const n=[];for(let t=0;t<i.length;t++){var s=i[t][1],o=i[t][2];if("number"==typeof s&&"number"==typeof o)if(0===t)n.push(["M",s,o]);else if(t===i.length-1)n.push(["L",s,o]);else if(e){var r=i[t-1],a=i[t+1];if(r&&a){const i=r[1];var h,l,r=r[2],d=a[1],a=a[2];"number"==typeof i&&"number"==typeof d&&"number"==typeof r&&"number"==typeof a&&i!==d&&r!==a&&(h=i<d?1:-1,l=r<a?1:-1,n.push(["L",s-h*Math.min(Math.abs(s-i),e),o-l*Math.min(Math.abs(o-r),e)],["C",s,o,s,o,s+h*Math.min(Math.abs(s-d),e),o+l*Math.min(Math.abs(o-a),e)]))}}else n.push(["L",s,o])}return n}return{applyRadius:l,getLinkPath:{default:function(t){var{x1:i,y1:e,x2:n,y2:s,width:o=0,inverted:r=!1,radius:a,parentVisible:h}=t;return t=[["M",i,e],["L",i,e],["C",i,e,i,s,i,s],["L",i,s],["C",i,e,i,s,i,s],["L",i,s]],h?l([["M",i,e],["L",i+o*(r?-.5:.5),e],["L",i+o*(r?-.5:.5),s],["L",n,s]],a):t},straight:function(t){var{x1:t,y1:i,x2:e,y2:n,width:s=0,inverted:o=!1,parentVisible:r}=t;return r?[["M",t,i],["L",t+s*(o?-1:1),n],["L",e,n]]:[["M",t,i],["L",t,n],["L",t,n]]},curved:function(t){var{x1:t,y1:i,x2:e,y2:n,offset:s=0,width:o=0,inverted:r=!1,parentVisible:a}=t;return a?[["M",t,i],["C",t+s,i,t-s+o*(r?-1:1),n,t+o*(r?-1:1),n],["L",e,n]]:[["M",t,i],["C",t,i,t,n,t,n],["L",e,n]]}}}}),i(t,"Series/Organization/OrganizationSeries.js",[t["Series/Organization/OrganizationPoint.js"],t["Series/Organization/OrganizationSeriesDefaults.js"],t["Core/Series/SeriesRegistry.js"],t["Series/PathUtilities.js"],t["Core/Utilities.js"]],function(t,i,e,f,n){const{sankey:h}=e["seriesTypes"],{css:o,extend:s,isNumber:l,merge:r,pick:k}=n;class a extends h{constructor(){super(...arguments),this.points=this.options=this.data=void 0}alignDataLabel(n,s,t){n=n.shapeArgs;if(t.useHTML&&n){let t=n.width||0,i=n.height||0,e=this.options.borderWidth+2*this.options.dataLabels.padding;this.chart.inverted&&(t=i,i=n.width||0),i-=e,t-=e,(n=s.text)&&(o(n.element.parentNode,{width:t+"px",height:i+"px"}),o(n.element,{left:0,top:0,width:"100%",height:"100%",overflow:"hidden"})),s.getBBox=()=>({width:t,height:i,x:0,y:0}),s.width=t,s.height=i}super.alignDataLabel.apply(this,arguments)}createNode(t){return(t=super.createNode.call(this,t)).getSum=()=>1,t}pointAttribs(t,i){const e=h.prototype.pointAttribs.call(this,t,i);var n=this.mapOptionsToLevel[(t.isNode?t:t.fromNode).level||0]||{},s=t.options,o=n.states&&n.states[i]||{},r=(i=k(o.borderRadius,s.borderRadius,n.borderRadius,this.options.borderRadius),k(o.linkColor,s.linkColor,n.linkColor,this.options.linkColor,o.link&&o.link.color,s.link&&s.link.color,n.link&&n.link.color,this.options.link&&this.options.link.color)),a=k(o.linkLineWidth,s.linkLineWidth,n.linkLineWidth,this.options.linkLineWidth,o.link&&o.link.lineWidth,s.link&&s.link.lineWidth,n.link&&n.link.lineWidth,this.options.link&&this.options.link.lineWidth),n=k(o.linkOpacity,s.linkOpacity,n.linkOpacity,this.options.linkOpacity,o.link&&o.link.linkOpacity,s.link&&s.link.linkOpacity,n.link&&n.link.linkOpacity,this.options.link&&this.options.link.linkOpacity);return t.isNode?l(i)&&(e.r=i):(e.stroke=r,e["stroke-width"]=a,e.opacity=n,delete e.fill),e}translateLink(s){var o=s.fromNode,r=s.toNode,a=k(this.options.linkLineWidth,this.options.link.lineWidth),h=Math.round(a)%2/2,l=k(this.options.link.offset,.5),d=k(s.options.link&&s.options.link.type,this.options.link.type);if(o.shapeArgs&&r.shapeArgs){let t=Math.floor((o.shapeArgs.x||0)+(o.shapeArgs.width||0))+h,i=Math.floor((o.shapeArgs.y||0)+(o.shapeArgs.height||0)/2)+h,e=Math.floor(r.shapeArgs.x||0)+h,n=Math.floor((r.shapeArgs.y||0)+(r.shapeArgs.height||0)/2)+h;var p=this.options.hangingIndent,g=r.options.offset,u=/%$/.test(g)&&parseInt(g,10),c=this.chart.inverted;c&&(t-=o.shapeArgs.width||0,e+=r.shapeArgs.width||0),g=this.colDistance?Math.floor(e+(c?1:-1)*(this.colDistance-this.nodeWidth)/2)+h:Math.floor((e+t)/2)+h,u&&(50<=u||u<=-50)&&(g=e=Math.floor(e+(c?-.5:.5)*(r.shapeArgs.width||0))+h,n=r.shapeArgs.y||0,0<u&&(n+=r.shapeArgs.height||0)),r.hangsFrom===o&&(this.chart.inverted?(i=Math.floor((o.shapeArgs.y||0)+(o.shapeArgs.height||0)-p/2)+h,n=(r.shapeArgs.y||0)+(r.shapeArgs.height||0)):i=Math.floor((o.shapeArgs.y||0)+p/2)+h,g=e=Math.floor((r.shapeArgs.x||0)+(r.shapeArgs.width||0)/2)+h),s.plotX=g,s.plotY=(i+n)/2,s.shapeType="path","straight"===d?s.shapeArgs={d:[["M",t,i],["L",e,n]]}:"curved"===d?(o=Math.abs(e-t)*l*(c?-1:1),s.shapeArgs={d:[["M",t,i],["C",t+o,i,e-o,n,e,n]]}):s.shapeArgs={d:f.applyRadius([["M",t,i],["L",g,i],["L",g,n],["L",e,n]],k(this.options.linkRadius,this.options.link.radius))},s.dlBox={x:(t+e)/2,y:(i+n)/2,height:a,width:0}}}translateNode(t,i){h.prototype.translateNode.call(this,t,i),i=t.hangsFrom;let e=this.options.hangingIndent||0,n=this.chart.inverted?-1:1,s=t.shapeArgs,o=this.options.hangingIndentTranslation,r=this.options.minNodeLength||10;if(i)if("cumulative"===o)for(s.height-=e,s.y-=n*e;i;)s.y+=n*e,i=i.hangsFrom;else if("shrink"===o)for(;i&&s.height>e+r;)s.height-=e,i=i.hangsFrom;else s.height-=e,this.chart.inverted||(s.y+=e);t.nodeHeight=this.chart.inverted?s.width:s.height}drawDataLabels(){const t=this.options.dataLabels;if(t.linkTextPath&&t.linkTextPath.enabled)for(const t of this.points)t.options.dataLabels=r(t.options.dataLabels,{useHTML:!1});super.drawDataLabels()}}return a.defaultOptions=r(h.defaultOptions,i),s(a.prototype,{pointClass:t}),e.registerSeriesType("organization",a),a}),i(t,"masters/modules/organization.src.js",[],function(){})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/pattern-fill",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(a){"use strict";var t=a?a._modules:{};function e(t,e,r,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,r),"function"==typeof CustomEvent&&a.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/PatternFill.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Defaults.js"],t["Core/Utilities.js"]],function(t,e,d){let f=t["animObject"],n=e["getOptions"],{addEvent:o,defined:a,erase:s,extend:h,merge:l,pick:u,removeEvent:g,wrap:p}=d,c=function(){let t=[],e=n().colors,r=0;for(var i of["M 0 0 L 5 5 M 4.5 -0.5 L 5.5 0.5 M -0.5 4.5 L 0.5 5.5","M 0 5 L 5 0 M -0.5 0.5 L 0.5 -0.5 M 4.5 5.5 L 5.5 4.5","M 2 0 L 2 5 M 4 0 L 4 5","M 0 2 L 5 2 M 0 4 L 5 4","M 0 1.5 L 2.5 1.5 L 2.5 0 M 2.5 5 L 2.5 3.5 L 5 3.5"])t.push({path:i,color:e[r++],width:5,height:5,patternTransform:"scale(1.4 1.4)"});for(var a of(r=5,["M 0 0 L 5 10 L 10 0","M 3 3 L 8 3 L 8 8 L 3 8 Z","M 5 5 m -4 0 a 4 4 0 1 1 8 0 a 4 4 0 1 1 -8 0","M 0 0 L 10 10 M 9 -1 L 11 1 M -1 9 L 1 11","M 0 10 L 10 0 M -1 1 L 1 -1 M 9 11 L 11 9"]))t.push({path:a,color:e[r],width:10,height:10}),r+=5;return t}();function m(t,e){let r=JSON.stringify(t),i=r.length||0,a=0,n=0,o;if(e){o=Math.max(Math.floor(i/500),1);for(let t=0;t<i;t+=o)a+=r.charCodeAt(t);a&=a}for(;n<i;++n)a=(a<<5)-a+r.charCodeAt(n),a&=a;return a.toString(16).replace("-","1")}function y(){if(this.renderer&&(this.renderer.defIds||[]).filter(t=>t&&t.indexOf&&0===t.indexOf("highcharts-pattern-")).length){for(var t of this.series)if(t.visible)for(var e of t.points){let t=e.options&&e.options.color;t&&t.pattern&&(t.pattern._width="defer",t.pattern._height="defer")}this.redraw(!1)}}function x(){let r={},i=this.renderer,t=(i.defIds||[]).filter(t=>t.indexOf&&0===t.indexOf("highcharts-pattern-"));if(t.length)for(var e of([].forEach.call(this.renderTo.querySelectorAll('[color^="url("], [fill^="url("], [stroke^="url("]'),t=>{let e=t.getAttribute("fill")||t.getAttribute("color")||t.getAttribute("stroke");e&&(r[e.replace(i.url,"").replace("url(#","").replace(")","")]=!0)}),t))r[e]||(s(i.defIds,e),i.patternElements[e]&&(i.patternElements[e].destroy(),delete i.patternElements[e]))}function w(){let t=this.options.color;t&&t.pattern&&("string"==typeof t.pattern.path&&(t.pattern.path={d:t.pattern.path}),this.color=this.options.color=l(this.series.options.color,t))}function M(t){let e=t.args[0],r=t.args[1],i=t.args[2],a=this.chartIndex||0,n=e.pattern,o="#333333";if(!(n=void 0!==e.patternIndex&&c?c[e.patternIndex]:n))return!0;if(n.image||"string"==typeof n.path||n.path&&n.path.d){let t=i.parentNode&&i.parentNode.getAttribute("class");t=t&&-1<t.indexOf("highcharts-legend"),"defer"!==n._width&&"defer"!==n._height||b.call({graphic:{element:i}},n),!t&&n.id||((n=l({},n)).id="highcharts-pattern-"+a+"-"+m(n)+m(n,!0)),this.addPattern(n,!this.forExport&&u(n.animation,this.globalAnimation,{duration:100})),o=`url(${this.url}#${n.id+(this.forExport?"-export":"")})`}else o=n.color||o;return i.setAttribute(r,o),!(e.toString=function(){return o})}function L(){var e=this.chart.isResizing;if(this.isDirtyData||e||!this.chart.hasRendered)for(var r of this.points){let t=r.options&&r.options.color;t&&t.pattern&&(!e||r.shapeArgs&&r.shapeArgs.width&&r.shapeArgs.height?r.calculatePatternDimensions(t.pattern):(t.pattern._width="defer",t.pattern._height="defer"))}}function b(r){if(!r.width||!r.height){let t=this.graphic&&(this.graphic.getBBox&&this.graphic.getBBox(!0)||this.graphic.element&&this.graphic.element.getBBox())||{},e=this.shapeArgs;if(e&&(t.width=e.width||t.width,t.height=e.height||t.height,t.x=e.x||t.x,t.y=e.y||t.y),r.image){var i;if(!t.width||!t.height)return r._width="defer",r._height="defer",i=this.series.chart.mapView&&this.series.chart.mapView.getSVGTransform().scaleY,void(a(i)&&i<0&&(r._inverted=!0));r.aspectRatio&&(t.aspectRatio=t.width/t.height,r.aspectRatio>t.aspectRatio?t.aspectWidth=t.height*r.aspectRatio:t.aspectHeight=t.width/r.aspectRatio),r._width=r.width||Math.ceil(t.aspectWidth||t.width),r._height=r.height||Math.ceil(t.aspectHeight||t.height)}r.width||(r._x=r.x||0,r._x+=t.x-Math.round(t.aspectWidth?Math.abs(t.aspectWidth-t.width)/2:0)),r.height||(r._y=r.y||0,r._y+=t.y-Math.round(t.aspectHeight?Math.abs(t.aspectHeight-t.height)/2:0))}}function v(r,i){let a=u(i,!0),n=f(a),o=r.color||"#333333",s=r.height||("number"==typeof r._height?r._height:0)||32,h=r.width||("number"==typeof r._width?r._width:0)||32,l,p=r.id,c;if(p||(this.idCounter=this.idCounter||0,p="highcharts-pattern-"+this.idCounter+"-"+(this.chartIndex||0),++this.idCounter),this.forExport&&(p+="-export"),this.defIds=this.defIds||[],!(-1<this.defIds.indexOf(p))){this.defIds.push(p);let t={id:p,patternUnits:"userSpaceOnUse",patternContentUnits:r.patternContentUnits||"userSpaceOnUse",width:h,height:s,x:r._x||r.x||0,y:r._y||r.y||0},e=(r._inverted&&(t.patternTransform="scale(1, -1)",r.patternTransform&&(r.patternTransform+=" scale(1, -1)")),r.patternTransform&&(t.patternTransform=r.patternTransform),this.createElement("pattern").attr(t).add(this.defs));return e.id=p,r.path?(c=d.isObject(r.path)?r.path:{d:r.path},r.backgroundColor&&(i=r.backgroundColor,this.rect(0,0,h,s).attr({fill:i}).add(e)),l={d:c.d},this.styledMode||(l.stroke=c.stroke||o,l["stroke-width"]=u(c.strokeWidth,2),l.fill=c.fill||"none"),c.transform&&(l.transform=c.transform),this.createElement("path").attr(l).add(e),e.color=o):r.image&&(a?this.image(r.image,0,0,h,s,function(){this.animate({opacity:u(r.opacity,1)},n),g(this.element,"load")}).attr({opacity:0}):this.image(r.image,0,0,h,s)).add(e),r.image&&a||void 0===r.opacity||[].forEach.call(e.element.childNodes,t=>{t.setAttribute("opacity",r.opacity)}),this.patternElements=this.patternElements||{},this.patternElements[p]=e}}function _(t){let e=this.options.color;e&&e.pattern&&!e.pattern.color?(delete this.options.color,t.apply(this,[].slice.call(arguments,1)),e.pattern.color=this.color,this.color=this.options.color=e):t.apply(this,[].slice.call(arguments,1))}function A(){if(this.chart?.mapView){let e=this.chart.renderer,r=e.patternElements;e.defIds?.length&&r&&this.points.filter(function(t){return!!t.graphic&&(t.graphic.element.hasAttribute("fill")||t.graphic.element.hasAttribute("color")||t.graphic.element.hasAttribute("stroke"))&&!t.options.color?.pattern?.image&&!!t.group?.scaleX&&!!t.group?.scaleY}).map(function(t){return{id:(t.graphic?.element.getAttribute("fill")||t.graphic?.element.getAttribute("color")||t.graphic?.element.getAttribute("stroke")||"").replace(e.url,"").replace("url(#","").replace(")",""),x:t.group?.scaleX||1,y:t.group?.scaleY||1}}).filter(function(r,i,t){return""!==r.id&&-1!==r.id.indexOf("highcharts-pattern-")&&!t.some(function(t,e){return t.id===r.id&&e<i})}).forEach(function(t){var e=t.id;r[e].scaleX=1/t.x,r[e].scaleY=1/t.y,r[e].updateTransform("patternTransform")})}}return{compose:function(t,e,r){var i=e.prototype.pointClass,a=i.prototype;a.calculatePatternDimensions||(o(t,"endResize",y),o(t,"redraw",x),h(a,{calculatePatternDimensions:b}),o(i,"afterInit",w),o(e,"render",L),p(e.prototype,"getColor",_),o(e,"afterRender",A),o(e,"mapZoomComplete",A),h(r.prototype,{addPattern:v}),o(r,"complexColor",M))},patterns:c}}),e(t,"masters/modules/pattern-fill.src.js",[t["Core/Globals.js"],t["Extensions/PatternFill.js"]],function(t,e){return t.patterns=e.patterns,e.compose(t.Chart,t.Series,t.SVGRenderer),t})});
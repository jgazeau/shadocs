"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-on-point",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){function t(t,e,s,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}var s=e?e._modules:{};t(s,"Series/SeriesOnPointComposition.js",[s["Core/Series/Point.js"],s["Core/Series/Series.js"],s["Core/Series/SeriesRegistry.js"],s["Core/Renderer/SVG/SVGRenderer.js"],s["Core/Utilities.js"]],function(h,a,t,d,p){const{bubble:e,pie:c}=t.seriesTypes,{addEvent:f,defined:u,find:i,isNumber:o}=p;var s;{t=s=s||{};const l=[];t.compose=function(t,e){var{chartGetZData:s,seriesAfterInit:i,seriesAfterRender:o,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:h}=m.prototype;return c.prototype.onPointSupported=!0,p.pushUnique(l,t)&&(f(a,"afterInit",i),f(a,"afterRender",o),f(a,"afterGetCenter",r),f(a,"hide",n),f(a,"show",n),f(a,"translate",h)),p.pushUnique(l,e)&&(f(e,"beforeRender",s),f(e,"beforeRedraw",s)),t};class m{constructor(t){this.getRadii=e.prototype.getRadii,this.getRadius=e.prototype.getRadius,this.getPxExtremes=e.prototype.getPxExtremes,this.getZExtremes=e.prototype.getZExtremes,this.chart=t.chart,this.series=t,this.options=t.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var t=this.getConnectorAttributes();t&&this.connector.animate(t)}getConnectorAttributes(){const t=this.series.chart;if(e=this.options){var e,s,i,o=e.connectorOptions||{},r=e.position,n=t.get(e.id);if(n instanceof h&&r&&u(n.plotX)&&u(n.plotY))return e=u(r.x)?r.x:n.plotX,s=u(r.y)?r.y:n.plotY,i=o.width||1,n=o.stroke||this.series.color,o=o.dashstyle,r={d:d.prototype.crispLine([["M",e,s],["L",e+(r.offsetX||0),s+(r.offsetY||0)]],i,"ceil"),"stroke-width":i},t.styledMode||(r.stroke=n,r.dashstyle=o),r}}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.useMapGeometry=this.bubblePadding=!0,this.onPoint=new m(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(t){var e=this.options.onPoint;const s=t.positions;if(e){const t=this.chart.get(e.id);t instanceof h&&u(t.plotX)&&u(t.plotY)&&(s[0]=t.plotX,s[1]=t.plotY),(e=e.position)&&(u(e.x)&&(s[0]=e.x),u(e.y)&&(s[1]=e.y),e.offsetX&&(s[0]+=e.offsetX),e.offsetY&&(s[1]+=e.offsetY))}e=this.radii&&this.radii[this.index],o(e)&&(s[2]=2*e),t.positions=s}seriesShowOrHide(){const s=this.chart.series;this.points.forEach(e=>{const t=i(s,t=>!!(t=((t.onPoint||{}).options||{}).id)&&t===e.id);t&&t.setVisible(!t.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){const e=[];this.series.forEach(t=>{t=t.options.onPoint,e.push(t&&t.z?t.z:null)}),this.series.forEach(t=>{t.onPoint&&(t.onPoint.zData=t.zData=e)})}}t.Additions=m}return s}),t(s,"masters/modules/series-on-point.src.js",[s["Series/SeriesOnPointComposition.js"]],function(t){t.compose(e.Series,e.Chart)})});
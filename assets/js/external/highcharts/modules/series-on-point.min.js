!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/series-on-point",["highcharts"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){"use strict";var e=o?o._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&o.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/SeriesOnPointComposition.js",[e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Utilities.js"]],function(e,o,t,i,l,s){var r;let h=e["composed"],n=i.seriesTypes["bubble"],{addEvent:d,defined:f,find:a,isNumber:p,pushUnique:c}=s;{(e=r=r||{}).compose=function(e,t){var i,s,o,r,n,a;return c(h,"SeriesOnPoint")&&({chartGetZData:i,seriesAfterInit:s,seriesAfterRender:o,seriesGetCenter:r,seriesShowOrHide:n,seriesTranslate:a}=u.prototype,e.types.pie.prototype.onPointSupported=!0,d(e,"afterInit",s),d(e,"afterRender",o),d(e,"afterGetCenter",r),d(e,"hide",n),d(e,"show",n),d(e,"translate",a),d(t,"beforeRender",i),d(t,"beforeRedraw",i)),e};class u{constructor(e){this.getRadii=n.prototype.getRadii,this.getRadius=n.prototype.getRadius,this.getPxExtremes=n.prototype.getPxExtremes,this.getZExtremes=n.prototype.getZExtremes,this.chart=e.chart,this.series=e,this.options=e.options.onPoint}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path().addClass("highcharts-connector-seriesonpoint").attr({zIndex:-1}).add(this.series.markerGroup));var e=this.getConnectorAttributes();e&&this.connector.animate(e)}getConnectorAttributes(){let h=this.series.chart,e=this.options;if(e){var d=e.connectorOptions||{},p=e.position,c=h.get(e.id);if(c instanceof o&&p&&f(c.plotX)&&f(c.plotY)){let e=f(p.x)?p.x:c.plotX,t=f(p.y)?p.y:c.plotY,i=e+(p.offsetX||0),s=t+(p.offsetY||0),o=d.width||1,r=d.stroke||this.series.color,n=d.dashstyle,a={d:l.prototype.crispLine([["M",e,t],["L",i,s]],o),"stroke-width":o};return h.styledMode||(a.stroke=r,a.dashstyle=n),a}}}seriesAfterInit(){this.onPointSupported&&this.options.onPoint&&(this.bubblePadding=!0,this.useMapGeometry=!0,this.onPoint=new u(this))}seriesAfterRender(){delete this.chart.bubbleZExtremes,this.onPoint&&this.onPoint.drawConnector()}seriesGetCenter(e){let t=this.options.onPoint,i=e.positions;t&&((s=this.chart.get(t.id))instanceof o&&f(s.plotX)&&f(s.plotY)&&(i[0]=s.plotX,i[1]=s.plotY),(s=t.position)&&(f(s.x)&&(i[0]=s.x),f(s.y)&&(i[1]=s.y),s.offsetX&&(i[0]+=s.offsetX),s.offsetY&&(i[1]+=s.offsetY)));var s=this.radii&&this.radii[this.index];p(s)&&(i[2]=2*s),e.positions=i}seriesShowOrHide(){let i=this.chart.series;this.points?.forEach(t=>{let e=a(i,e=>{e=((e.onPoint||{}).options||{}).id;return!!e&&e===t.id});e&&e.setVisible(!e.visible,!1)})}seriesTranslate(){this.onPoint&&(this.onPoint.getRadii(),this.radii=this.onPoint.radii)}chartGetZData(){let t=[];this.series.forEach(e=>{e=e.options.onPoint;t.push(e&&e.z?e.z:null)}),this.series.forEach(e=>{e.onPoint&&(e.onPoint.zData=e.zData=t)})}}e.Additions=u}return r}),t(e,"masters/modules/series-on-point.src.js",[e["Core/Globals.js"],e["Series/SeriesOnPointComposition.js"]],function(e,t){return t.compose(e.Series,e.Chart),e})});
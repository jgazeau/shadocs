"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/variwide",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,s,e){t.hasOwnProperty(i)||(t[i]=e.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Series/Variwide/VariwideComposition.js",[t["Core/Utilities.js"]],function(s){function e(t){this.variwide&&this.cross&&this.cross.attr("stroke-width",t.point&&t.point.crosshairWidth)}function r(){const s=this;!this.horiz&&this.variwide&&this.chart.labelCollectors.push(function(){return s.tickPositions.filter(function(t){return s.ticks[t].label}).map(function(t,i){return(t=s.ticks[t].label).labelrank=s.zData[i],t})})}function o(t){var i=this.axis,s=i.horiz?"x":"y";i.variwide&&(this[s+"Orig"]=t.pos[s],this.postTranslate(t.pos,s,this.pos))}function a(t,i,s){const e=this.axis;let r=t[i]-e.pos;e.horiz||(r=e.len-r),r=e.series[0].postTranslate(s,r),e.horiz||(r=e.len-r),t[i]=e.pos+r}function n(t,i,s,e,r,o,a,n){var h=Array.prototype.slice.call(arguments,1),p=r?"x":"y";return this.axis.variwide&&"number"==typeof this[p+"Orig"]&&(h[r?0:1]=this[p+"Orig"]),h=t.apply(this,h),this.axis.variwide&&this.axis.categories&&this.postTranslate(h,p,this.pos),h}const{addEvent:h,wrap:p}=s,l=[];return{compose:function(t,i){s.pushUnique(l,t)&&(h(t,"afterDrawCrosshair",e),h(t,"afterRender",r)),s.pushUnique(l,i)&&(h(i,"afterGetPosition",o),(t=i.prototype).postTranslate=a,p(t,"getLabelPosition",n))}}}),i(t,"Series/Variwide/VariwidePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,i){({prototype:{pointClass:t}}=t.seriesTypes.column);const s=i["isNumber"];class e extends t{constructor(){super(...arguments),this.series=this.options=this.crosshairWidth=void 0}isValid(){return s(this.y)&&s(this.z)}}return e}),i(t,"Series/Variwide/VariwideSeries.js",[t["Core/Series/SeriesRegistry.js"],t["Series/Variwide/VariwideComposition.js"],t["Series/Variwide/VariwidePoint.js"],t["Core/Utilities.js"]],function(i,t,s,e){const{column:r}=i["seriesTypes"],{addEvent:o,extend:a,merge:n,pick:c}=e;class h extends r{constructor(){super(...arguments),this.zData=this.totalZ=this.relZ=this.points=this.options=this.data=void 0}processData(t){this.totalZ=0,this.relZ=[],i.seriesTypes.column.prototype.processData.call(this,t),(this.xAxis.reversed?this.zData.slice().reverse():this.zData).forEach(function(t,i){this.relZ[i]=this.totalZ,this.totalZ+=t},this),this.xAxis.categories&&(this.xAxis.variwide=!0,this.xAxis.zData=this.zData)}postTranslate(t,i,s){var e=this.xAxis,r=this.relZ,o=(t=e.reversed?r.length-t:t,e.reversed?-1:1),a=e.toPixels(e.reversed?(e.dataMax||0)+e.pointRange:e.dataMin||0),n=e.toPixels(e.reversed?e.dataMin||0:(e.dataMax||0)+e.pointRange),h=Math.abs(n-a),p=this.totalZ,e=this.chart.inverted?n-(this.chart.plotTop-o*e.minPixelPadding):a-this.chart.plotLeft-o*e.minPixelPadding,a=t/r.length*h,n=(t+o)/r.length*h,l=c(r[t],p)/p*h,r=c(r[t+o],p)/p*h;return s&&(s.crosshairWidth=r-l),e+l+(i-(e+a))*(r-l)/(n-a)}translate(){this.crispOption=this.options.crisp,this.options.crisp=!1,super.translate(),this.options.crisp=this.crispOption}correctStackLabels(){var t,i,s,e=this.options,r=this.yAxis;for(const o of this.points)s=o.x,i=o.shapeArgs.width,(t=r.stacking.stacks[(this.negStacks&&o.y<(e.startFromThreshold?0:e.threshold)?"-":"")+this.stackKey])&&(t=t[s])&&!o.isNull&&t.setOffset(-i/2||0,i||0,void 0,void 0,o.plotX,this.xAxis)}}return h.compose=t.compose,h.defaultOptions=n(r.defaultOptions,{pointPadding:0,groupPadding:0}),o(h,"afterColumnTranslate",function(){const p=this.xAxis,l=this.chart.inverted,c=this.borderWidth%2/2;this.points.forEach((t,i)=>{const s=t.shapeArgs||{},{x:e=0,width:r=0}=s,{plotX:o=0,tooltipPos:a,z:n=0}=t;let h;i=p.variwide?(h=this.postTranslate(i,e,t),this.postTranslate(i,e+r)):(h=o,p.translate(t.x+n,!1,!1,!1,!0)),this.crispOption&&(h=Math.round(h)-c,i=Math.round(i)-c),s.x=h,s.width=Math.max(i-h,1),t.plotX=(h+i)/2,a&&(l?a[1]=p.len-s.x-s.width/2:a[0]=s.x+s.width/2)}),this.options.stacking&&this.correctStackLabels()},{order:2}),a(h.prototype,{irregularWidths:!0,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],pointClass:s}),i.registerSeriesType("variwide",h),h}),i(t,"masters/modules/variwide.src.js",[t["Core/Globals.js"],t["Series/Variwide/VariwideSeries.js"]],function(t,i){i.compose(t.Axis,t.Tick)})});
!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";var t=e?e._modules:{};function i(t,i,o,a){t.hasOwnProperty(i)||(t[i]=a.apply(null,o),"function"==typeof CustomEvent&&e.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),i(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,t){let{arrayMax:i,arrayMin:o,correctFloat:a,extend:n,isNumber:r}=t;function s(t){let i=t.length,o=p(t);return o=r(o)&&i?a(o/i):o}function p(t){let i=t.length,o;if(!i&&t.hasNulls)o=null;else if(i)for(o=0;i--;)o+=t[i];return o}t={average:s,averages:function(){let i=[];return[].forEach.call(arguments,function(t){i.push(s(t))}),void 0===i[0]?void 0:i},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?i(t):t.hasNulls?null:void 0},hlc:function(t,i,o){if(t=e.high(t),i=e.low(i),o=e.close(o),r(t)||r(i)||r(o))return[t,i,o]},low:function(t){return t.length?o(t):t.hasNulls?null:void 0},ohlc:function(t,i,o,a){if(t=e.open(t),i=e.high(i),o=e.low(o),a=e.close(a),r(t)||r(i)||r(o)||r(a))return[t,i,o,a]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,i){return t=e.low(t),i=e.high(i),r(t)||r(i)?[t,i]:null===t&&null===i?null:void 0},sum:p};return n(e,t),t}),i(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),i(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(r,t){let a,{addEvent:o,extend:e,merge:n,pick:s}=t;function p(i){let o=this,t=o.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=o.getGroupPixelWidth&&o.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!i.hasExtremesChanged)})}function u(){let t=this.series,i=t.length,o=0,a=!1,e,n;for(;i--;)(n=t[i].options.dataGrouping)&&(o=Math.max(o,s(n.groupPixelWidth,r.common.groupPixelWidth)),e=(t[i].processedXData||t[i].data).length,(t[i].groupPixelWidth||e>this.chart.plotSizeX/o||e&&n.forced)&&(a=!0));return a?o:0}function l(){this.series.forEach(function(t){t.hasProcessed=!1})}function h(i,t){let o;if(t=s(t,!0),i=i||{forced:!1,units:null},this instanceof a)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:i},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof i?i:n(i,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}return{compose:function(t){var i=(a=t).prototype;i.applyGrouping||(o(t,"afterSetScale",l),o(t,"postProcessData",p),e(i,{applyGrouping:p,getGroupPixelWidth:u,setDataGrouping:h}))}}}),i(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(P,W,k,s,t,i){let{prototype:H}=t["series"],{addEvent:o,defined:F,error:T,extend:a,isNumber:Y,merge:j,pick:e}=i,n=H.generatePoints;function r(f){let x,D,G=this.chart,y=this.options.dataGrouping,t=!1!==this.allowDG&&y&&e(y.enabled,G.options.isStock),M=this.reserveSpace(),i=this.currentDataGrouping,A,v,o=!1;t&&!this.requireSorting&&(this.requireSorting=o=!0);f=0==!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!f)||!t;if(o&&(this.requireSorting=!1),!f){this.destroyGroupedData();let l=y.groupAll?this.xData:this.processedXData,h=y.groupAll?this.yData:this.processedYData,g=G.plotSizeX,d=this.xAxis,c=d.options.ordinal,m=this.groupPixelWidth;if(m&&l&&l.length&&g){D=!0,this.isDirty=!0,this.points=null;let t=d.getExtremes(),i=t.min,o=t.max,a=c&&d.ordinal&&d.ordinal.getGroupIntervalFactor(i,o,this)||1,e=m*(o-i)/g*a,n=d.getTimeTicks(k.Additions.prototype.normalizeTimeTickInterval(e,y.units||W.units),Math.min(i,l[0]),Math.max(o,l[l.length-1]),d.options.startOfWeek,l,this.closestPointRange),r=H.groupData.apply(this,[l,h,n,y.approximation]),s=r.groupedXData,p=r.groupedYData,u=0;for(y&&y.smoothed&&s.length&&(y.firstAnchor="firstPoint",y.anchor="middle",y.lastAnchor="lastPoint",T(32,!1,G,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),x=1;x<n.length;x++)n.info.segmentStarts&&-1!==n.info.segmentStarts.indexOf(x)||(u=Math.max(n[x]-n[x-1],u));(A=n.info).gapSize=u,this.closestPointRange=n.info.totalRange,this.groupMap=r.groupMap,this.currentDataGrouping=A;var f=this,S=s,b=o,E=f.options.dataGrouping,P=f.currentDataGrouping&&f.currentDataGrouping.gapSize;if(E&&f.xData&&P&&f.groupMap){let t=S.length-1,i=E.anchor,o=E.firstAnchor,a=E.lastAnchor,e=S.length-1,n=0;if(o&&f.xData[0]>=S[0]){let t;n++;var E=f.groupMap[0].start,j=f.groupMap[0].length;Y(E)&&Y(j)&&(t=E+(j-1)),S[0]={start:S[0],middle:S[0]+.5*P,end:S[0]+P,firstPoint:f.xData[0],lastPoint:t&&f.xData[t]}[o]}if(0<t&&a&&P&&S[t]>=b-P&&(e--,E=f.groupMap[f.groupMap.length-1].start,S[t]={start:S[t],middle:S[t]+.5*P,end:S[t]+P,firstPoint:E&&f.xData[E],lastPoint:f.xData[f.xData.length-1]}[a]),i&&"start"!==i)for(var C=P*{middle:.5,end:1}[i];e>=n;)S[e]+=C,e--}M&&(F((j=s)[0])&&Y(d.min)&&Y(d.dataMin)&&j[0]<d.min&&((!F(d.options.min)&&d.min<=d.dataMin||d.min===d.dataMin)&&(d.min=Math.min(j[0],d.min)),d.dataMin=Math.min(j[0],d.dataMin)),F(j[j.length-1])&&Y(d.max)&&Y(d.dataMax)&&j[j.length-1]>d.max&&((!F(d.options.max)&&Y(d.dataMax)&&d.max>=d.dataMax||d.max===d.dataMax)&&(d.max=Math.max(j[j.length-1],d.max)),d.dataMax=Math.max(j[j.length-1],d.dataMax))),y.groupAll&&(this.allGroupedData=p,s=(v=this.cropData(s,p,d.min,d.max)).xData,p=v.yData,this.cropStart=v.start),this.processedXData=s,this.processedYData=p}else this.groupMap=null,this.currentDataGrouping=void 0;this.hasGroupedData=D,this.preventGraphAnimation=(i&&i.totalRange)!==(A&&A.totalRange)}}function p(){this.groupedData&&(this.groupedData.forEach(function(t,i){t&&(this.groupedData[i]=t.destroy?t.destroy():null)},this),this.groupedData.length=0,delete this.allGroupedData)}function u(){n.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function l(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function h(i,o,a,t){let e=this,n=e.data,r=e.options&&e.options.data,s=[],p=[],u=[],l=i.length,h=!!o,g=[],d=e.pointArrayMap,c=d&&d.length,m=["x"].concat(d||["y"]),f=this.options.dataGrouping&&this.options.dataGrouping.groupAll,x,D,G,y=0,M=0,A="function"==typeof t?t:t&&P[t]?P[t]:P[e.getDGApproximation&&e.getDGApproximation()||"average"];if(c){let t=d.length;for(;t--;)g.push([])}else g.push([]);var v=c||1;for(let t=0;t<=l;t++)if(!(i[t]<a[0])){for(;void 0!==a[y+1]&&i[t]>=a[y+1]||t===l;){x=a[y],e.dataGroupInfo={start:f?M:e.cropStart+M,length:g[0].length,groupStart:x},G=A.apply(e,g),e.pointClass&&!F(e.dataGroupInfo.options)&&(e.dataGroupInfo.options=j(e.pointClass.prototype.optionsToObject.call({series:e},e.options.data[e.cropStart+M])),m.forEach(function(t){delete e.dataGroupInfo.options[t]})),void 0!==G&&(s.push(x),p.push(G),u.push(e.dataGroupInfo)),M=t;for(let t=0;t<v;t++)g[t].length=0,g[t].hasNulls=!1;if(y+=1,t===l)break}if(t===l)break;if(d){var S,b=e.options.dataGrouping&&e.options.dataGrouping.groupAll?t:e.cropStart+t,E=n&&n[b]||e.pointClass.prototype.applyOptions.apply({series:e},[r[b]]);for(let t=0;t<c;t++)Y(S=E[d[t]])?g[t].push(S):null===S&&(g[t].hasNulls=!0)}else Y(D=h?o[t]:null)?g[0].push(D):null===D&&(g[0].hasNulls=!0)}return{groupedXData:s,groupedYData:p,groupMap:u}}function g(t){let i=t.options,o=this.type,a=this.chart.options.plotOptions,e=this.useCommonDataGrouping&&W.common,n=W.seriesSpecific,r=s.defaultOptions.plotOptions[o].dataGrouping;a&&(n[o]||e)&&(t=this.chart.rangeSelector,r=r||j(W.common,n[o]),i.dataGrouping=j(e,r,a.series&&a.series.dataGrouping,a[o].dataGrouping,this.userOptions.dataGrouping,!i.isInternal&&t&&Y(t.selected)&&t.buttonOptions[t.selected].dataGrouping))}return{compose:function(t){var i=t.prototype;i.applyGrouping||(o(t.prototype.pointClass,"update",function(){if(this.dataGroup)return T(24,!1,this.series.chart),!1}),o(t,"afterSetOptions",g),o(t,"destroy",p),a(i,{applyGrouping:r,destroyGroupedData:p,generatePoints:u,getDGApproximation:l,groupData:h}))},groupData:h}}),i(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(a,G,e,t,i,o){let y=t["format"],n=i["composed"],{addEvent:r,extend:M,isNumber:A,pick:v,pushUnique:s}=o;function p(t){let i=this.chart,o=i.time,a=t.labelConfig,e=a.series,n=a.point,r=e.options,s=e.tooltipOptions,p=r.dataGrouping,u=e.xAxis,l=s.xDateFormat,h,g,d,c,m,f=s[t.isFooter?"footerFormat":"headerFormat"];var x,D;u&&"datetime"===u.options.type&&p&&A(a.key)&&(g=e.currentDataGrouping,d=p.dateTimeLabelFormats||G.common.dateTimeLabelFormats,g?(c=d[g.unitName],1===g.count?l=c[0]:(l=c[1],h=c[2])):!l&&d&&u.dateTime&&(l=u.dateTime.getXDateFormat(a.x,s.dateTimeLabelFormats)),D=(x=v(e.groupMap?.[n.index].groupStart,a.key))+g?.totalRange-1,m=o.dateFormat(l,x),h&&(m+=o.dateFormat(h,D)),e.chart.styledMode&&(f=this.styledModeFormat(f)),t.text=y(f,{point:M(a.point,{key:m}),series:e},i),t.preventDefault())}return{compose:function(t,i,o){a.compose(t),e.compose(i),o&&s(n,"DataGrouping")&&r(o,"headerFormatter",p)},groupData:e.groupData}}),i(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,i,o,a){return t.dataGrouping=t.dataGrouping||{},t.dataGrouping.approximationDefaults=t.dataGrouping.approximationDefaults||i,t.dataGrouping.approximations=t.dataGrouping.approximations||o,a.compose(t.Axis,t.Series,t.Tooltip),t})});
!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function i(t,i,o,e){t.hasOwnProperty(i)||(t[i]=e.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),i(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(a,t){let{arrayMax:i,arrayMin:o,correctFloat:e,extend:n,isNumber:s}=t;function r(t){let i=t.length,o=p(t);return o=s(o)&&i?e(o/i):o}function p(t){let i=t.length,o;if(!i&&t.hasNulls)o=null;else if(i)for(o=0;i--;)o+=t[i];return o}t={average:r,averages:function(){let i=[];return[].forEach.call(arguments,function(t){i.push(r(t))}),void 0===i[0]?void 0:i},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?i(t):t.hasNulls?null:void 0},hlc:function(t,i,o){if(t=a.high(t),i=a.low(i),o=a.close(o),s(t)||s(i)||s(o))return[t,i,o]},low:function(t){return t.length?o(t):t.hasNulls?null:void 0},ohlc:function(t,i,o,e){if(t=a.open(t),i=a.high(i),o=a.low(o),e=a.close(e),s(t)||s(i)||s(o)||s(e))return[t,i,o,e]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,i){return t=a.low(t),i=a.high(i),s(t)||s(i)?[t,i]:null===t&&null===i?null:void 0},sum:p};return n(a,t),t}),i(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),i(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(s,i){let e,{addEvent:o,extend:a,merge:n,pick:r}=i,p=[];function u(i){let o=this,t=o.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=o.getGroupPixelWidth&&o.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!i.hasExtremesChanged)})}function l(){let t=this.series,i=t.length,o=0,e=!1,a,n;for(;i--;)(n=t[i].options.dataGrouping)&&(o=Math.max(o,r(n.groupPixelWidth,s.common.groupPixelWidth)),a=(t[i].processedXData||t[i].data).length,(t[i].groupPixelWidth||a>this.chart.plotSizeX/o||a&&n.forced)&&(e=!0));return e?o:0}function h(){this.series.forEach(function(t){t.hasProcessed=!1})}function g(i,t){let o;if(t=r(t,!0),i=i||{forced:!1,units:null},this instanceof e)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:i},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof i?i:n(i,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}return{compose:function(t){e=t,i.pushUnique(p,t)&&(o(t,"afterSetScale",h),o(t,"postProcessData",u),a(t.prototype,{applyGrouping:u,getGroupPixelWidth:l,setDataGrouping:g}))}}}),i(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(b,F,T,r,t,o){let{prototype:Y}=t["series"],{addEvent:e,defined:w,error:N,extend:a,isNumber:O,merge:j,pick:R}=o,i=Y.generatePoints,n=[];function s(D){let G=this.chart,t=this.options,y=t.dataGrouping,i=!1!==this.allowDG&&y&&R(y.enabled,G.options.isStock),M=this.reserveSpace(),o=this.currentDataGrouping,A,v,e=!1;i&&!this.requireSorting&&(this.requireSorting=e=!0);D=0==!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!D)||!i;if(e&&(this.requireSorting=!1),!D){let l,h,g=(this.destroyGroupedData(),y.groupAll?this.xData:this.processedXData),d=y.groupAll?this.yData:this.processedYData,c=G.plotSizeX,f=this.xAxis,m=f.options.ordinal,x=this.groupPixelWidth;if(x&&g&&g.length&&c){h=!0,this.isDirty=!0,this.points=null;let t=f.getExtremes(),i=t.min,o=t.max,e=m&&f.ordinal&&f.ordinal.getGroupIntervalFactor(i,o,this)||1,a=x*(o-i)/c*e,n=f.getTimeTicks(T.Additions.prototype.normalizeTimeTickInterval(a,y.units||F.units),Math.min(i,g[0]),Math.max(o,g[g.length-1]),f.options.startOfWeek,g,this.closestPointRange),s=Y.groupData.apply(this,[g,d,n,y.approximation]),r=s.groupedXData,p=s.groupedYData,u=0;for(y&&y.smoothed&&r.length&&(y.firstAnchor="firstPoint",y.anchor="middle",y.lastAnchor="lastPoint",N(32,!1,G,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),l=1;l<n.length;l++)n.info.segmentStarts&&-1!==n.info.segmentStarts.indexOf(l)||(u=Math.max(n[l]-n[l-1],u));(A=n.info).gapSize=u,this.closestPointRange=n.info.totalRange,this.groupMap=s.groupMap,this.currentDataGrouping=A;{D=this;var S=r;var E=o;let t;var P=D.options.dataGrouping,b=D.currentDataGrouping&&D.currentDataGrouping.gapSize;if(P&&D.xData&&b&&D.groupMap){var j=S.length-1,C=P.anchor,W=R(P.firstAnchor,C),P=R(P.lastAnchor,C);if(C&&"start"!==C){var k=b*{middle:.5,end:1}[C];for(t=S.length-1;t--&&0<t;)S[t]+=k}if(W&&"start"!==W&&D.xData[0]>=S[0]){let t;var C=D.groupMap[0].start,H=D.groupMap[0].length;O(C)&&O(H)&&(t=C+(H-1)),S[0]={middle:S[0]+.5*b,end:S[0]+b,firstPoint:D.xData[0],lastPoint:t&&D.xData[t]}[W]}P&&"start"!==P&&b&&S[j]>=E-b&&(C=D.groupMap[D.groupMap.length-1].start,S[j]={middle:S[j]+.5*b,end:S[j]+b,firstPoint:C&&D.xData[C],lastPoint:D.xData[D.xData.length-1]}[P])}}M&&(w((H=r)[0])&&O(f.min)&&O(f.dataMin)&&H[0]<f.min&&((!w(f.options.min)&&f.min<=f.dataMin||f.min===f.dataMin)&&(f.min=Math.min(H[0],f.min)),f.dataMin=Math.min(H[0],f.dataMin)),w(H[H.length-1])&&O(f.max)&&O(f.dataMax)&&H[H.length-1]>f.max&&((!w(f.options.max)&&O(f.dataMax)&&f.max>=f.dataMax||f.max===f.dataMax)&&(f.max=Math.max(H[H.length-1],f.max)),f.dataMax=Math.max(H[H.length-1],f.dataMax))),y.groupAll&&(this.allGroupedData=p,r=(v=this.cropData(r,p,f.min,f.max)).xData,p=v.yData,this.cropStart=v.start),this.processedXData=r,this.processedYData=p}else this.groupMap=null;this.hasGroupedData=h,this.preventGraphAnimation=(o&&o.totalRange)!==(A&&A.totalRange)}}function p(){this.groupedData&&(this.groupedData.forEach(function(t,i){t&&(this.groupedData[i]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)}function u(){i.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function l(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")||this.options.cumulative?"sum":"average"}function h(i,o,e,t){let a=this,n=a.data,s=a.options&&a.options.data,r=[],p=[],u=[],l=i.length,h=!!o,g=[],d=a.pointArrayMap,c=d&&d.length,f=["x"].concat(d||["y"]),m=this.options.dataGrouping&&this.options.dataGrouping.groupAll,x,D,G,y=0,M=0,A="function"==typeof t?t:t&&b[t]?b[t]:b[a.getDGApproximation&&a.getDGApproximation()||"average"];if(c){let t=d.length;for(;t--;)g.push([])}else g.push([]);var v=c||1;for(let t=0;t<=l;t++)if(!(i[t]<e[0])){for(;void 0!==e[y+1]&&i[t]>=e[y+1]||t===l;){x=e[y],a.dataGroupInfo={start:m?M:a.cropStart+M,length:g[0].length},G=A.apply(a,g),a.pointClass&&!w(a.dataGroupInfo.options)&&(a.dataGroupInfo.options=j(a.pointClass.prototype.optionsToObject.call({series:a},a.options.data[a.cropStart+M])),f.forEach(function(t){delete a.dataGroupInfo.options[t]})),void 0!==G&&(r.push(x),p.push(G),u.push(a.dataGroupInfo)),M=t;for(let t=0;t<v;t++)g[t].length=0,g[t].hasNulls=!1;if(y+=1,t===l)break}if(t===l)break;if(d){var S,E=a.options.dataGrouping&&a.options.dataGrouping.groupAll?t:a.cropStart+t,P=n&&n[E]||a.pointClass.prototype.applyOptions.apply({series:a},[s[E]]);for(let t=0;t<c;t++)O(S=P[d[t]])?g[t].push(S):null===S&&(g[t].hasNulls=!0)}else O(D=h?o[t]:null)?g[0].push(D):null===D&&(g[0].hasNulls=!0)}return{groupedXData:r,groupedYData:p,groupMap:u}}function g(t){let i=t.options,o=this.type,e=this.chart.options.plotOptions,a=this.useCommonDataGrouping&&F.common,n=F.seriesSpecific,s=r.defaultOptions.plotOptions[o].dataGrouping;e&&(n[o]||a)&&(t=this.chart.rangeSelector,s=s||j(F.common,n[o]),i.dataGrouping=j(a,s,e.series&&e.series.dataGrouping,e[o].dataGrouping,this.userOptions.dataGrouping,!i.isInternal&&t&&O(t.selected)&&t.buttonOptions[t.selected].dataGrouping))}return{compose:function(t){var i=t.prototype.pointClass;o.pushUnique(n,i)&&e(i,"update",function(){if(this.dataGroup)return N(24,!1,this.series.chart),!1}),o.pushUnique(n,t)&&(e(t,"afterSetOptions",g),e(t,"destroy",p),a(t.prototype,{applyGrouping:s,destroyGroupedData:p,generatePoints:u,getDGApproximation:l,groupData:h}))},groupData:h}}),i(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/Templating.js"],t["Core/Utilities.js"]],function(e,m,a,t,n){let x=t["format"],{addEvent:s,extend:D,isNumber:G}=n,r=[];function p(t){let i=this.chart,o=i.time,e=t.labelConfig,a=e.series,n=a.options,s=a.tooltipOptions,r=n.dataGrouping,p=a.xAxis,u=s.xDateFormat,l,h,g,d,c,f=s[t.isFooter?"footerFormat":"headerFormat"];p&&"datetime"===p.options.type&&r&&G(e.key)&&(h=a.currentDataGrouping,g=r.dateTimeLabelFormats||m.common.dateTimeLabelFormats,h?(d=g[h.unitName],1===h.count?u=d[0]:(u=d[1],l=d[2])):!u&&g&&p.dateTime&&(u=p.dateTime.getXDateFormat(e.x,s.dateTimeLabelFormats)),c=o.dateFormat(u,e.key),l&&(c+=o.dateFormat(l,e.key+h.totalRange-1)),a.chart.styledMode&&(f=this.styledModeFormat(f)),t.text=x(f,{point:D(e.point,{key:c}),series:a},i),t.preventDefault())}return{compose:function(t,i,o){e.compose(t),a.compose(i),o&&n.pushUnique(r,o)&&s(o,"headerFormatter",p)},groupData:a.groupData}}),i(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,i,o,e){t.dataGrouping={approximationDefaults:i,approximations:o},e.compose(t.Axis,t.Series,t.Tooltip)})});
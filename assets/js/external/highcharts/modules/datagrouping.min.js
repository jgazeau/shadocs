"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/datagrouping",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function i(t,i,o,a){t.hasOwnProperty(i)||(t[i]=a.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:i,module:t[i]}})))}i(t=t?t._modules:{},"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}}),i(t,"Extensions/DataGrouping/ApproximationDefaults.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Core/Utilities.js"]],function(e,t){function o(t){var i=t.length;return t=a(t),t=p(t)&&i?s(t/i):t}function a(t){let i=t.length,o;if(!i&&t.hasNulls)o=null;else if(i)for(o=0;i--;)o+=t[i];return o}const{arrayMax:i,arrayMin:n,correctFloat:s,extend:r,isNumber:p}=t;return t={average:o,averages:function(){const i=[];return[].forEach.call(arguments,function(t){i.push(o(t))}),void 0===i[0]?void 0:i},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},high:function(t){return t.length?i(t):t.hasNulls?null:void 0},hlc:function(t,i,o){if(t=e.high(t),i=e.low(i),o=e.close(o),p(t)||p(i)||p(o))return[t,i,o]},low:function(t){return t.length?n(t):t.hasNulls?null:void 0},ohlc:function(t,i,o,a){if(t=e.open(t),i=e.high(i),o=e.low(o),a=e.close(a),p(t)||p(i)||p(o)||p(a))return[t,i,o,a]},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},range:function(t,i){return t=e.low(t),i=e.high(i),p(t)||p(i)?[t,i]:null===t&&null===i?null:void 0},sum:a},r(e,t),t}),i(t,"Extensions/DataGrouping/DataGroupingDefaults.js",[],function(){return{common:{groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %e %b, %H:%M:%S.%L","%A, %e %b, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %e %b, %H:%M:%S","%A, %e %b, %H:%M:%S","-%H:%M:%S"],minute:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],hour:["%A, %e %b, %H:%M","%A, %e %b, %H:%M","-%H:%M"],day:["%A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],week:["Week from %A, %e %b %Y","%A, %e %b","-%A, %e %b %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},seriesSpecific:{line:{},spline:{},area:{},areaspline:{},arearange:{},column:{groupPixelWidth:10},columnrange:{groupPixelWidth:10},candlestick:{groupPixelWidth:10},ohlc:{groupPixelWidth:5},hlc:{groupPixelWidth:5},heikinashi:{groupPixelWidth:10}},units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]]}}),i(t,"Extensions/DataGrouping/DataGroupingAxisComposition.js",[t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Utilities.js"]],function(s,i){function o(i){const o=this,t=o.series;t.forEach(function(t){t.groupPixelWidth=void 0}),t.forEach(function(t){t.groupPixelWidth=o.getGroupPixelWidth&&o.getGroupPixelWidth(),t.groupPixelWidth&&(t.hasProcessed=!0),t.applyGrouping(!!i.hasExtremesChanged)})}function a(){var t=this.series;let i=t.length,o=0,a=!1,e,n;for(;i--;)(n=t[i].options.dataGrouping)&&(o=Math.max(o,l(n.groupPixelWidth,s.common.groupPixelWidth)),e=(t[i].processedXData||t[i].data).length,(t[i].groupPixelWidth||e>this.chart.plotSizeX/o||e&&n.forced)&&(a=!0));return a?o:0}function e(){this.series.forEach(function(t){t.hasProcessed=!1})}function n(i,t){let o;if(t=l(t,!0),i=i||{forced:!1,units:null},this instanceof d)for(o=this.series.length;o--;)this.series[o].update({dataGrouping:i},!1);else this.chart.options.series.forEach(function(t){t.dataGrouping="boolean"==typeof i?i:u(i,t.dataGrouping)});this.ordinal&&(this.ordinal.slope=void 0),t&&this.chart.redraw()}const{addEvent:r,extend:p,merge:u,pick:l}=i,h=[];let d;return{compose:function(t){d=t,i.pushUnique(h,t)&&(r(t,"afterSetScale",e),r(t,"postProcessData",o),p(t.prototype,{applyGrouping:o,getGroupPixelWidth:a,setDataGrouping:n}))}}}),i(t,"Extensions/DataGrouping/DataGroupingSeriesComposition.js",[t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Core/Axis/DateTimeAxis.js"],t["Core/Defaults.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,D,G,r,i,o){function a(i){var o=this.chart,a=this.options.dataGrouping,e=!1!==this.allowDG&&a&&A(a.enabled,o.options.isStock),n=this.visible||!o.options.chart.ignoreHiddenSeries,s=this.currentDataGrouping,r=!1;if(e&&!this.requireSorting&&(this.requireSorting=r=!0),i=!1==!(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!i)||!e,r&&(this.requireSorting=!1),!i){this.destroyGroupedData(),i=a.groupAll?this.xData:this.processedXData;var p,e=a.groupAll?this.yData:this.processedYData,u=o.plotSizeX,l=(r=this.xAxis).options.ordinal;let t;if((h=this.groupPixelWidth)&&i&&i.length&&u){this.isDirty=t=!0,this.points=null;var h,d=(g=r.getExtremes()).min,g=g.max,l=l&&r.ordinal&&r.ordinal.getGroupIntervalFactor(d,g,this)||1,u=r.getTimeTicks(G.Additions.prototype.normalizeTimeTickInterval(h*(g-d)/u*l,a.units||D.units),Math.min(d,i[0]),Math.max(g,i[i.length-1]),r.options.startOfWeek,i,this.closestPointRange),o=(i=(h=y.groupData.apply(this,[i,e,u,a.approximation])).groupedXData,e=h.groupedYData,l=0,a&&a.smoothed&&i.length&&(a.firstAnchor="firstPoint",a.anchor="middle",a.lastAnchor="lastPoint",M(32,!1,o,{"dataGrouping.smoothed":"use dataGrouping.anchor"})),i),c=g,f=this.options.dataGrouping;if(g=this.currentDataGrouping&&this.currentDataGrouping.gapSize,f&&this.xData&&g&&this.groupMap){var d=o.length-1,m=f.anchor;const i=A(f.firstAnchor,m);if(f=A(f.lastAnchor,m),m&&"start"!==m)for(var x=g*{middle:.5,end:1}[m],m=o.length-1;m--&&0<m;)o[m]+=x;i&&"start"!==i&&this.xData[0]>=o[0]&&(m=this.groupMap[0].start,x=this.groupMap[0].length,S(m)&&S(x)&&(p=m+(x-1)),o[0]={middle:o[0]+.5*g,end:o[0]+g,firstPoint:this.xData[0],lastPoint:p&&this.xData[p]}[i]),f&&"start"!==f&&g&&o[d]>=c-g&&(p=this.groupMap[this.groupMap.length-1].start,o[d]={middle:o[d]+.5*g,end:o[d]+g,firstPoint:p&&this.xData[p],lastPoint:this.xData[this.xData.length-1]}[f])}for(p=1;p<u.length;p++)u.info.segmentStarts&&-1!==u.info.segmentStarts.indexOf(p)||(l=Math.max(u[p]-u[p-1],l));(g=u.info).gapSize=l,this.closestPointRange=u.info.totalRange,this.groupMap=h.groupMap,n&&(n=r,p=i,v(p[0])&&S(n.min)&&S(n.dataMin)&&p[0]<n.min&&((!v(n.options.min)&&n.min<=n.dataMin||n.min===n.dataMin)&&(n.min=Math.min(p[0],n.min)),n.dataMin=Math.min(p[0],n.dataMin)),v(p[p.length-1])&&S(n.max)&&S(n.dataMax)&&p[p.length-1]>n.max&&((!v(n.options.max)&&S(n.dataMax)&&n.max>=n.dataMax||n.max===n.dataMax)&&(n.max=Math.max(p[p.length-1],n.max)),n.dataMax=Math.max(p[p.length-1],n.dataMax))),a.groupAll&&(this.allGroupedData=e,i=(a=this.cropData(i,e,r.min,r.max,1)).xData,e=a.yData,this.cropStart=a.start),this.processedXData=i,this.processedYData=e}else this.groupMap=null;this.hasGroupedData=t,this.currentDataGrouping=g,this.preventGraphAnimation=(s&&s.totalRange)!==(g&&g.totalRange)}}function e(){this.groupedData&&(this.groupedData.forEach(function(t,i){t&&(this.groupedData[i]=t.destroy?t.destroy():null)},this),this.groupedData.length=0)}function n(){d.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null}function s(){return this.is("arearange")?"range":this.is("ohlc")?"ohlc":this.is("hlc")?"hlc":this.is("column")?"sum":"average"}function p(i,o,a,e){const n=this,s=n.data,r=n.options&&n.options.data,p=[],u=[],l=[],h=i.length,d=!!o,g=[],c=n.pointArrayMap,f=c&&c.length,m=["x"].concat(c||["y"]),x=this.options.dataGrouping&&this.options.dataGrouping.groupAll;let D=0,G=0;if(e="function"==typeof e?e:e&&t[e]?t[e]:t[n.getDGApproximation&&n.getDGApproximation()||"average"],f)for(var y=c.length;y--;)g.push([]);else g.push([]);y=f||1;for(let t=0;t<=h;t++)if(!(i[t]<a[0])){for(;void 0!==a[D+1]&&i[t]>=a[D+1]||t===h;){var M=a[D],A=(n.dataGroupInfo={start:x?G:n.cropStart+G,length:g[0].length},e.apply(n,g));for(n.pointClass&&!v(n.dataGroupInfo.options)&&(n.dataGroupInfo.options=b(n.pointClass.prototype.optionsToObject.call({series:n},n.options.data[n.cropStart+G])),m.forEach(function(t){delete n.dataGroupInfo.options[t]})),void 0!==A&&(p.push(M),u.push(A),l.push(n.dataGroupInfo)),G=t,M=0;M<y;M++)g[M].length=0,g[M].hasNulls=!1;if(D+=1,t===h)break}if(t===h)break;if(c){M=n.options.dataGrouping&&n.options.dataGrouping.groupAll?t:n.cropStart+t,M=s&&s[M]||n.pointClass.prototype.applyOptions.apply({series:n},[r[M]]);for(let t=0;t<f;t++)A=M[c[t]],S(A)?g[t].push(A):null===A&&(g[t].hasNulls=!0)}else M=d?o[t]:null,S(M)?g[0].push(M):null===M&&(g[0].hasNulls=!0)}return{groupedXData:p,groupedYData:u,groupMap:l}}function u(t){t=t.options;var i,o=this.type,a=this.chart.options.plotOptions,e=this.useCommonDataGrouping&&D.common,n=D.seriesSpecific;let s=r.defaultOptions.plotOptions[o].dataGrouping;a&&(n[o]||e)&&(i=this.chart.rangeSelector,s=s||b(D.common,n[o]),t.dataGrouping=b(e,s,a.series&&a.series.dataGrouping,a[o].dataGrouping,this.userOptions.dataGrouping,!t.isInternal&&i&&S(i.selected)&&i.buttonOptions[i.selected].dataGrouping))}const{prototype:y}=i["series"],{addEvent:l,defined:v,error:M,extend:h,isNumber:S,merge:b,pick:A}=o,d=y.generatePoints,g=[];return{compose:function(t){var i=t.prototype.pointClass;o.pushUnique(g,i)&&l(i,"update",function(){if(this.dataGroup)return M(24,!1,this.series.chart),!1}),o.pushUnique(g,t)&&(l(t,"afterSetOptions",u),l(t,"destroy",e),h(t.prototype,{applyGrouping:a,destroyGroupedData:e,generatePoints:n,getDGApproximation:s,groupData:p}))},groupData:p}}),i(t,"Extensions/DataGrouping/DataGrouping.js",[t["Extensions/DataGrouping/DataGroupingAxisComposition.js"],t["Extensions/DataGrouping/DataGroupingDefaults.js"],t["Extensions/DataGrouping/DataGroupingSeriesComposition.js"],t["Core/FormatUtilities.js"],t["Core/Utilities.js"]],function(a,d,e,t,n){function s(t){const i=this.chart,o=i.time,a=t.labelConfig,e=a.series;var n=e.tooltipOptions,s=e.options.dataGrouping;const r=e.xAxis;var p=n.xDateFormat;let u,l,h=n[t.isFooter?"footerFormat":"headerFormat"];r&&"datetime"===r.options.type&&s&&f(a.key)&&(l=e.currentDataGrouping,s=s.dateTimeLabelFormats||d.common.dateTimeLabelFormats,l?(n=s[l.unitName],1===l.count?p=n[0]:(p=n[1],u=n[2])):!p&&s&&r.dateTime&&(p=r.dateTime.getXDateFormat(a.x,n.dateTimeLabelFormats)),p=o.dateFormat(p,a.key),u&&(p+=o.dateFormat(u,a.key+l.totalRange-1)),e.chart.styledMode&&(h=this.styledModeFormat(h)),t.text=g(h,{point:c(a.point,{key:p}),series:e},i),t.preventDefault())}const g=t["format"],{addEvent:r,extend:c,isNumber:f}=n,p=[];return t={compose:function(t,i,o){a.compose(t),e.compose(i),o&&n.pushUnique(p,o)&&r(o,"headerFormatter",s)},groupData:e.groupData}}),i(t,"masters/modules/datagrouping.src.js",[t["Core/Globals.js"],t["Extensions/DataGrouping/ApproximationDefaults.js"],t["Extensions/DataGrouping/ApproximationRegistry.js"],t["Extensions/DataGrouping/DataGrouping.js"]],function(t,i,o,a){t.dataGrouping={approximationDefaults:i,approximations:o},a.compose(t.Axis,t.Series,t.Tooltip)})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,n,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.fromNode=void 0,t.index=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.scale=void 0,t.shapeArgs=void 0,t.toNode=void 0,t}return o=o.extend,n=e.seriesTypes.sankey.prototype.pointClass,s(r,n),r.prototype.isValid=function(){return!0},o((e=r).prototype,{setState:t.setNodeState}),e}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,o,n,s){var r,a,p=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__rest||function(t,e){var o={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]]);return o},d=n.prototype.symbols,c=o.seriesTypes.sankey,u=(n=s.extend,s.merge),m=s.pick,h=s.relativeLength;function f(){var t=null!==a&&a.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.nodeColumns=void 0,t.nodes=void 0,t.points=void 0,t}return p(f,a=c),f.prototype.createNodeColumns=function(){var d=this,l=this,c=l.chart,u=e.compose([],l);return u.sankeyColumn.maxLength=c.inverted?c.plotHeight:c.plotWidth,u.sankeyColumn.getTranslationFactor=function(t){for(var e,o=u.slice(),i=d.options.minLinkWidth||0,n=0,s=0,r=1,a=0,p=(c.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(u.length-1)*t.nodePadding;u.length;){for(n=p/u.sankeyColumn.sum(),t=!1,e=u.length;e--;){var l=u[e].getSum()*n*r,h=Math.min(c.plotHeight,c.plotWidth);h<l?r=Math.min(h/l,r):l<i&&(u.splice(e,1),p-=i,l=i,t=!0),a+=l*(1-r)/2,s=Math.max(s,l)}if(!t)break}return u.length=0,o.forEach(function(t){t.scale=r,u.push(t)}),u.sankeyColumn.maxRadius=s,u.sankeyColumn.scale=r,u.sankeyColumn.additionalSpace=a,n},u.sankeyColumn.offset=function(t,e){for(var o=t.series.options.equalNodes,i=u.sankeyColumn.additionalSpace||0,n=l.nodePadding,s=Math.min(c.plotWidth,c.plotHeight,(u.sankeyColumn.maxLength||0)/l.nodes.length-n),r=0;r<u.length;r++){var a=u[r].getSum()*(u.sankeyColumn.scale||0),p=o?s:Math.max(a*e,l.options.minLinkWidth||0);if(a=a?p+n:0,u[r]===t)return{relativeLeft:i+h(t.options.offset||0,a)};i+=a}},l.nodes.forEach(function(t){t.column=0,u.push(t)}),[u]},f.prototype.translateLink=function(o){function t(t,e){return e=(t.offset(o,e)||0)*s,Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-a)}var e=o.fromNode,i=o.toNode,n=this.chart,s=this.translationFactor,r=this.options,a=m(o.options.linkWeight,r.linkWeight,Math.max((o.weight||0)*s*e.scale,this.options.minLinkWidth||0)),p=o.series.options.centeredLinks,l=e.nodeY,h=p?e.nodeX+((e.shapeArgs.height||0)-a)/2:t(e,"linksFrom");(i=p?i.nodeX+((i.shapeArgs.height||0)-a)/2:t(i,"linksTo"))<h&&(h=(i=[i,h])[0],i=i[1]),r.reversed&&(h=(i=[i,h])[0],i=i[1],l=(n.plotSizeY||0)-l),o.shapeType="path",o.linkBase=[h,h+a,i,i+a],r=(i+a-h)/Math.abs(i+a-h)*m(r.linkRadius,Math.min(Math.abs(i+a-h)/2,e.nodeY-Math.abs(a))),o.shapeArgs={d:[["M",h,l],["A",(i+a-h)/2,r,0,0,1,i+a,l],["L",i,l],["A",(i-h-a)/2,r-a,0,0,0,h+a,l],["Z"]]},o.dlBox={x:h+(i-h)/2,y:l-r,height:a,width:0},o.tooltipPos=n.inverted?[(n.plotSizeY||0)-o.dlBox.y-a/2,(n.plotSizeX||0)-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+a/2],o.y=o.plotY=1,o.x=o.plotX=1,o.color||(o.color=e.color)},f.prototype.translateNode=function(t,e){var o=this.translationFactor,i=this.chart,n=this.options,s=Math.min(i.plotWidth,i.plotHeight,(i.inverted?i.plotWidth:i.plotHeight)/t.series.nodes.length-this.nodePadding),r=t.getSum()*(e.sankeyColumn.scale||0),s=n.equalNodes?s:Math.max(r*o,this.options.minLinkWidth||0),a=Math.round(n.marker&&n.marker.lineWidth||0)%2/2,p=e.sankeyColumn.offset(t,o),o=Math.floor(m(p&&p.absoluteLeft,(e.sankeyColumn.left(o)||0)+(p&&p.relativeLeft||0)))+a,l=u(n.marker,t.options.marker),p=l.symbol,h=l.radius;e=parseInt(n.offset,10)*((i.inverted?i.plotWidth:i.plotHeight)-(Math.floor(this.colDistance*(t.column||0)+(l.lineWidth||0)/2)+a+(e.sankeyColumn.scale||0)*(e.sankeyColumn.maxRadius||0)/2))/100,(t.sum=r)?(t.nodeX=o,t.nodeY=e,r=t.options.width||n.width||s,s=t.options.height||n.height||s,a=e,n.reversed&&(a=(i.plotSizeY||0)-e,i.inverted&&(a=(i.plotSizeY||0)-e)),this.mapOptionsToLevel&&(t.dlOptions=c.getDLOptions({level:this.mapOptionsToLevel[t.level],optionsPoint:t.options})),t.plotX=1,t.plotY=1,t.tooltipPos=i.inverted?[(i.plotSizeY||0)-a-s/2,(i.plotSizeX||0)-o-r/2]:[o+r/2,a+s/2],t.shapeType="path",t.shapeArgs={d:d[p||"circle"](o,a-(h||s)/2,h||r,h||s),width:h||r,height:h||s},t.dlBox={x:o+r/2,y:a,height:0,width:0}):t.dlOptions={enabled:!1}},f.prototype.drawDataLabels=function(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,c.prototype.drawDataLabels.apply(this,arguments),this.points=this.data,this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,a.prototype.drawDataLabels.apply(this,arguments),this.points=this.points.concat(this.nodes||[]),this.options.dataLabels.textPath=t)},f.prototype.pointAttribs=function(t,e){var o;return t&&t.isNode?(o=i.prototype.pointAttribs.apply(this,arguments),l(o,["opacity"])):a.prototype.pointAttribs.apply(this,arguments)},f.prototype.markerAttribs=function(t){return t.isNode?a.prototype.markerAttribs.apply(this,arguments):{}},f.defaultOptions=u(c.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,states:{}}}),n((s=f).prototype,{orderNodes:!1}),s.prototype.pointClass=t,o.registerSeriesType("arcdiagram",s),s}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){let{sankey:{prototype:{pointClass:o}}}=e["seriesTypes"],s=i["extend"];class a extends o{constructor(){super(...arguments),this.fromNode=void 0,this.index=void 0,this.linksFrom=void 0,this.linksTo=void 0,this.options=void 0,this.series=void 0,this.scale=void 0,this.shapeArgs=void 0,this.toNode=void 0}isValid(){return!0}}return s(a.prototype,{setState:t.setNodeState}),a}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,i,o,s,a){let{symbols:p}=s["prototype"],{column:n,sankey:m}=o["seriesTypes"],{extend:r,merge:u,pick:g,relativeLength:c}=a;class l extends m{constructor(){super(...arguments),this.data=void 0,this.options=void 0,this.nodeColumns=void 0,this.nodes=void 0,this.points=void 0}createNodeColumns(){let d=this,m=d.chart,u=e.compose([],d);return u.sankeyColumn.maxLength=m.inverted?m.plotHeight:m.plotWidth,u.sankeyColumn.getTranslationFactor=t=>{let e=u.slice(),i=this.options.minLinkWidth||0,o,s=0,a,n,r=0,l=1,h=0,d=(m.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(u.length-1)*t.nodePadding;for(;u.length;){for(s=d/u.sankeyColumn.sum(),o=!1,a=u.length;a--;){n=u[a].getSum()*s*l;var p=Math.min(m.plotHeight,m.plotWidth);n>p?l=Math.min(p/n,l):n<i&&(u.splice(a,1),d-=i,n=i,o=!0),h+=n*(1-l)/2,r=Math.max(r,n)}if(!o)break}return u.length=0,e.forEach(t=>{t.scale=l,u.push(t)}),u.sankeyColumn.maxRadius=r,u.sankeyColumn.scale=l,u.sankeyColumn.additionalSpace=h,s},u.sankeyColumn.offset=function(e,i){let o=e.series.options.equalNodes,s=u.sankeyColumn.additionalSpace||0,a,n=d.nodePadding,r=Math.min(m.plotWidth,m.plotHeight,(u.sankeyColumn.maxLength||0)/d.nodes.length-n);for(let t=0;t<u.length;t++){var l=u[t].getSum()*(u.sankeyColumn.scale||0),h=o?r:Math.max(l*i,d.options.minLinkWidth||0);if(a=l?h+n:0,u[t]===e)return{relativeLeft:s+c(e.options.offset||0,a)};s+=a}},d.nodes.forEach(function(t){t.column=0,u.push(t)}),[u]}translateLink(i){let t=i.fromNode,e=i.toNode,o=this.chart,s=this.translationFactor,a=i.options,n=this.options,r=g(a.linkWeight,n.linkWeight,Math.max((i.weight||0)*s*t.scale,this.options.minLinkWidth||0)),l=i.series.options.centeredLinks,h=t.nodeY,d=(t,e)=>{e=(t.offset(i,e)||0)*s;return Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-r)},p=l?t.nodeX+((t.shapeArgs.height||0)-r)/2:d(t,"linksFrom"),m=l?e.nodeX+((e.shapeArgs.height||0)-r)/2:d(e,"linksTo"),u=h;r;p>m&&([p,m]=[m,p]),n.reversed&&([p,m]=[m,p],u=(o.plotSizeY||0)-u),i.shapeType="path",i.linkBase=[p,p+r,m,m+r];var c=(m+r-p)/Math.abs(m+r-p)*g(n.linkRadius,Math.min(Math.abs(m+r-p)/2,t.nodeY-Math.abs(r)));i.shapeArgs={d:[["M",p,u],["A",(m+r-p)/2,c,0,0,1,m+r,u],["L",m,u],["A",(m-p-r)/2,c-r,0,0,0,p+r,u],["Z"]]},i.dlBox={x:p+(m-p)/2,y:u-c,height:r,width:0},i.tooltipPos=o.inverted?[(o.plotSizeY||0)-i.dlBox.y-r/2,(o.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y+r/2],i.y=i.plotY=1,i.x=i.plotX=1,i.color||(i.color=t.color)}translateNode(o,t){var s=this.translationFactor,a=this.chart,n=a.inverted?a.plotWidth:a.plotHeight,r=this.options,n=Math.min(a.plotWidth,a.plotHeight,n/o.series.nodes.length-this.nodePadding),e=o.getSum()*(t.sankeyColumn.scale||0),n=r.equalNodes?n:Math.max(e*s,this.options.minLinkWidth||0),i=Math.round(r.marker&&r.marker.lineWidth||0)%2/2,l=t.sankeyColumn.offset(o,s),s=Math.floor(g(l&&l.absoluteLeft,(t.sankeyColumn.left(s)||0)+(l&&l.relativeLeft||0)))+i,l=u(r.marker,o.options.marker),h=l.symbol,d=l.radius,l=parseInt(r.offset,10)*((a.inverted?a.plotWidth:a.plotHeight)-(Math.floor(this.colDistance*(o.column||0)+(l.lineWidth||0)/2)+i+(t.sankeyColumn.scale||0)*(t.sankeyColumn.maxRadius||0)/2))/100;if(o.sum=e){o.nodeX=s,o.nodeY=l;let t=o.options.width||r.width||n,e=o.options.height||r.height||n,i=l;r.reversed&&(i=(a.plotSizeY||0)-l,a.inverted&&(i=(a.plotSizeY||0)-l)),this.mapOptionsToLevel&&(o.dlOptions=m.getDLOptions({level:this.mapOptionsToLevel[o.level],optionsPoint:o.options})),o.plotX=1,o.plotY=1,o.tooltipPos=a.inverted?[(a.plotSizeY||0)-i-e/2,(a.plotSizeX||0)-s-t/2]:[s+t/2,i+e/2],o.shapeType="path",o.shapeArgs={d:p[h||"circle"](s,i-(d||e)/2,d||t,d||e),width:d||t,height:d||e},o.dlBox={x:s+t/2,y:i,height:0,width:0}}else o.dlOptions={enabled:!1}}drawDataLabels(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,n.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,n.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)}pointAttribs(t,e){if(t&&t.isNode){let{opacity:t,...e}=i.prototype.pointAttribs.apply(this,arguments);return e}return super.pointAttribs.apply(this,arguments)}markerAttribs(t){return t.isNode?super.markerAttribs.apply(this,arguments):{}}}return l.defaultOptions=u(m.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),r(l.prototype,{orderNodes:!1}),l.prototype.pointClass=t,o.registerSeriesType("arcdiagram",l),l}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});
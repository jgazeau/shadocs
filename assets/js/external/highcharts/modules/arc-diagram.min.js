"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,s,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,s),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Series/ArcDiagram/ArcDiagramPoint.js",[t["Series/NodesComposition.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,s){({sankey:{prototype:{pointClass:e}}}=e.seriesTypes),s=s.extend;class o extends e{constructor(){super(...arguments),this.toNode=this.shapeArgs=this.scale=this.series=this.options=this.linksTo=this.linksFrom=this.index=this.fromNode=void 0}isValid(){return!0}}return s(o.prototype,{setState:t.setNodeState}),o}),e(t,"Series/ArcDiagram/ArcDiagramSeries.js",[t["Series/ArcDiagram/ArcDiagramPoint.js"],t["Series/Sankey/SankeyColumnComposition.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,s,o,i,n){var a=this&&this.__rest||function(t,e){var s={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(s[i[o]]=t[i[o]]);return s};const{symbols:d}=i["prototype"],{column:r,sankey:c}=o["seriesTypes"],{extend:l,merge:m,pick:u,relativeLength:p}=n;class h extends c{constructor(){super(...arguments),this.points=this.nodes=this.nodeColumns=this.options=this.data=void 0}createNodeColumns(){const h=this,d=h.chart,c=e.compose([],h);return c.sankeyColumn.maxLength=d.inverted?d.plotHeight:d.plotWidth,c.sankeyColumn.getTranslationFactor=t=>{const e=c.slice(),s=this.options.minLinkWidth||0;let o=0,i,n,a=0,r=1,l=0,h=(d.plotSizeX||0)-(t.options.marker&&t.options.marker.lineWidth||0)-(c.length-1)*t.nodePadding;for(;c.length;){for(o=h/c.sankeyColumn.sum(),t=!1,i=c.length;i--;){n=c[i].getSum()*o*r;var p=Math.min(d.plotHeight,d.plotWidth);n>p?r=Math.min(p/n,r):n<s&&(c.splice(i,1),h-=s,n=s,t=!0),l+=n*(1-r)/2,a=Math.max(a,n)}if(!t)break}return c.length=0,e.forEach(t=>{t.scale=r,c.push(t)}),c.sankeyColumn.maxRadius=a,c.sankeyColumn.scale=r,c.sankeyColumn.additionalSpace=l,o},c.sankeyColumn.offset=function(e,s){var o=e.series.options.equalNodes;let i=c.sankeyColumn.additionalSpace||0;var n=h.nodePadding,a=Math.min(d.plotWidth,d.plotHeight,(c.sankeyColumn.maxLength||0)/h.nodes.length-n);for(let t=0;t<c.length;t++){var r=c[t].getSum()*(c.sankeyColumn.scale||0),l=o?a:Math.max(r*s,h.options.minLinkWidth||0),r=r?l+n:0;if(c[t]===e)return{relativeLeft:i+p(e.options.offset||0,r)};i+=r}},h.nodes.forEach(function(t){t.column=0,c.push(t)}),[c]}translateLink(s){var t=s.fromNode,e=s.toNode;const o=this.chart,i=this.translationFactor;var n=this.options;const a=u(s.options.linkWeight,n.linkWeight,Math.max((s.weight||0)*i*t.scale,this.options.minLinkWidth||0)),r=s.series.options.centeredLinks;var l=t.nodeY,h=(t,e)=>(e=(t.offset(s,e)||0)*i,Math.min(t.nodeX+e,t.nodeX+(t.shapeArgs&&t.shapeArgs.height||0)-a));let p=r?t.nodeX+((t.shapeArgs.height||0)-a)/2:h(t,"linksFrom");e=r?e.nodeX+((e.shapeArgs.height||0)-a)/2:h(e,"linksTo"),p>e&&([p,e]=[e,p]),n.reversed&&([p,e]=[e,p],l=(o.plotSizeY||0)-l),s.shapeType="path",s.linkBase=[p,p+a,e,e+a],n=(e+a-p)/Math.abs(e+a-p)*u(n.linkRadius,Math.min(Math.abs(e+a-p)/2,t.nodeY-Math.abs(a))),s.shapeArgs={d:[["M",p,l],["A",(e+a-p)/2,n,0,0,1,e+a,l],["L",e,l],["A",(e-p-a)/2,n-a,0,0,0,p+a,l],["Z"]]},s.dlBox={x:p+(e-p)/2,y:l-n,height:a,width:0},s.tooltipPos=o.inverted?[(o.plotSizeY||0)-s.dlBox.y-a/2,(o.plotSizeX||0)-s.dlBox.x]:[s.dlBox.x,s.dlBox.y+a/2],s.y=s.plotY=1,s.x=s.plotX=1,s.color||(s.color=t.color)}translateNode(t,e){var s=this.translationFactor,o=this.chart,i=this.options,n=Math.min(o.plotWidth,o.plotHeight,(o.inverted?o.plotWidth:o.plotHeight)/t.series.nodes.length-this.nodePadding),a=t.getSum()*(e.sankeyColumn.scale||0),n=i.equalNodes?n:Math.max(a*s,this.options.minLinkWidth||0),r=Math.round(i.marker&&i.marker.lineWidth||0)%2/2,l=e.sankeyColumn.offset(t,s),s=Math.floor(u(l&&l.absoluteLeft,(e.sankeyColumn.left(s)||0)+(l&&l.relativeLeft||0)))+r,h=m(i.marker,t.options.marker),l=h.symbol,p=h.radius;e=parseInt(i.offset,10)*((o.inverted?o.plotWidth:o.plotHeight)-(Math.floor(this.colDistance*(t.column||0)+(h.lineWidth||0)/2)+r+(e.sankeyColumn.scale||0)*(e.sankeyColumn.maxRadius||0)/2))/100,(t.sum=a)?(t.nodeX=s,t.nodeY=e,a=t.options.width||i.width||n,n=t.options.height||i.height||n,r=e,i.reversed&&(r=(o.plotSizeY||0)-e,o.inverted&&(r=(o.plotSizeY||0)-e)),this.mapOptionsToLevel&&(t.dlOptions=c.getDLOptions({level:this.mapOptionsToLevel[t.level],optionsPoint:t.options})),t.plotX=1,t.plotY=1,t.tooltipPos=o.inverted?[(o.plotSizeY||0)-r-n/2,(o.plotSizeX||0)-s-a/2]:[s+a/2,r+n/2],t.shapeType="path",t.shapeArgs={d:d[l||"circle"](s,r-(p||n)/2,p||a,p||n),width:p||a,height:p||n},t.dlBox={x:s+a/2,y:r,height:0,width:0}):t.dlOptions={enabled:!1}}drawDataLabels(){var t;this.options.dataLabels&&(t=this.options.dataLabels.textPath,r.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,r.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=t)}pointAttribs(t,e){if(t&&t.isNode){const t=s.prototype.pointAttribs.apply(this,arguments);return a(t,["opacity"])}return super.pointAttribs.apply(this,arguments)}markerAttribs(t){return t.isNode?super.markerAttribs.apply(this,arguments):{}}}return h.defaultOptions=m(c.defaultOptions,{centeredLinks:!1,offset:"100%",equalNodes:!1,reversed:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{symbol:"circle",fillOpacity:1,lineWidth:0,states:{}}}),l(h.prototype,{orderNodes:!1}),h.prototype.pointClass=t,o.registerSeriesType("arcdiagram",h),h}),e(t,"masters/modules/arc-diagram.src.js",[],function(){})});
!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/modules/arc-diagram",["highcharts","highcharts/modules/sankey"],function(e){return t(e),t.Highcharts=e,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(e){"use strict";e=e?e._modules:{};function t(e,t,i,s){e.hasOwnProperty(t)||(e[t]=s.apply(null,i),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}t(e,"Series/ArcDiagram/ArcDiagramPoint.js",[e["Series/NodesComposition.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,t,i){let{sankey:{prototype:{pointClass:s}}}=t["seriesTypes"],o=i["extend"];class a extends s{isValid(){return!0}}return o(a.prototype,{setState:e.setNodeState}),a}),t(e,"Series/ArcDiagram/ArcDiagramSeriesDefaults.js",[],function(){return{centeredLinks:!1,equalNodes:!1,dataLabels:{linkTextPath:{attributes:{startOffset:"25%"}}},marker:{fillOpacity:1,lineWidth:0,states:{},symbol:"circle"},offset:"100%",reversed:!1}}),t(e,"Series/ArcDiagram/ArcDiagramSeries.js",[e["Series/ArcDiagram/ArcDiagramPoint.js"],e["Series/ArcDiagram/ArcDiagramSeriesDefaults.js"],e["Series/Sankey/SankeyColumnComposition.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Renderer/SVG/SVGRenderer.js"],e["Core/Utilities.js"]],function(e,t,i,s,o,a,n){let{symbols:p}=a["prototype"],{column:r,sankey:m}=o["seriesTypes"],{crisp:u,extend:l,merge:c,pick:g,relativeLength:f}=n;class h extends m{createNodeColumns(){let d=this,m=d.chart,u=i.compose([],d);return u.sankeyColumn.maxLength=m.inverted?m.plotHeight:m.plotWidth,u.sankeyColumn.getTranslationFactor=e=>{let t=u.slice(),i=this.options.minLinkWidth||0,s,o=0,a,n,r=0,l=1,h=0,d=(m.plotSizeX||0)-(e.options.marker&&e.options.marker.lineWidth||0)-(u.length-1)*e.nodePadding;for(;u.length;){for(o=d/u.sankeyColumn.sum(),s=!1,a=u.length;a--;){n=u[a].getSum()*o*l;var p=Math.min(m.plotHeight,m.plotWidth);n>p?l=Math.min(p/n,l):n<i&&(u.splice(a,1),d-=i,n=i,s=!0),h+=n*(1-l)/2,r=Math.max(r,n)}if(!s)break}return u.length=0,t.forEach(e=>{e.scale=l,u.push(e)}),u.sankeyColumn.maxRadius=r,u.sankeyColumn.scale=l,u.sankeyColumn.additionalSpace=h,o},u.sankeyColumn.offset=function(t,i){let s=t.series.options.equalNodes,o=d.nodePadding,a=Math.min(m.plotWidth,m.plotHeight,(u.sankeyColumn.maxLength||0)/d.nodes.length-o),n=u.sankeyColumn.additionalSpace||0,r;for(let e=0;e<u.length;e++){var l=u[e].getSum()*(u.sankeyColumn.scale||0),h=s?a:Math.max(l*i,d.options.minLinkWidth||0);if(r=l?h+o:0,u[e]===t)return{relativeLeft:n+f(t.options.offset||0,r)};n+=r}},d.nodes.forEach(function(e){e.column=0,u.push(e)}),[u]}translateLink(i){let e=i.fromNode,t=i.toNode,s=this.chart,o=this.translationFactor,a=i.options,n=this.options,r=g(a.linkWeight,n.linkWeight,Math.max((i.weight||0)*o*e.scale,this.options.minLinkWidth||0)),l=i.series.options.centeredLinks,h=e.nodeY,d=(e,t)=>{t=(e.offset(i,t)||0)*o;return Math.min(e.nodeX+t,e.nodeX+(e.shapeArgs&&e.shapeArgs.height||0)-r)},p=l?e.nodeX+((e.shapeArgs.height||0)-r)/2:d(e,"linksFrom"),m=l?t.nodeX+((t.shapeArgs.height||0)-r)/2:d(t,"linksTo"),u=h;p>m&&([p,m]=[m,p]),n.reversed&&([p,m]=[m,p],u=(s.plotSizeY||0)-u),i.shapeType="path",i.linkBase=[p,p+r,m,m+r];var c=(m+r-p)/Math.abs(m+r-p)*g(n.linkRadius,Math.min(Math.abs(m+r-p)/2,e.nodeY-Math.abs(r)));i.shapeArgs={d:[["M",p,u],["A",(m+r-p)/2,c,0,0,1,m+r,u],["L",m,u],["A",(m-p-r)/2,c-r,0,0,0,p+r,u],["Z"]]},i.dlBox={x:p+(m-p)/2,y:u-c,height:r,width:0},i.tooltipPos=s.inverted?[(s.plotSizeY||0)-i.dlBox.y-r/2,(s.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y+r/2],i.y=i.plotY=1,i.x=i.plotX=1,i.color||(i.color=e.color)}translateNode(s,e){var o=this.translationFactor,a=this.chart,n=a.inverted?a.plotWidth:a.plotHeight,r=this.options,n=Math.min(a.plotWidth,a.plotHeight,n/s.series.nodes.length-this.nodePadding),t=s.getSum()*(e.sankeyColumn.scale||0),n=r.equalNodes?n:Math.max(t*o,this.options.minLinkWidth||0),i=r.marker?.lineWidth||0,l=e.sankeyColumn.offset(s,o),o=u(g(l&&l.absoluteLeft,(e.sankeyColumn.left(o)||0)+(l&&l.relativeLeft||0)),i),l=c(r.marker,s.options.marker),h=l.symbol,d=l.radius,l=parseInt(r.offset,10)*((a.inverted?a.plotWidth:a.plotHeight)-(u(this.colDistance*(s.column||0)+(l.lineWidth||0)/2,i)+(e.sankeyColumn.scale||0)*(e.sankeyColumn.maxRadius||0)/2))/100;if(s.sum=t){s.nodeX=o,s.nodeY=l;let e=s.options.width||r.width||n,t=s.options.height||r.height||n,i=l;r.reversed&&(i=(a.plotSizeY||0)-l,a.inverted&&(i=(a.plotSizeY||0)-l)),this.mapOptionsToLevel&&(s.dlOptions=m.getDLOptions({level:this.mapOptionsToLevel[s.level],optionsPoint:s.options})),s.plotX=1,s.plotY=1,s.tooltipPos=a.inverted?[(a.plotSizeY||0)-i-t/2,(a.plotSizeX||0)-o-e/2]:[o+e/2,i+t/2],s.shapeType="path",s.shapeArgs={d:p[h||"circle"](o,i-(d||t)/2,d||e,d||t),width:d||e,height:d||t},s.dlBox={x:o+e/2,y:i,height:0,width:0}}else s.dlOptions={enabled:!1}}drawDataLabels(){var e;this.options.dataLabels&&(e=this.options.dataLabels.textPath,r.prototype.drawDataLabels.call(this,this.nodes),this.options.dataLabels.textPath=this.options.dataLabels.linkTextPath,r.prototype.drawDataLabels.call(this,this.data),this.options.dataLabels.textPath=e)}pointAttribs(e,t){if(e&&e.isNode){let{...e}=s.prototype.pointAttribs.apply(this,arguments);return e}return super.pointAttribs.apply(this,arguments)}markerAttribs(e){return e.isNode?super.markerAttribs.apply(this,arguments):{}}}return h.defaultOptions=c(m.defaultOptions,t),l(h.prototype,{orderNodes:!1}),h.prototype.pointClass=e,o.registerSeriesType("arcdiagram",h),h}),t(e,"masters/modules/arc-diagram.src.js",[e["Core/Globals.js"]],function(e){return e})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontWeight:"bold"},boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,o,r,i,a){return 0<(t=(a-e)*(o-t)-(r-e)*(i-t))||!(t<0)}function l(t,e,o,r,i,a,n,s){return h(t,e,i,a,n,s)!==h(o,r,i,a,n,s)&&h(t,e,o,r,i,a)!==h(t,e,o,r,n,s)}return{boxIntersectLine:function(t,e,o,r,i,a,n,s){return l(t,e,t+o,e,i,a,n,s)||l(t+o,e,t+o,e+r,i,a,n,s)||l(t,e+r,t+o,e+r,i,a,n,s)||l(t,e,t,e+r,i,a,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/DefaultOptions.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,o,e,r,i,a,s){function Y(t,e,o,r,i){for(var a,n,s=t.chart,h=M(t.options.label.onArea,!!t.area),l=h||t.options.label.connectorAllowed,c=Number.MAX_VALUE,p=Number.MAX_VALUE,d=0;d<s.boxesToAvoid.length;d+=1)if(y(s.boxesToAvoid[d],{left:e,right:e+r.width,top:o,bottom:o+r.height}))return!1;for(d=0;d<s.series.length;d+=1){var u,f,x,b=s.series[d],m=b.interpolatedPoints;if(b.visible&&m){for(n=1;n<m.length;n+=1){if(m[n].chartX>=e-16&&m[n-1].chartX<=e+r.width+16){if(g(e,o,r.width,r.height,m[n-1].chartX,m[n-1].chartY,m[n].chartX,m[n].chartY))return!1;t===b&&!a&&i&&(a=g(e-16,o-16,r.width+32,r.height+32,m[n-1].chartX,m[n-1].chartY,m[n].chartX,m[n].chartY))}!l&&!a||t===b&&!h||(u=e+r.width/2-m[n].chartX,f=o+r.height/2-m[n].chartY,c=Math.min(c,u*u+f*f))}if(!h&&l&&t===b&&(i&&!a||c<Math.pow(t.options.label.connectorNeighbourDistance,2))){for(n=1;n<m.length;n+=1)(b=Math.min(Math.pow(e+r.width/2-m[n].chartX,2)+Math.pow(o+r.height/2-m[n].chartY,2),Math.pow(e-m[n].chartX,2)+Math.pow(o-m[n].chartY,2),Math.pow(e+r.width-m[n].chartX,2)+Math.pow(o-m[n].chartY,2),Math.pow(e+r.width-m[n].chartX,2)+Math.pow(o+r.height-m[n].chartY,2),Math.pow(e-m[n].chartX,2)+Math.pow(o+r.height-m[n].chartY,2)))<p&&(p=b,x=m[n]);a=!0}}}return!(i&&!a)&&{x:e,y:o,weight:c-(x?p:0),connectorPoint:x}}function h(y){var t=y.labelSeries;y.boxesToAvoid=[],t.forEach(function(t){t.interpolatedPoints=function(t){function e(t){var e=Math.round(t.plotX/8)+","+Math.round(t.plotY/8);p[e]||(p[e]=1,i.push(t))}if(t.xAxis||t.yAxis){var o,r=t.points,i=[],a=t.graph||t.area,n=a.element,s=t.chart.inverted,h=t.xAxis,l=t.yAxis,c=(s?l:h).pos,p=(s=(s?h:l).pos,h=M(t.options.label.onArea,!!t.area),l=l.getThreshold(t.options.threshold),{});if(t.getPointSpline&&n.getPointAtLength&&!h&&r.length<t.chart.plotSizeX/16){a.toD&&(d=a.attr("d"),a.attr({d:a.toD}));var d,u=n.getTotalLength();for(o=0;o<u;o+=16)t=n.getPointAtLength(o),e({chartX:c+t.x,chartY:s+t.y,plotX:t.x,plotY:t.y});d&&a.attr({d:d}),(t=r[r.length-1]).chartX=c+t.plotX,t.chartY=s+t.plotY,e(t)}else for(u=r.length,o=0;o<u;o+=1){if(t=r[o],a=r[o-1],t.chartX=c+t.plotX,t.chartY=s+t.plotY,h&&(t.chartCenterY=s+(t.plotY+M(t.yBottom,l))/2),0<o&&(n=Math.abs(t.chartX-a.chartX),d=Math.abs(t.chartY-a.chartY),16<(n=Math.max(n,d))))for(n=Math.ceil(n/16),d=1;d<n;d+=1)e({chartX:a.chartX+d/n*(t.chartX-a.chartX),chartY:a.chartY+d/n*(t.chartY-a.chartY),chartCenterY:a.chartCenterY+d/n*(t.chartCenterY-a.chartCenterY),plotX:a.plotX+d/n*(t.plotX-a.plotX),plotY:a.plotY+d/n*(t.plotY-a.plotY)});f(t.plotY)&&e(t)}return i}}(t),(t.options.label.boxesToAvoid||[]).forEach(function(t){y.boxesToAvoid.push(t)})}),y.series.forEach(function(t){function e(t,e,o){var r=Math.max(p,M(a,-1/0)),i=Math.min(p+u,M(n,1/0));return r<t&&t<=i-o.width&&d<=e&&e<=d+f-o.height}var o=t.options.label;if(o&&(t.xAxis||t.yAxis)){var r,a,n,i="highcharts-color-"+M(t.colorIndex,"none"),s=!t.labelBySeries,h=o.minFontSize,l=o.maxFontSize,c=y.inverted,p=(c?t.yAxis:t.xAxis).pos,d=(c?t.xAxis:t.yAxis).pos,u=(y.inverted?t.yAxis:t.xAxis).len,f=(y.inverted?t.xAxis:t.yAxis).len,x=t.interpolatedPoints,b=M(o.onArea,!!t.area),m=[],g=t.labelBySeries;if(b&&!c&&(c=[t.xAxis.toPixels(t.xData[0]),t.xAxis.toPixels(t.xData[t.xData.length-1])],a=Math.min.apply(Math,c),n=Math.max.apply(Math,c)),t.visible&&!t.boosted&&x){for(g||(g=t.name,"string"==typeof o.format?g=w(o.format,t,y):o.formatter&&(g=o.formatter.call(t)),t.labelBySeries=g=y.renderer.label(g,0,0,"connector").addClass("highcharts-series-label highcharts-series-label-"+t.index+" "+(t.options.className||"")+" "+i),y.renderer.styledMode||(g.css(S({color:b?y.renderer.getContrast(t.color):t.color},o.style||{})),g.attr({opacity:y.renderer.forExport?1:0,stroke:t.color,"stroke-width":1})),h&&l&&g.css({fontSize:h+t.sum/t.chart.labelSeriesMaxSum*(l-h)+"px"}),g.attr({padding:0,zIndex:3}).add()),(i=g.getBBox()).width=Math.round(i.width),c=x.length-1;0<c;--c)b?e(h=x[c].chartX-i.width/2,l=x[c].chartCenterY-i.height/2,i)&&(r=Y(t,h,l,i)):((r=e(h=x[c].chartX+3,l=x[c].chartY-i.height-3,i)?Y(t,h,l,i,!0):r)&&m.push(r),(r=e(h=x[c].chartX+3,l=x[c].chartY+3,i)?Y(t,h,l,i,!0):r)&&m.push(r),(r=e(h=x[c].chartX-i.width-3,l=x[c].chartY+3,i)?Y(t,h,l,i,!0):r)&&m.push(r),e(h=x[c].chartX-i.width-3,l=x[c].chartY-i.height-3,i)&&(r=Y(t,h,l,i,!0))),r&&m.push(r);if(o.connectorAllowed&&!m.length&&!b)for(h=p+u-i.width;p<=h;h-=16)for(l=d;l<d+f-i.height;l+=16)(r=Y(t,h,l,i,!0))&&m.push(r);m.length?(m.sort(function(t,e){return e.weight-t.weight}),r=m[0],y.boxesToAvoid.push({left:r.x,right:r.x+i.width,top:r.y,bottom:r.y+i.height}),(x=Math.sqrt(Math.pow(Math.abs(r.x-(g.x||0)),2)+Math.pow(Math.abs(r.y-(g.y||0)),2)))&&t.labelBySeries&&(m={opacity:y.renderer.forExport?1:0,x:r.x,y:r.y},o={opacity:1},x<=10&&(o={x:m.x,y:m.y},m={}),x=void 0,s&&((x=X(t.options.animation)).duration*=.2),t.labelBySeries.attr(S(m,{anchorX:r.connectorPoint&&r.connectorPoint.plotX+p,anchorY:r.connectorPoint&&r.connectorPoint.plotY+d})).animate(o,x),t.options.kdNow=!0,t.buildKDTree(),t=t.searchPoint({chartX:r.x,chartY:r.y},!0))&&(g.closest=[t,r.x-(t.plotX||0),r.y-(t.plotY||0)])):g&&(t.labelBySeries=g.destroy())}else g&&(t.labelBySeries=g.destroy())}}),d(y,"afterDrawSeriesLabels")}function n(i){var a,n;this.renderer&&(n=X((a=this).renderer.globalAnimation).duration,a.labelSeries=[],a.labelSeriesMaxSum=0,s.clearTimeout(a.seriesLabelTimer),a.series.forEach(function(t){var e=t.options.label,o=t.labelBySeries,r=o&&o.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&(a.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&(t.sum=t.yData.reduce(function(t,e){return(t||0)+(e||0)},0),a.labelSeriesMaxSum=Math.max(a.labelSeriesMaxSum,t.sum)),"load"===i.type&&(n=Math.max(n,X(t.options.animation).duration)),r&&(void 0!==r[0].plotX?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),a.seriesLabelTimer=u(function(){a.series&&a.labelSeries&&h(a)},a.renderer.forExport||!n?0:n))}function l(t,e,o,r,i){var a,n,s=i&&i.anchorX,h=(i=i&&i.anchorY,o/2);return f(s)&&f(i)&&(a=[["M",s,i]],(n=(n=e-i)<0?-r-n:n)<o&&(h=s<t+o/2?n:o-n),e+r<i?a.push(["L",t+h,e+r]):i<e?a.push(["L",t+h,e]):s<t?a.push(["L",t,e+r/2]):t+o<s&&a.push(["L",t+o,e+r/2])),a||[]}var X=t.animObject,w=e.format,c=r.setOptions,g=a.boxIntersectLine,y=a.intersectRect,p=s.addEvent,S=s.extend,d=s.fireEvent,f=s.isNumber,M=s.pick,u=s.syncTimeout,x=[];return{compose:function(t,e){-1===x.indexOf(t)&&(x.push(t),p(o,"load",n),p(o,"redraw",n)),-1===x.indexOf(e)&&(x.push(e),e.prototype.symbols.connector=l),-1===x.indexOf(c)&&(x.push(c),c({plotOptions:{series:{label:i}}}))}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});
!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){"use strict";t=t?t._modules:{};function e(t,e,o,r){t.hasOwnProperty(e)||(t[e]=r.apply(null,o),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,o,r,i,a){a=(a-e)*(o-t)-(r-e)*(i-t);return 0<a||!(a<0)}function l(t,e,o,r,i,a,n,s){return h(t,e,i,a,n,s)!==h(o,r,i,a,n,s)&&h(t,e,o,r,i,a)!==h(t,e,o,r,n,s)}return{boxIntersectLine:function(t,e,o,r,i,a,n,s){return l(t,e,t+o,e,i,a,n,s)||l(t+o,e,t+o,e+r,i,a,n,s)||l(t,e+r,t+o,e+r,i,a,n,s)||l(t,e,t,e+r,i,a,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/Templating.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,o,e,r,i,a,s){let T=t["animObject"],C=e["format"],n=r["setOptions"],{boxIntersectLine:X,intersectRect:w}=a,{addEvent:h,extend:P,fireEvent:l,isNumber:A,pick:j,syncTimeout:c}=s,p=[];function D(o,r,i,a,n){let s=o.chart,h=o.options.label||{},l=j(h.onArea,!!o.area),c=l||h.connectorAllowed,t=s.boxesToAvoid,p=Number.MAX_VALUE,d=Number.MAX_VALUE,u,f,x,b,m,g,y;for(g=0;t&&g<t.length;g+=1)if(w(t[g],{left:r,right:r+a.width,top:i,bottom:i+a.height}))return!1;for(g=0;g<s.series.length;g+=1){let t=s.series[g],e=t.interpolatedPoints&&[...t.interpolatedPoints];if(t.visible&&e){var Y=s.plotHeight/10;for(let t=s.plotTop;t<=s.plotTop+s.plotHeight;t+=Y)e.unshift({chartX:s.plotLeft,chartY:t}),e.push({chartX:s.plotLeft+s.plotWidth,chartY:t});for(y=1;y<e.length;y+=1){if(e[y].chartX>=r-16&&e[y-1].chartX<=r+a.width+16){if(X(r,i,a.width,a.height,e[y-1].chartX,e[y-1].chartY,e[y].chartX,e[y].chartY))return!1;o===t&&!x&&n&&(x=X(r-16,i-16,a.width+32,a.height+32,e[y-1].chartX,e[y-1].chartY,e[y].chartX,e[y].chartY))}!c&&!x||o===t&&!l||(p=Math.min(p,(b=r+a.width/2-e[y].chartX)*b+(m=i+a.height/2-e[y].chartY)*m))}if(!l&&c&&o===t&&(n&&!x||p<Math.pow(h.connectorNeighbourDistance||1,2))){for(y=1;y<e.length;y+=1)(u=Math.min(Math.pow(r+a.width/2-e[y].chartX,2)+Math.pow(i+a.height/2-e[y].chartY,2),Math.pow(r-e[y].chartX,2)+Math.pow(i-e[y].chartY,2),Math.pow(r+a.width-e[y].chartX,2)+Math.pow(i-e[y].chartY,2),Math.pow(r+a.width-e[y].chartX,2)+Math.pow(i+a.height-e[y].chartY,2),Math.pow(r-e[y].chartX,2)+Math.pow(i+a.height-e[y].chartY,2)))<d&&(d=u,f=e[y]);x=!0}}}return(!n||!!x)&&{x:r,y:i,weight:p-(f?d:0),connectorPoint:f}}function d(n){if(this.renderer){let i=this,a=T(i.renderer.globalAnimation).duration;i.labelSeries=[],i.labelSeriesMaxSum=0,i.seriesLabelTimer&&s.clearTimeout(i.seriesLabelTimer),i.series.forEach(function(t){let e=t.options.label||{},o=t.labelBySeries,r=o&&o.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&i.labelSeries&&(i.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce((t,e)=>(t||0)+(e||0),0),i.labelSeriesMaxSum=Math.max(i.labelSeriesMaxSum||0,t.sum||0)),"load"===n.type&&(a=Math.max(a,T(t.options.animation).duration)),r&&(void 0!==r[0].plotX?o.animate({x:r[0].plotX+r[1],y:r[0].plotY+r[2]}):o.attr({opacity:0})))}),i.seriesLabelTimer=c(function(){if(i.series&&i.labelSeries){var E=i;E.boxesToAvoid=[];let t=E.labelSeries||[],a=E.boxesToAvoid;E.series.forEach(i=>(i.points||[]).forEach(t=>(t.dataLabels||[]).forEach(t=>{var{width:e,height:o}=t.getBBox(),r=(t.translateX||0)+(i.xAxis?i.xAxis.pos:i.chart.plotLeft),t=(t.translateY||0)+(i.yAxis?i.yAxis.pos:i.chart.plotTop);a.push({left:r,top:t,right:r+e,bottom:t+o})}))),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(u){let f,x,b,m,g;if(u.xAxis||u.yAxis){let t=u.points,o=[],e=u.graph||u.area,r=e&&e.element,i=u.chart.inverted,a=u.xAxis,n=u.yAxis,s=(i?n:a).pos,h=(i?a:n).pos,l=u.options.label||{},c=j(l.onArea,!!u.area),p=n.getThreshold(u.options.threshold),d={};if(u.getPointSpline&&r&&r.getPointAtLength&&!c&&t.length<(u.chart.plotSizeX||0)/16){u=e.toD&&e.attr("d");for(e.toD&&e.attr({d:e.toD}),b=r.getTotalLength(),f=0;f<b;f+=16){var y=r.getPointAtLength(f);S({chartX:s+y.x,chartY:h+y.y,plotX:y.x,plotY:y.y})}u&&e.attr({d:u});u=t[t.length-1];S({chartX:s+(u.plotX||0),chartY:h+(u.plotY||0)})}else{let e;for(f=0,b=t.length;f<b;f+=1){var Y=t[f],{plotX:X,plotY:w,plotHigh:M}=Y;if(A(X)&&A(w)){let t={plotX:X,plotY:w,chartX:s+X,chartY:h+w};if(c&&(M&&(t.plotY=M,t.chartY=h+M),t.chartCenterY=h+((M||w)+j(Y.yBottom,p))/2),e&&16<(x=Math.max(Math.abs(t.chartX-e.chartX),Math.abs(t.chartY-e.chartY))))for(g=1,m=Math.ceil(x/16);g<m;g+=1)S({chartX:e.chartX+(t.chartX-e.chartX)*(g/m),chartY:e.chartY+(t.chartY-e.chartY)*(g/m),chartCenterY:(e.chartCenterY||0)+((t.chartCenterY||0)-(e.chartCenterY||0))*(g/m),plotX:(e.plotX||0)+(X-(e.plotX||0))*(g/m),plotY:(e.plotY||0)+(w-(e.plotY||0))*(g/m)});S(t),e=t}}}return o;function S(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);d[e]||(d[e]=1,o.push(t))}}}(t),a.push(...e.boxesToAvoid||[])}),E.series.forEach(function(M){let S=M.options.label;if(S&&(M.xAxis||M.yAxis)){let e="highcharts-color-"+j(M.colorIndex,"none"),r=!M.labelBySeries,o=S.minFontSize,i=S.maxFontSize,t=E.inverted,a=(t?M.yAxis:M.xAxis).pos,n=(t?M.xAxis:M.yAxis).pos,s=(E.inverted?M.yAxis:M.xAxis).len,h=(E.inverted?M.xAxis:M.yAxis).len,l=M.interpolatedPoints,c=j(S.onArea,!!M.area),p=[],d=M.xData||[],u,f,x,b,m,g,y=M.labelBySeries,Y,X,w;if(c&&!t&&(Y=[M.xAxis.toPixels(d[0]),M.xAxis.toPixels(d[d.length-1])],X=Math.min.apply(Math,Y),w=Math.max.apply(Math,Y)),M.visible&&!M.boosted&&l){if(!y){let t=M.name;"string"==typeof S.format?t=C(S.format,M,E):S.formatter&&(t=S.formatter.call(M)),M.labelBySeries=y=E.renderer.label(t,0,0,"connector",0,0,S.useHTML).addClass("highcharts-series-label highcharts-series-label-"+M.index+" "+(M.options.className||"")+" "+e),E.renderer.styledMode||(A="string"==typeof M.color?M.color:"#666666",y.css(P({color:c?E.renderer.getContrast(A):A},S.style||{})),y.attr({opacity:E.renderer.forExport?1:0,stroke:M.color,"stroke-width":1})),o&&i&&y.css({fontSize:o+(M.sum||0)/(M.chart.labelSeriesMaxSum||0)*(i-o)+"px"}),y.attr({padding:0,zIndex:3}).add()}for((u=y.getBBox()).width=Math.round(u.width),m=l.length-1;0<m;--m)c?L(f=l[m].chartX-u.width/2,x=(l[m].chartCenterY||0)-u.height/2,u)&&(g=D(M,f,x,u)):((g=L(f=l[m].chartX+3,x=l[m].chartY-u.height-3,u)?D(M,f,x,u,!0):g)&&p.push(g),(g=L(f=l[m].chartX+3,x=l[m].chartY+3,u)?D(M,f,x,u,!0):g)&&p.push(g),(g=L(f=l[m].chartX-u.width-3,x=l[m].chartY+3,u)?D(M,f,x,u,!0):g)&&p.push(g),L(f=l[m].chartX-u.width-3,x=l[m].chartY-u.height-3,u)&&(g=D(M,f,x,u,!0))),g&&p.push(g);if(S.connectorAllowed&&!p.length&&!c)for(f=a+s-u.width;f>=a;f-=16)for(x=n;x<n+h-u.height;x+=16)(b=D(M,f,x,u,!0))&&p.push(b);if(p.length){p.sort((t,e)=>e.weight-t.weight),g=p[0],(E.boxesToAvoid||[]).push({left:g.x,right:g.x+u.width,top:g.y,bottom:g.y+u.height});var A=Math.sqrt(Math.pow(Math.abs(g.x-(y.x||0)),2)+Math.pow(Math.abs(g.y-(y.y||0)),2));if(A&&M.labelBySeries){let t,e={opacity:E.renderer.forExport?1:0,x:g.x,y:g.y},o={opacity:1};A<=10&&(o={x:e.x,y:e.y},e={}),r&&((t=T(M.options.animation)).duration*=.2),M.labelBySeries.attr(P(e,{anchorX:g.connectorPoint&&(g.connectorPoint.plotX||0)+a,anchorY:g.connectorPoint&&(g.connectorPoint.plotY||0)+n})).animate(o,t),M.options.kdNow=!0,M.buildKDTree();A=M.searchPoint({chartX:g.x,chartY:g.y},!0);A&&(y.closest=[A,g.x-(A.plotX||0),g.y-(A.plotY||0)])}}else v()}else v();function L(t,e,o){var r=Math.max(a,j(X,-1/0)),i=Math.min(a+s,j(w,1/0));return r<t&&t<=i-o.width&&e>=n&&e<=n+h-o.height}function v(){y&&(M.labelBySeries=y.destroy())}}}),l(E,"afterDrawSeriesLabels")}},i.renderer.forExport||!a?0:a)}}function u(t,e,o,r,i){let a=i&&i.anchorX,n=i&&i.anchorY,s,h,l=o/2;return A(a)&&A(n)&&(s=[["M",a,n]],(h=(h=e-n)<0?-r-h:h)<o&&(l=a<t+o/2?h:o-h),e+r<n?s.push(["L",t+l,e+r]):n<e?s.push(["L",t+l,e]):a<t?s.push(["L",t,e+r/2]):t+o<a&&s.push(["L",t+o,e+r/2])),s||[]}return{compose:function(t,e){s.pushUnique(p,t)&&(h(o,"load",d),h(o,"redraw",d)),s.pushUnique(p,e)&&(e.prototype.symbols.connector=u),s.pushUnique(p,n)&&n({plotOptions:{series:{label:i}}})}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});
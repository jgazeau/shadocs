!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,r,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,r),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:e,module:t[e]}})))}e(t=t?t._modules:{},"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}}),e(t,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function h(t,e,r,o,a,i){return 0<(t=(i-e)*(r-t)-(o-e)*(a-t))||!(t<0)}function l(t,e,r,o,a,i,n,s){return h(t,e,a,i,n,s)!==h(r,o,a,i,n,s)&&h(t,e,r,o,a,i)!==h(t,e,r,o,n,s)}return{boxIntersectLine:function(t,e,r,o,a,i,n,s){return l(t,e,t+r,e,a,i,n,s)||l(t+r,e,t+r,e+o,a,i,n,s)||l(t,e+o,t+r,e+o,a,i,n,s)||l(t,e,t,e+o,a,i,n,s)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}}}),e(t,"Extensions/SeriesLabel/SeriesLabel.js",[t["Core/Animation/AnimationUtilities.js"],t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Defaults.js"],t["Extensions/SeriesLabel/SeriesLabelDefaults.js"],t["Extensions/SeriesLabel/SeriesLabelUtilities.js"],t["Core/Utilities.js"]],function(t,r,e,o,a,i,s){function Y(t,e,r,o,a){for(var i=t.chart,n=t.options.label||{},s=S(n.onArea,!!t.area),h=s||n.connectorAllowed,l=i.boxesToAvoid,c=Number.MAX_VALUE,p=Number.MAX_VALUE,d=0;l&&d<l.length;d+=1)if(w(l[d],{left:e,right:e+o.width,top:r,bottom:r+o.height}))return!1;for(d=0;d<i.series.length;d+=1){var u=i.series[d],l=u.interpolatedPoints&&y([],u.interpolatedPoints,!0);if(u.visible&&l){var f,x,b,m,g=i.plotHeight/10;for(f=i.plotTop;f<=i.plotTop+i.plotHeight;f+=g)l.unshift({chartX:i.plotLeft,chartY:f}),l.push({chartX:i.plotLeft+i.plotWidth,chartY:f});for(g=1;g<l.length;g+=1){if(l[g].chartX>=e-16&&l[g-1].chartX<=e+o.width+16){if(X(e,r,o.width,o.height,l[g-1].chartX,l[g-1].chartY,l[g].chartX,l[g].chartY))return!1;t===u&&!m&&a&&(m=X(e-16,r-16,o.width+32,o.height+32,l[g-1].chartX,l[g-1].chartY,l[g].chartX,l[g].chartY))}!h&&!m||t===u&&!s||(f=e+o.width/2-l[g].chartX,x=r+o.height/2-l[g].chartY,c=Math.min(c,f*f+x*x))}if(!s&&h&&t===u&&(a&&!m||c<Math.pow(n.connectorNeighbourDistance||1,2))){for(g=1;g<l.length;g+=1)(m=Math.min(Math.pow(e+o.width/2-l[g].chartX,2)+Math.pow(r+o.height/2-l[g].chartY,2),Math.pow(e-l[g].chartX,2)+Math.pow(r-l[g].chartY,2),Math.pow(e+o.width-l[g].chartX,2)+Math.pow(r-l[g].chartY,2),Math.pow(e+o.width-l[g].chartX,2)+Math.pow(r+o.height-l[g].chartY,2),Math.pow(e-l[g].chartX,2)+Math.pow(r+o.height-l[g].chartY,2)))<p&&(p=m,b=l[g]);m=!0}}}return!(a&&!m)&&{x:e,y:r,weight:c-(b?p:0),connectorPoint:b}}function h(X){X.boxesToAvoid=[];var t=X.labelSeries||[],a=X.boxesToAvoid;X.series.forEach(function(o){return(o.points||[]).forEach(function(t){return(t.dataLabels||[]).forEach(function(t){var e=t.getBBox(),r=t.translateX+(o.xAxis?o.xAxis.pos:o.chart.plotLeft);t=t.translateY+(o.yAxis?o.yAxis.pos:o.chart.plotTop),a.push({left:r,top:t,right:r+e.width,bottom:t+e.height})})})}),t.forEach(function(t){var e=t.options.label||{};t.interpolatedPoints=function(t){function e(t){var e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);p[e]||(p[e]=1,o.push(t))}if(t.xAxis||t.yAxis){var r=t.points,o=[],a=t.graph||t.area,i=a&&a.element,n=t.chart.inverted,s=t.xAxis,h=t.yAxis,l=(n?h:s).pos,c=(n=(n?s:h).pos,s=S((t.options.label||{}).onArea,!!t.area),h.getThreshold(t.options.threshold)),p={};if(t.getPointSpline&&i&&i.getPointAtLength&&!s&&r.length<(t.chart.plotSizeX||0)/16){for(s=a.toD&&a.attr("d"),a.toD&&a.attr({d:a.toD}),h=i.getTotalLength(),t=0;t<h;t+=16)c=i.getPointAtLength(t),e({chartX:l+c.x,chartY:n+c.y,plotX:c.x,plotY:c.y});s&&a.attr({d:s});var d=r[r.length-1];e({chartX:l+(d.plotX||0),chartY:n+(d.plotY||0)})}else for(h=r.length,a=void 0,t=0;t<h;t+=1){d=r[t],i=d.plotX;var u=d.plotY;if(b(i)&&b(u)){var f={plotX:i,plotY:u,chartX:l+i,chartY:n+u};if(s&&(f.chartCenterY=n+(u+S(d.yBottom,c))/2),a){d=Math.abs(f.chartX-a.chartX);var x=Math.abs(f.chartY-a.chartY);if(16<(d=Math.max(d,x)))for(d=Math.ceil(d/16),x=1;x<d;x+=1)e({chartX:a.chartX+x/d*(f.chartX-a.chartX),chartY:a.chartY+x/d*(f.chartY-a.chartY),chartCenterY:(a.chartCenterY||0)+x/d*((f.chartCenterY||0)-(a.chartCenterY||0)),plotX:(a.plotX||0)+x/d*(i-(a.plotX||0)),plotY:(a.plotY||0)+x/d*(u-(a.plotY||0))})}e(f),a=f}}return o}}(t),a.push.apply(a,e.boxesToAvoid||[])}),X.series.forEach(function(t){function e(t,e,r){var o=Math.max(p,S(i,-1/0)),a=Math.min(p+u,S(n,1/0));return o<t&&t<=a-r.width&&d<=e&&e<=d+f-r.height}var r=t.options.label;if(r&&(t.xAxis||t.yAxis)){var o,i,n,a="highcharts-color-"+S(t.colorIndex,"none"),s=!t.labelBySeries,h=r.minFontSize,l=r.maxFontSize,c=X.inverted,p=(c?t.yAxis:t.xAxis).pos,d=(c?t.xAxis:t.yAxis).pos,u=(X.inverted?t.yAxis:t.xAxis).len,f=(X.inverted?t.xAxis:t.yAxis).len,x=t.interpolatedPoints,b=S(r.onArea,!!t.area),m=[],g=t.xData||[],y=t.labelBySeries;if(b&&!c&&(c=[t.xAxis.toPixels(g[0]),t.xAxis.toPixels(g[g.length-1])],i=Math.min.apply(Math,c),n=Math.max.apply(Math,c)),t.visible&&!t.boosted&&x){for(y||(y=t.name,"string"==typeof r.format?y=v(r.format,t,X):r.formatter&&(y=r.formatter.call(t)),t.labelBySeries=y=X.renderer.label(y,0,0,"connector",0,0,r.useHTML).addClass("highcharts-series-label highcharts-series-label-"+t.index+" "+(t.options.className||"")+" "+a),X.renderer.styledMode||(a="string"==typeof t.color?t.color:"#666666",y.css(M({color:b?X.renderer.getContrast(a):a},r.style||{})),y.attr({opacity:X.renderer.forExport?1:0,stroke:t.color,"stroke-width":1})),h&&l&&y.css({fontSize:h+(t.sum||0)/(t.chart.labelSeriesMaxSum||0)*(l-h)+"px"}),y.attr({padding:0,zIndex:3}).add()),(h=y.getBBox()).width=Math.round(h.width),c=x.length-1;0<c;--c)b?e(l=x[c].chartX-h.width/2,a=(x[c].chartCenterY||0)-h.height/2,h)&&(o=Y(t,l,a,h)):((o=e(l=x[c].chartX+3,a=x[c].chartY-h.height-3,h)?Y(t,l,a,h,!0):o)&&m.push(o),(o=e(l=x[c].chartX+3,a=x[c].chartY+3,h)?Y(t,l,a,h,!0):o)&&m.push(o),(o=e(l=x[c].chartX-h.width-3,a=x[c].chartY+3,h)?Y(t,l,a,h,!0):o)&&m.push(o),e(l=x[c].chartX-h.width-3,a=x[c].chartY-h.height-3,h)&&(o=Y(t,l,a,h,!0))),o&&m.push(o);if(r.connectorAllowed&&!m.length&&!b)for(l=p+u-h.width;p<=l;l-=16)for(a=d;a<d+f-h.height;a+=16)(o=Y(t,l,a,h,!0))&&m.push(o);m.length?(m.sort(function(t,e){return e.weight-t.weight}),o=m[0],(X.boxesToAvoid||[]).push({left:o.x,right:o.x+h.width,top:o.y,bottom:o.y+h.height}),(x=Math.sqrt(Math.pow(Math.abs(o.x-(y.x||0)),2)+Math.pow(Math.abs(o.y-(y.y||0)),2)))&&t.labelBySeries&&(m={opacity:X.renderer.forExport?1:0,x:o.x,y:o.y},r={opacity:1},x<=10&&(r={x:m.x,y:m.y},m={}),x=void 0,s&&((x=A(t.options.animation)).duration*=.2),t.labelBySeries.attr(M(m,{anchorX:o.connectorPoint&&(o.connectorPoint.plotX||0)+p,anchorY:o.connectorPoint&&(o.connectorPoint.plotY||0)+d})).animate(r,x),t.options.kdNow=!0,t.buildKDTree(),t=t.searchPoint({chartX:o.x,chartY:o.y},!0))&&(y.closest=[t,o.x-(t.plotX||0),o.y-(t.plotY||0)])):y&&(t.labelBySeries=y.destroy())}else y&&(t.labelBySeries=y.destroy())}}),d(X,"afterDrawSeriesLabels")}function n(a){var i,n;this.renderer&&(n=A((i=this).renderer.globalAnimation).duration,i.labelSeries=[],i.labelSeriesMaxSum=0,i.seriesLabelTimer&&s.clearTimeout(i.seriesLabelTimer),i.series.forEach(function(t){var e=t.options.label||{},r=t.labelBySeries,o=r&&r.closest;e.enabled&&t.visible&&(t.graph||t.area)&&!t.boosted&&i.labelSeries&&(i.labelSeries.push(t),e.minFontSize&&e.maxFontSize&&t.yData&&(t.sum=t.yData.reduce(function(t,e){return(t||0)+(e||0)},0),i.labelSeriesMaxSum=Math.max(i.labelSeriesMaxSum||0,t.sum||0)),"load"===a.type&&(n=Math.max(n,A(t.options.animation).duration)),o&&(void 0!==o[0].plotX?r.animate({x:o[0].plotX+o[1],y:o[0].plotY+o[2]}):r.attr({opacity:0})))}),i.seriesLabelTimer=u(function(){i.series&&i.labelSeries&&h(i)},i.renderer.forExport||!n?0:n))}function l(t,e,r,o,a){var i,n,s=a&&a.anchorX,h=(a=a&&a.anchorY,r/2);return b(s)&&b(a)&&(i=[["M",s,a]],(n=(n=e-a)<0?-o-n:n)<r&&(h=s<t+r/2?n:r-n),e+o<a?i.push(["L",t+h,e+o]):a<e?i.push(["L",t+h,e]):s<t?i.push(["L",t,e+o/2]):t+r<s&&i.push(["L",t+r,e+o/2])),i||[]}var y=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var o,a=0,i=e.length;a<i;a++)!o&&a in e||((o=o||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(o||Array.prototype.slice.call(e))},A=t.animObject,v=e.format,c=o.setOptions,X=i.boxIntersectLine,w=i.intersectRect,p=s.addEvent,M=s.extend,d=s.fireEvent,b=s.isNumber,S=s.pick,u=s.syncTimeout,f=[];return{compose:function(t,e){-1===f.indexOf(t)&&(f.push(t),p(r,"load",n),p(r,"redraw",n)),-1===f.indexOf(e)&&(f.push(e),e.prototype.symbols.connector=l),-1===f.indexOf(c)&&(f.push(c),c({plotOptions:{series:{label:a}}}))}}}),e(t,"masters/modules/series-label.src.js",[t["Core/Globals.js"],t["Extensions/SeriesLabel/SeriesLabel.js"]],function(t,e){e.compose(t.Chart,t.SVGRenderer)})});
!function(o){"object"==typeof module&&module.exports?module.exports=o.default=o:"function"==typeof define&&define.amd?define("highcharts/indicators/pivot-points",["highcharts","highcharts/modules/stock"],function(t){return o(t),o.Highcharts=t,o}):o("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function o(t,o,e,n){t.hasOwnProperty(o)||(t[o]=n.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:o,module:t[o]}})))}o(t=t?t._modules:{},"Stock/Indicators/PivotPoints/PivotPointsPoint.js",[t["Core/Series/SeriesRegistry.js"]],function(i){function t(t,o){var e=t.series.pointArrayMap,n=e.length;for(i.seriesTypes.sma.prototype.pointClass.prototype[o].call(t);n--;)t[o="dataLabel"+e[n]]&&t[o].element&&t[o].destroy(),t[o]=null}var n,o,e=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});return o=i.seriesTypes.sma.prototype.pointClass,e(a,o),a.prototype.destroyElements=function(){t(this,"destroyElements")},a.prototype.destroy=function(){t(this,"destroyElements")},a;function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.P=void 0,t.pivotLine=void 0,t.series=void 0,t}}),o(t,"Stock/Indicators/PivotPoints/PivotPointsIndicator.js",[t["Stock/Indicators/PivotPoints/PivotPointsPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,c,o){var n,e,i=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=c.seriesTypes.sma,r=o.merge,s=o.extend,u=o.defined,f=o.isArray;function p(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.endPoint=void 0,t.plotEndPoint=void 0,t}return i(p,e=a),p.prototype.toYData=function(t){return[t.P]},p.prototype.translate=function(){var e=this;c.seriesTypes.sma.prototype.translate.apply(e),e.points.forEach(function(o){e.pointArrayMap.forEach(function(t){u(o[t])&&(o["plot"+t]=e.yAxis.toPixels(o[t],!0))})}),e.plotEndPoint=e.xAxis.toPixels(e.endPoint,!0)},p.prototype.getGraphPath=function(t){for(var o,e,n,i=this,a=t.length,r=[[],[],[],[],[],[],[],[],[]],s=[],p=i.plotEndPoint,l=i.pointArrayMap.length;a--;){for(e=t[a],n=0;n<l;n++)o=i.pointArrayMap[n],u(e[o])&&r[n].push({plotX:e.plotX,plotY:e["plot"+o],isNull:!1},{plotX:p,plotY:e["plot"+o],isNull:!1},{plotX:p,plotY:null,isNull:!0});p=e.plotX}return r.forEach(function(t){s=s.concat(c.seriesTypes.sma.prototype.getGraphPath.call(i,t))}),s},p.prototype.drawDataLabels=function(){var e,n,i,a,r=this,s=r.pointArrayMap;r.options.dataLabels.enabled&&(a=r.points.length,s.concat([!1]).forEach(function(t,o){for(i=a;i--;)n=r.points[i],t?(n.y=n[t],n.pivotLine=t,n.plotY=n["plot"+t],e=n["dataLabel"+t],o&&(n["dataLabel"+s[o-1]]=n.dataLabel),n.dataLabels||(n.dataLabels=[]),n.dataLabels[0]=n.dataLabel=e=e&&e.element?e:null):n["dataLabel"+s[o-1]]=n.dataLabel;c.seriesTypes.sma.prototype.drawDataLabels.call(r)}))},p.prototype.getValues=function(t,o){var e,n=o.period,i=t.xData,a=(t=t.yData)?t.length:0,r=(o=this[o.algorithm+"Placement"],[]),s=[],p=[];if(!(i.length<n)&&f(t[0])&&4===t[0].length){for(e=n+1;e<=a+n;e+=n){var l=i.slice(e-n-1,e),c=t.slice(e-n-1,e),u=l.length,d=l[u-1];c=o(this.getPivotAndHLC(c)),c=r.push([d].concat(c)),s.push(d),p.push(r[c-1].slice(1))}return this.endPoint=l[0]+(d-l[0])/u*n,{values:r,xData:s,yData:p}}},p.prototype.getPivotAndHLC=function(t){var o=-1/0,e=1/0,n=t[t.length-1][3];return t.forEach(function(t){o=Math.max(o,t[1]),e=Math.min(e,t[2])}),[(o+e+n)/3,o,e,n]},p.prototype.standardPlacement=function(t){var o=t[1]-t[2];return[null,null,t[0]+o,2*t[0]-t[2],t[0],2*t[0]-t[1],t[0]-o,null,null]},p.prototype.camarillaPlacement=function(t){var o=t[1]-t[2];return[t[3]+1.5*o,t[3]+1.25*o,t[3]+1.1666*o,t[3]+1.0833*o,t[0],t[3]-1.0833*o,t[3]-1.1666*o,t[3]-1.25*o,t[3]-1.5*o]},p.prototype.fibonacciPlacement=function(t){var o=t[1]-t[2];return[null,t[0]+o,t[0]+.618*o,t[0]+.382*o,t[0],t[0]-.382*o,t[0]-.618*o,t[0]-o,null]},p.defaultOptions=r(a.defaultOptions,{params:{index:void 0,period:28,algorithm:"standard"},marker:{enabled:!1},enableMouseTracking:!1,dataLabels:{enabled:!0,format:"{point.pivotLine}"},dataGrouping:{approximation:"averages"}}),s((o=p).prototype,{nameBase:"Pivot Points",pointArrayMap:"R4 R3 R2 R1 P S1 S2 S3 S4".split(" "),pointValKey:"P",pointClass:t}),c.registerSeriesType("pivotpoints",o),o}),o(t,"masters/indicators/pivot-points.src.js",[],function(){})});
!function(t){"object"==typeof module&&module.exports?module.exports=t.default=t:"function"==typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(o){return t(o),t.Highcharts=o,t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(o){function t(o,t,e,r){o.hasOwnProperty(t)||(o[t]=r.apply(null,e),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:o[t]}})))}t(o=o?o._modules:{},"Stock/Indicators/Supertrend/SupertrendIndicator.js",[o["Core/Series/SeriesRegistry.js"],o["Core/Utilities.js"],o["Core/Chart/StockChart.js"]],function(o,t,n){function C(o,t,e){return{index:t,close:o.yData[t][e],x:o.xData[t]}}var r,e,i=this&&this.__extends||(r=function(o,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(o,t)},function(o,t){function e(){this.constructor=o}r(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),v=o.seriesTypes.atr,T=o.seriesTypes.sma,s=t.addEvent,S=t.correctFloat,D=t.isArray,l=t.extend,b=t.merge,_=t.objectEach;function p(){var o=null!==e&&e.apply(this,arguments)||this;return o.data=void 0,o.linkedParent=void 0,o.options=void 0,o.points=void 0,o}return i(p,e=T),p.prototype.init=function(){T.prototype.init.apply(this,arguments);var t,e=this,r=s(n,"afterLinkSeries",function(){var o;e.options&&(o=e.options,t=e.linkedParent.options,o.cropThreshold=t.cropThreshold-(o.params.period-1)),r()},{order:1})},p.prototype.drawGraph=function(){for(var o,t,e,r,n,i,s,l,p=this,a=p.options,d=p.linkedParent,c=d?d.points:[],h=p.points,u=p.graph,y=h.length,f=0<(f=c.length-y)?f:0,g={options:{gapSize:a.gapSize}},x={top:[],bottom:[],intersect:[]},m={top:{styles:{lineWidth:a.lineWidth,lineColor:a.fallingTrendColor||a.color,dashStyle:a.dashStyle}},bottom:{styles:{lineWidth:a.lineWidth,lineColor:a.risingTrendColor||a.color,dashStyle:a.dashStyle}},intersect:a.changeTrendLine};y--;)o=h[y],t=h[y-1],e=c[y-1+f],r=c[y-2+f],n=c[y+f],i=c[y+f+1],s=o.options.color,l={x:o.x,plotX:o.plotX,plotY:o.plotY,isNull:!1},!r&&e&&d.yData[e.index-1]&&(r=C(d,e.index-1,3)),!i&&n&&d.yData[n.index+1]&&(i=C(d,n.index+1,3)),!e&&r&&d.yData[r.index+1]?e=C(d,r.index+1,3):!e&&n&&d.yData[n.index-1]&&(e=C(d,n.index-1,3)),o&&e&&n&&r&&o.x!==e.x&&(o.x===n.x?(r=e,e=n):o.x===r.x?(e=r,r={close:d.yData[e.index-1][3],x:d.xData[e.index-1]}):i&&o.x===i.x&&(e=i,r=n)),t&&r&&e?(n={x:t.x,plotX:t.plotX,plotY:t.plotY,isNull:!1},o.y>=e.close&&t.y>=r.close?(o.color=s||a.fallingTrendColor||a.color,x.top.push(l)):o.y<e.close&&t.y<r.close?(o.color=s||a.risingTrendColor||a.color,x.bottom.push(l)):(x.intersect.push(l),x.intersect.push(n),x.intersect.push(b(n,{isNull:!0})),o.y>=e.close&&t.y<r.close?(o.color=s||a.fallingTrendColor||a.color,t.color=s||a.risingTrendColor||a.color,x.top.push(l),x.top.push(b(n,{isNull:!0}))):o.y<e.close&&t.y>=r.close&&(o.color=s||a.risingTrendColor||a.color,t.color=s||a.fallingTrendColor||a.color,x.bottom.push(l),x.bottom.push(b(n,{isNull:!0}))))):e&&(o.y>=e.close?(o.color=s||a.fallingTrendColor||a.color,x.top.push(l)):(o.color=s||a.risingTrendColor||a.color,x.bottom.push(l)));_(x,function(o,t){p.points=o,p.options=b(m[t].styles,g),p.graph=p["graph"+t+"Line"],T.prototype.drawGraph.call(p),p["graph"+t+"Line"]=p.graph}),p.points=h,p.options=a,p.graph=u},p.prototype.getValues=function(o,t){var e,r=t.period,n=(t=t.multiplier,o.xData),i=o.yData,s=[],l=[],p=[],a=0===r?0:r-1,d=[],c=[];if(!(n.length<=r||!D(i[0])||4!==i[0].length||r<0)){for(o=v.prototype.getValues.call(this,o,{period:r}).yData,e=0;e<o.length;e++){var h,u=i[a+e],y=i[a+e-1]||[],f=d[e-1],g=c[e-1],x=p[e-1],m=(0===e&&(f=g=x=0),r=S((u[1]+u[2])/2+t*o[e]),S((u[1]+u[2])/2-t*o[e]));d[e]=r<f||y[3]>f?r:f,c[e]=g<m||y[3]<g?m:g,x===f&&u[3]<d[e]||x===g&&u[3]<c[e]?h=d[e]:(x===f&&u[3]>d[e]||x===g&&u[3]>c[e])&&(h=c[e]),s.push([n[a+e],h]),l.push(n[a+e]),p.push(h)}return{values:s,xData:l,yData:p}}},p.defaultOptions=b(T.defaultOptions,{params:{index:void 0,multiplier:3,period:10},risingTrendColor:"#06b535",fallingTrendColor:"#f21313",changeTrendLine:{styles:{lineWidth:1,lineColor:"#333333",dashStyle:"LongDash"}}}),l((t=p).prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"]}),o.registerSeriesType("supertrend",t),t}),t(o,"masters/indicators/supertrend.src.js",[],function(){})});